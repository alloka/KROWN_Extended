<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="pdoc 12.3.1"/>
    <title>bench_executor.ontop API documentation</title>

    <style>/*! * Bootstrap Reboot v5.0.0 (https://getbootstrap.com/) * Copyright 2011-2021 The Bootstrap Authors * Copyright 2011-2021 Twitter, Inc. * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE) * Forked from Normalize.css, licensed MIT (https://github.com/necolas/normalize.css/blob/master/LICENSE.md) */*,::after,::before{box-sizing:border-box}@media (prefers-reduced-motion:no-preference){:root{scroll-behavior:smooth}}body{margin:0;font-family:system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans","Liberation Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";font-size:1rem;font-weight:400;line-height:1.5;color:#212529;background-color:#fff;-webkit-text-size-adjust:100%;-webkit-tap-highlight-color:transparent}hr{margin:1rem 0;color:inherit;background-color:currentColor;border:0;opacity:.25}hr:not([size]){height:1px}h1,h2,h3,h4,h5,h6{margin-top:0;margin-bottom:.5rem;font-weight:500;line-height:1.2}h1{font-size:calc(1.375rem + 1.5vw)}@media (min-width:1200px){h1{font-size:2.5rem}}h2{font-size:calc(1.325rem + .9vw)}@media (min-width:1200px){h2{font-size:2rem}}h3{font-size:calc(1.3rem + .6vw)}@media (min-width:1200px){h3{font-size:1.75rem}}h4{font-size:calc(1.275rem + .3vw)}@media (min-width:1200px){h4{font-size:1.5rem}}h5{font-size:1.25rem}h6{font-size:1rem}p{margin-top:0;margin-bottom:1rem}abbr[data-bs-original-title],abbr[title]{-webkit-text-decoration:underline dotted;text-decoration:underline dotted;cursor:help;-webkit-text-decoration-skip-ink:none;text-decoration-skip-ink:none}address{margin-bottom:1rem;font-style:normal;line-height:inherit}ol,ul{padding-left:2rem}dl,ol,ul{margin-top:0;margin-bottom:1rem}ol ol,ol ul,ul ol,ul ul{margin-bottom:0}dt{font-weight:700}dd{margin-bottom:.5rem;margin-left:0}blockquote{margin:0 0 1rem}b,strong{font-weight:bolder}small{font-size:.875em}mark{padding:.2em;background-color:#fcf8e3}sub,sup{position:relative;font-size:.75em;line-height:0;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}a{color:#0d6efd;text-decoration:underline}a:hover{color:#0a58ca}a:not([href]):not([class]),a:not([href]):not([class]):hover{color:inherit;text-decoration:none}code,kbd,pre,samp{font-family:SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;font-size:1em;direction:ltr;unicode-bidi:bidi-override}pre{display:block;margin-top:0;margin-bottom:1rem;overflow:auto;font-size:.875em}pre code{font-size:inherit;color:inherit;word-break:normal}code{font-size:.875em;color:#d63384;word-wrap:break-word}a>code{color:inherit}kbd{padding:.2rem .4rem;font-size:.875em;color:#fff;background-color:#212529;border-radius:.2rem}kbd kbd{padding:0;font-size:1em;font-weight:700}figure{margin:0 0 1rem}img,svg{vertical-align:middle}table{caption-side:bottom;border-collapse:collapse}caption{padding-top:.5rem;padding-bottom:.5rem;color:#6c757d;text-align:left}th{text-align:inherit;text-align:-webkit-match-parent}tbody,td,tfoot,th,thead,tr{border-color:inherit;border-style:solid;border-width:0}label{display:inline-block}button{border-radius:0}button:focus:not(:focus-visible){outline:0}button,input,optgroup,select,textarea{margin:0;font-family:inherit;font-size:inherit;line-height:inherit}button,select{text-transform:none}[role=button]{cursor:pointer}select{word-wrap:normal}select:disabled{opacity:1}[list]::-webkit-calendar-picker-indicator{display:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button}[type=button]:not(:disabled),[type=reset]:not(:disabled),[type=submit]:not(:disabled),button:not(:disabled){cursor:pointer}::-moz-focus-inner{padding:0;border-style:none}textarea{resize:vertical}fieldset{min-width:0;padding:0;margin:0;border:0}legend{float:left;width:100%;padding:0;margin-bottom:.5rem;font-size:calc(1.275rem + .3vw);line-height:inherit}@media (min-width:1200px){legend{font-size:1.5rem}}legend+*{clear:left}::-webkit-datetime-edit-day-field,::-webkit-datetime-edit-fields-wrapper,::-webkit-datetime-edit-hour-field,::-webkit-datetime-edit-minute,::-webkit-datetime-edit-month-field,::-webkit-datetime-edit-text,::-webkit-datetime-edit-year-field{padding:0}::-webkit-inner-spin-button{height:auto}[type=search]{outline-offset:-2px;-webkit-appearance:textfield}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-color-swatch-wrapper{padding:0}::file-selector-button{font:inherit}::-webkit-file-upload-button{font:inherit;-webkit-appearance:button}output{display:inline-block}iframe{border:0}summary{display:list-item;cursor:pointer}progress{vertical-align:baseline}[hidden]{display:none!important}</style>
    <style>/*! syntax-highlighting.css */pre{line-height:125%;}span.linenos{color:inherit; background-color:transparent; padding-left:5px; padding-right:20px;}.pdoc-code .hll{background-color:#ffffcc}.pdoc-code{background:#f8f8f8;}.pdoc-code .c{color:#3D7B7B; font-style:italic}.pdoc-code .err{border:1px solid #FF0000}.pdoc-code .k{color:#008000; font-weight:bold}.pdoc-code .o{color:#666666}.pdoc-code .ch{color:#3D7B7B; font-style:italic}.pdoc-code .cm{color:#3D7B7B; font-style:italic}.pdoc-code .cp{color:#9C6500}.pdoc-code .cpf{color:#3D7B7B; font-style:italic}.pdoc-code .c1{color:#3D7B7B; font-style:italic}.pdoc-code .cs{color:#3D7B7B; font-style:italic}.pdoc-code .gd{color:#A00000}.pdoc-code .ge{font-style:italic}.pdoc-code .gr{color:#E40000}.pdoc-code .gh{color:#000080; font-weight:bold}.pdoc-code .gi{color:#008400}.pdoc-code .go{color:#717171}.pdoc-code .gp{color:#000080; font-weight:bold}.pdoc-code .gs{font-weight:bold}.pdoc-code .gu{color:#800080; font-weight:bold}.pdoc-code .gt{color:#0044DD}.pdoc-code .kc{color:#008000; font-weight:bold}.pdoc-code .kd{color:#008000; font-weight:bold}.pdoc-code .kn{color:#008000; font-weight:bold}.pdoc-code .kp{color:#008000}.pdoc-code .kr{color:#008000; font-weight:bold}.pdoc-code .kt{color:#B00040}.pdoc-code .m{color:#666666}.pdoc-code .s{color:#BA2121}.pdoc-code .na{color:#687822}.pdoc-code .nb{color:#008000}.pdoc-code .nc{color:#0000FF; font-weight:bold}.pdoc-code .no{color:#880000}.pdoc-code .nd{color:#AA22FF}.pdoc-code .ni{color:#717171; font-weight:bold}.pdoc-code .ne{color:#CB3F38; font-weight:bold}.pdoc-code .nf{color:#0000FF}.pdoc-code .nl{color:#767600}.pdoc-code .nn{color:#0000FF; font-weight:bold}.pdoc-code .nt{color:#008000; font-weight:bold}.pdoc-code .nv{color:#19177C}.pdoc-code .ow{color:#AA22FF; font-weight:bold}.pdoc-code .w{color:#bbbbbb}.pdoc-code .mb{color:#666666}.pdoc-code .mf{color:#666666}.pdoc-code .mh{color:#666666}.pdoc-code .mi{color:#666666}.pdoc-code .mo{color:#666666}.pdoc-code .sa{color:#BA2121}.pdoc-code .sb{color:#BA2121}.pdoc-code .sc{color:#BA2121}.pdoc-code .dl{color:#BA2121}.pdoc-code .sd{color:#BA2121; font-style:italic}.pdoc-code .s2{color:#BA2121}.pdoc-code .se{color:#AA5D1F; font-weight:bold}.pdoc-code .sh{color:#BA2121}.pdoc-code .si{color:#A45A77; font-weight:bold}.pdoc-code .sx{color:#008000}.pdoc-code .sr{color:#A45A77}.pdoc-code .s1{color:#BA2121}.pdoc-code .ss{color:#19177C}.pdoc-code .bp{color:#008000}.pdoc-code .fm{color:#0000FF}.pdoc-code .vc{color:#19177C}.pdoc-code .vg{color:#19177C}.pdoc-code .vi{color:#19177C}.pdoc-code .vm{color:#19177C}.pdoc-code .il{color:#666666}</style>
    <style>/*! theme.css */:root{--pdoc-background:#fff;}.pdoc{--text:#212529;--muted:#6c757d;--link:#3660a5;--link-hover:#1659c5;--code:#f8f8f8;--active:#fff598;--accent:#eee;--accent2:#c1c1c1;--nav-hover:rgba(255, 255, 255, 0.5);--name:#0066BB;--def:#008800;--annotation:#007020;}</style>
    <style>/*! layout.css */html, body{width:100%;height:100%;}html, main{scroll-behavior:smooth;}body{background-color:var(--pdoc-background);}@media (max-width:769px){#navtoggle{cursor:pointer;position:absolute;width:50px;height:40px;top:1rem;right:1rem;border-color:var(--text);color:var(--text);display:flex;opacity:0.8;}#navtoggle:hover{opacity:1;}#togglestate + div{display:none;}#togglestate:checked + div{display:inherit;}main, header{padding:2rem 3vw;}header + main{margin-top:-3rem;}.git-button{display:none !important;}nav input[type="search"]{max-width:77%;}nav input[type="search"]:first-child{margin-top:-6px;}nav input[type="search"]:valid ~ *{display:none !important;}}@media (min-width:770px){:root{--sidebar-width:clamp(12.5rem, 28vw, 22rem);}nav{position:fixed;overflow:auto;height:100vh;width:var(--sidebar-width);}main, header{padding:3rem 2rem 3rem calc(var(--sidebar-width) + 3rem);width:calc(54rem + var(--sidebar-width));max-width:100%;}header + main{margin-top:-4rem;}#navtoggle{display:none;}}#togglestate{position:absolute;height:0;opacity:0;}nav.pdoc{--pad:clamp(0.5rem, 2vw, 1.75rem);--indent:1.5rem;background-color:var(--accent);border-right:1px solid var(--accent2);box-shadow:0 0 20px rgba(50, 50, 50, .2) inset;padding:0 0 0 var(--pad);overflow-wrap:anywhere;scrollbar-width:thin; scrollbar-color:var(--accent2) transparent }nav.pdoc::-webkit-scrollbar{width:.4rem; }nav.pdoc::-webkit-scrollbar-thumb{background-color:var(--accent2); }nav.pdoc > div{padding:var(--pad) 0;}nav.pdoc .module-list-button{display:inline-flex;align-items:center;color:var(--text);border-color:var(--muted);margin-bottom:1rem;}nav.pdoc .module-list-button:hover{border-color:var(--text);}nav.pdoc input[type=search]{display:block;outline-offset:0;width:calc(100% - var(--pad));}nav.pdoc .logo{max-width:calc(100% - var(--pad));max-height:35vh;display:block;margin:0 auto 1rem;transform:translate(calc(-.5 * var(--pad)), 0);}nav.pdoc ul{list-style:none;padding-left:0;}nav.pdoc > div > ul{margin-left:calc(0px - var(--pad));}nav.pdoc li a{padding:.2rem 0 .2rem calc(var(--pad) + var(--indent));}nav.pdoc > div > ul > li > a{padding-left:var(--pad);}nav.pdoc li{transition:all 100ms;}nav.pdoc li:hover{background-color:var(--nav-hover);}nav.pdoc a, nav.pdoc a:hover{color:var(--text);}nav.pdoc a{display:block;}nav.pdoc > h2:first-of-type{margin-top:1.5rem;}nav.pdoc .class:before{content:"class ";color:var(--muted);}nav.pdoc .function:after{content:"()";color:var(--muted);}nav.pdoc footer:before{content:"";display:block;width:calc(100% - var(--pad));border-top:solid var(--accent2) 1px;margin-top:1.5rem;padding-top:.5rem;}nav.pdoc footer{font-size:small;}</style>
    <style>/*! content.css */.pdoc{color:var(--text);box-sizing:border-box;line-height:1.5;background:none;}.pdoc .pdoc-button{display:inline-block;border:solid black 1px;border-radius:2px;font-size:.75rem;padding:calc(0.5em - 1px) 1em;transition:100ms all;}.pdoc .pdoc-alert{padding:1rem 1rem 1rem calc(1.5rem + 24px);border:1px solid transparent;border-radius:.25rem;background-repeat:no-repeat;background-position:1rem center;margin-bottom:1rem;}.pdoc .pdoc-alert > *:last-child{margin-bottom:0;}.pdoc .pdoc-alert-note {color:#084298;background-color:#cfe2ff;border-color:#b6d4fe;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23084298%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M8%2016A8%208%200%201%200%208%200a8%208%200%200%200%200%2016zm.93-9.412-1%204.705c-.07.34.029.533.304.533.194%200%20.487-.07.686-.246l-.088.416c-.287.346-.92.598-1.465.598-.703%200-1.002-.422-.808-1.319l.738-3.468c.064-.293.006-.399-.287-.47l-.451-.081.082-.381%202.29-.287zM8%205.5a1%201%200%201%201%200-2%201%201%200%200%201%200%202z%22/%3E%3C/svg%3E");}.pdoc .pdoc-alert-warning{color:#664d03;background-color:#fff3cd;border-color:#ffecb5;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23664d03%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M8.982%201.566a1.13%201.13%200%200%200-1.96%200L.165%2013.233c-.457.778.091%201.767.98%201.767h13.713c.889%200%201.438-.99.98-1.767L8.982%201.566zM8%205c.535%200%20.954.462.9.995l-.35%203.507a.552.552%200%200%201-1.1%200L7.1%205.995A.905.905%200%200%201%208%205zm.002%206a1%201%200%201%201%200%202%201%201%200%200%201%200-2z%22/%3E%3C/svg%3E");}.pdoc .pdoc-alert-danger{color:#842029;background-color:#f8d7da;border-color:#f5c2c7;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23842029%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M5.52.359A.5.5%200%200%201%206%200h4a.5.5%200%200%201%20.474.658L8.694%206H12.5a.5.5%200%200%201%20.395.807l-7%209a.5.5%200%200%201-.873-.454L6.823%209.5H3.5a.5.5%200%200%201-.48-.641l2.5-8.5z%22/%3E%3C/svg%3E");}.pdoc .visually-hidden{position:absolute !important;width:1px !important;height:1px !important;padding:0 !important;margin:-1px !important;overflow:hidden !important;clip:rect(0, 0, 0, 0) !important;white-space:nowrap !important;border:0 !important;}.pdoc h1, .pdoc h2, .pdoc h3{font-weight:300;margin:.3em 0;padding:.2em 0;}.pdoc > section:not(.module-info) h1{font-size:1.5rem;font-weight:500;}.pdoc > section:not(.module-info) h2{font-size:1.4rem;font-weight:500;}.pdoc > section:not(.module-info) h3{font-size:1.3rem;font-weight:500;}.pdoc > section:not(.module-info) h4{font-size:1.2rem;}.pdoc > section:not(.module-info) h5{font-size:1.1rem;}.pdoc a{text-decoration:none;color:var(--link);}.pdoc a:hover{color:var(--link-hover);}.pdoc blockquote{margin-left:2rem;}.pdoc pre{border-top:1px solid var(--accent2);border-bottom:1px solid var(--accent2);margin-top:0;margin-bottom:1em;padding:.5rem 0 .5rem .5rem;overflow-x:auto;background-color:var(--code);}.pdoc code{color:var(--text);padding:.2em .4em;margin:0;font-size:85%;background-color:var(--code);border-radius:6px;}.pdoc a > code{color:inherit;}.pdoc pre > code{display:inline-block;font-size:inherit;background:none;border:none;padding:0;}.pdoc > section:not(.module-info){margin-bottom:1.5rem;}.pdoc .modulename{margin-top:0;font-weight:bold;}.pdoc .modulename a{color:var(--link);transition:100ms all;}.pdoc .git-button{float:right;border:solid var(--link) 1px;}.pdoc .git-button:hover{background-color:var(--link);color:var(--pdoc-background);}.view-source-toggle-state,.view-source-toggle-state ~ .pdoc-code{display:none;}.view-source-toggle-state:checked ~ .pdoc-code{display:block;}.view-source-button{display:inline-block;float:right;font-size:.75rem;line-height:1.5rem;color:var(--muted);padding:0 .4rem 0 1.3rem;cursor:pointer;text-indent:-2px;}.view-source-button > span{visibility:hidden;}.module-info .view-source-button{float:none;display:flex;justify-content:flex-end;margin:-1.2rem .4rem -.2rem 0;}.view-source-button::before{position:absolute;content:"View Source";display:list-item;list-style-type:disclosure-closed;}.view-source-toggle-state:checked ~ .attr .view-source-button::before,.view-source-toggle-state:checked ~ .view-source-button::before{list-style-type:disclosure-open;}.pdoc .docstring{margin-bottom:1.5rem;}.pdoc section:not(.module-info) .docstring{margin-left:clamp(0rem, 5vw - 2rem, 1rem);}.pdoc .docstring .pdoc-code{margin-left:1em;margin-right:1em;}.pdoc h1:target,.pdoc h2:target,.pdoc h3:target,.pdoc h4:target,.pdoc h5:target,.pdoc h6:target,.pdoc .pdoc-code > pre > span:target{background-color:var(--active);box-shadow:-1rem 0 0 0 var(--active);}.pdoc .pdoc-code > pre > span:target{display:block;}.pdoc div:target > .attr,.pdoc section:target > .attr,.pdoc dd:target > a{background-color:var(--active);}.pdoc *{scroll-margin:2rem;}.pdoc .pdoc-code .linenos{user-select:none;}.pdoc .attr:hover{filter:contrast(0.95);}.pdoc section, .pdoc .classattr{position:relative;}.pdoc .headerlink{--width:clamp(1rem, 3vw, 2rem);position:absolute;top:0;left:calc(0rem - var(--width));transition:all 100ms ease-in-out;opacity:0;}.pdoc .headerlink::before{content:"#";display:block;text-align:center;width:var(--width);height:2.3rem;line-height:2.3rem;font-size:1.5rem;}.pdoc .attr:hover ~ .headerlink,.pdoc *:target > .headerlink,.pdoc .headerlink:hover{opacity:1;}.pdoc .attr{display:block;margin:.5rem 0 .5rem;padding:.4rem .4rem .4rem 1rem;background-color:var(--accent);overflow-x:auto;}.pdoc .classattr{margin-left:2rem;}.pdoc .name{color:var(--name);font-weight:bold;}.pdoc .def{color:var(--def);font-weight:bold;}.pdoc .signature{background-color:transparent;}.pdoc .param, .pdoc .return-annotation{white-space:pre;}.pdoc .signature.multiline .param{display:block;}.pdoc .signature.condensed .param{display:inline-block;}.pdoc .annotation{color:var(--annotation);}.pdoc .inherited{margin-left:2rem;}.pdoc .inherited dt{font-weight:700;}.pdoc .inherited dt, .pdoc .inherited dd{display:inline;margin-left:0;margin-bottom:.5rem;}.pdoc .inherited dd:not(:last-child):after{content:", ";}.pdoc .inherited .class:before{content:"class ";}.pdoc .inherited .function a:after{content:"()";}.pdoc .search-result .docstring{overflow:auto;max-height:25vh;}.pdoc .search-result.focused > .attr{background-color:var(--active);}.pdoc .attribution{margin-top:2rem;display:block;opacity:0.5;transition:all 200ms;filter:grayscale(100%);}.pdoc .attribution:hover{opacity:1;filter:grayscale(0%);}.pdoc .attribution img{margin-left:5px;height:35px;vertical-align:middle;width:70px;transition:all 200ms;}.pdoc table{display:block;width:max-content;max-width:100%;overflow:auto;margin-bottom:1rem;}.pdoc table th{font-weight:600;}.pdoc table th, .pdoc table td{padding:6px 13px;border:1px solid var(--accent2);}</style>
    <style>/*! custom.css */</style></head>
<body>
    <nav class="pdoc">
        <label id="navtoggle" for="togglestate" class="pdoc-button"><svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 30 30'><path stroke-linecap='round' stroke="currentColor" stroke-miterlimit='10' stroke-width='2' d='M4 7h22M4 15h22M4 23h22'/></svg></label>
        <input id="togglestate" type="checkbox" aria-hidden="true" tabindex="-1">
        <div>            <a class="pdoc-button module-list-button" href="../index.html">
<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-box-arrow-in-left" viewBox="0 0 16 16">
  <path fill-rule="evenodd" d="M10 3.5a.5.5 0 0 0-.5-.5h-8a.5.5 0 0 0-.5.5v9a.5.5 0 0 0 .5.5h8a.5.5 0 0 0 .5-.5v-2a.5.5 0 0 1 1 0v2A1.5 1.5 0 0 1 9.5 14h-8A1.5 1.5 0 0 1 0 12.5v-9A1.5 1.5 0 0 1 1.5 2h8A1.5 1.5 0 0 1 11 3.5v2a.5.5 0 0 1-1 0v-2z"/>
  <path fill-rule="evenodd" d="M4.146 8.354a.5.5 0 0 1 0-.708l3-3a.5.5 0 1 1 .708.708L5.707 7.5H14.5a.5.5 0 0 1 0 1H5.707l2.147 2.146a.5.5 0 0 1-.708.708l-3-3z"/>
</svg>                &nbsp;
                Module Index
            </a>


            <input type="search" placeholder="Search..." role="searchbox" aria-label="search"
                   pattern=".+" required>



        <h2>API Documentation</h2>
            <ul class="memberlist">
            <li>
                    <a class="class" href="#Ontop">Ontop</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#Ontop.__init__">Ontop</a>
                        </li>
                        <li>
                                <a class="variable" href="#Ontop.root_mount_directory">root_mount_directory</a>
                        </li>
                        <li>
                                <a class="variable" href="#Ontop.endpoint">endpoint</a>
                        </li>
                        <li>
                                <a class="variable" href="#Ontop.headers">headers</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#OntopVirtualize">OntopVirtualize</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#OntopVirtualize.__init__">OntopVirtualize</a>
                        </li>
                        <li>
                                <a class="function" href="#OntopVirtualize.execute_mapping">execute_mapping</a>
                        </li>
                </ul>

            </li>
            <li>
                    <a class="class" href="#OntopMaterialize">OntopMaterialize</a>
                            <ul class="memberlist">
                        <li>
                                <a class="function" href="#OntopMaterialize.__init__">OntopMaterialize</a>
                        </li>
                        <li>
                                <a class="function" href="#OntopMaterialize.execute_mapping">execute_mapping</a>
                        </li>
                </ul>

            </li>
    </ul>



        <a class="attribution" title="pdoc: Python API documentation generator" href="https://pdoc.dev" target="_blank">
            built with <span class="visually-hidden">pdoc</span><img
                alt="pdoc logo"
                src="data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20role%3D%22img%22%20aria-label%3D%22pdoc%20logo%22%20width%3D%22300%22%20height%3D%22150%22%20viewBox%3D%22-1%200%2060%2030%22%3E%3Ctitle%3Epdoc%3C/title%3E%3Cpath%20d%3D%22M29.621%2021.293c-.011-.273-.214-.475-.511-.481a.5.5%200%200%200-.489.503l-.044%201.393c-.097.551-.695%201.215-1.566%201.704-.577.428-1.306.486-2.193.182-1.426-.617-2.467-1.654-3.304-2.487l-.173-.172a3.43%203.43%200%200%200-.365-.306.49.49%200%200%200-.286-.196c-1.718-1.06-4.931-1.47-7.353.191l-.219.15c-1.707%201.187-3.413%202.131-4.328%201.03-.02-.027-.49-.685-.141-1.763.233-.721.546-2.408.772-4.076.042-.09.067-.187.046-.288.166-1.347.277-2.625.241-3.351%201.378-1.008%202.271-2.586%202.271-4.362%200-.976-.272-1.935-.788-2.774-.057-.094-.122-.18-.184-.268.033-.167.052-.339.052-.516%200-1.477-1.202-2.679-2.679-2.679-.791%200-1.496.352-1.987.9a6.3%206.3%200%200%200-1.001.029c-.492-.564-1.207-.929-2.012-.929-1.477%200-2.679%201.202-2.679%202.679A2.65%202.65%200%200%200%20.97%206.554c-.383.747-.595%201.572-.595%202.41%200%202.311%201.507%204.29%203.635%205.107-.037.699-.147%202.27-.423%203.294l-.137.461c-.622%202.042-2.515%208.257%201.727%2010.643%201.614.908%203.06%201.248%204.317%201.248%202.665%200%204.492-1.524%205.322-2.401%201.476-1.559%202.886-1.854%206.491.82%201.877%201.393%203.514%201.753%204.861%201.068%202.223-1.713%202.811-3.867%203.399-6.374.077-.846.056-1.469.054-1.537zm-4.835%204.313c-.054.305-.156.586-.242.629-.034-.007-.131-.022-.307-.157-.145-.111-.314-.478-.456-.908.221.121.432.25.675.355.115.039.219.051.33.081zm-2.251-1.238c-.05.33-.158.648-.252.694-.022.001-.125-.018-.307-.157-.217-.166-.488-.906-.639-1.573.358.344.754.693%201.198%201.036zm-3.887-2.337c-.006-.116-.018-.231-.041-.342.635.145%201.189.368%201.599.625.097.231.166.481.174.642-.03.049-.055.101-.067.158-.046.013-.128.026-.298.004-.278-.037-.901-.57-1.367-1.087zm-1.127-.497c.116.306.176.625.12.71-.019.014-.117.045-.345.016-.206-.027-.604-.332-.986-.695.41-.051.816-.056%201.211-.031zm-4.535%201.535c.209.22.379.47.358.598-.006.041-.088.138-.351.234-.144.055-.539-.063-.979-.259a11.66%2011.66%200%200%200%20.972-.573zm.983-.664c.359-.237.738-.418%201.126-.554.25.237.479.548.457.694-.006.042-.087.138-.351.235-.174.064-.694-.105-1.232-.375zm-3.381%201.794c-.022.145-.061.29-.149.401-.133.166-.358.248-.69.251h-.002c-.133%200-.306-.26-.45-.621.417.091.854.07%201.291-.031zm-2.066-8.077a4.78%204.78%200%200%201-.775-.584c.172-.115.505-.254.88-.378l-.105.962zm-.331%202.302a10.32%2010.32%200%200%201-.828-.502c.202-.143.576-.328.984-.49l-.156.992zm-.45%202.157l-.701-.403c.214-.115.536-.249.891-.376a11.57%2011.57%200%200%201-.19.779zm-.181%201.716c.064.398.194.702.298.893-.194-.051-.435-.162-.736-.398.061-.119.224-.3.438-.495zM8.87%204.141c0%20.152-.123.276-.276.276s-.275-.124-.275-.276.123-.276.276-.276.275.124.275.276zm-.735-.389a1.15%201.15%200%200%200-.314.783%201.16%201.16%200%200%200%201.162%201.162c.457%200%20.842-.27%201.032-.653.026.117.042.238.042.362a1.68%201.68%200%200%201-1.679%201.679%201.68%201.68%200%200%201-1.679-1.679c0-.843.626-1.535%201.436-1.654zM5.059%205.406A1.68%201.68%200%200%201%203.38%207.085a1.68%201.68%200%200%201-1.679-1.679c0-.037.009-.072.011-.109.21.3.541.508.935.508a1.16%201.16%200%200%200%201.162-1.162%201.14%201.14%200%200%200-.474-.912c.015%200%20.03-.005.045-.005.926.001%201.679.754%201.679%201.68zM3.198%204.141c0%20.152-.123.276-.276.276s-.275-.124-.275-.276.123-.276.276-.276.275.124.275.276zM1.375%208.964c0-.52.103-1.035.288-1.52.466.394%201.06.64%201.717.64%201.144%200%202.116-.725%202.499-1.738.383%201.012%201.355%201.738%202.499%201.738.867%200%201.631-.421%202.121-1.062.307.605.478%201.267.478%201.942%200%202.486-2.153%204.51-4.801%204.51s-4.801-2.023-4.801-4.51zm24.342%2019.349c-.985.498-2.267.168-3.813-.979-3.073-2.281-5.453-3.199-7.813-.705-1.315%201.391-4.163%203.365-8.423.97-3.174-1.786-2.239-6.266-1.261-9.479l.146-.492c.276-1.02.395-2.457.444-3.268a6.11%206.11%200%200%200%201.18.115%206.01%206.01%200%200%200%202.536-.562l-.006.175c-.802.215-1.848.612-2.021%201.25-.079.295.021.601.274.837.219.203.415.364.598.501-.667.304-1.243.698-1.311%201.179-.02.144-.022.507.393.787.213.144.395.26.564.365-1.285.521-1.361.96-1.381%201.126-.018.142-.011.496.427.746l.854.489c-.473.389-.971.914-.999%201.429-.018.278.095.532.316.713.675.556%201.231.721%201.653.721.059%200%20.104-.014.158-.02.207.707.641%201.64%201.513%201.64h.013c.8-.008%201.236-.345%201.462-.626.173-.216.268-.457.325-.692.424.195.93.374%201.372.374.151%200%20.294-.021.423-.068.732-.27.944-.704.993-1.021.009-.061.003-.119.002-.179.266.086.538.147.789.147.15%200%20.294-.021.423-.069.542-.2.797-.489.914-.754.237.147.478.258.704.288.106.014.205.021.296.021.356%200%20.595-.101.767-.229.438.435%201.094.992%201.656%201.067.106.014.205.021.296.021a1.56%201.56%200%200%200%20.323-.035c.17.575.453%201.289.866%201.605.358.273.665.362.914.362a.99.99%200%200%200%20.421-.093%201.03%201.03%200%200%200%20.245-.164c.168.428.39.846.68%201.068.358.273.665.362.913.362a.99.99%200%200%200%20.421-.093c.317-.148.512-.448.639-.762.251.157.495.257.726.257.127%200%20.25-.024.37-.071.427-.17.706-.617.841-1.314.022-.015.047-.022.068-.038.067-.051.133-.104.196-.159-.443%201.486-1.107%202.761-2.086%203.257zM8.66%209.925a.5.5%200%201%200-1%200c0%20.653-.818%201.205-1.787%201.205s-1.787-.552-1.787-1.205a.5.5%200%201%200-1%200c0%201.216%201.25%202.205%202.787%202.205s2.787-.989%202.787-2.205zm4.4%2015.965l-.208.097c-2.661%201.258-4.708%201.436-6.086.527-1.542-1.017-1.88-3.19-1.844-4.198a.4.4%200%200%200-.385-.414c-.242-.029-.406.164-.414.385-.046%201.249.367%203.686%202.202%204.896.708.467%201.547.7%202.51.7%201.248%200%202.706-.392%204.362-1.174l.185-.086a.4.4%200%200%200%20.205-.527c-.089-.204-.326-.291-.527-.206zM9.547%202.292c.093.077.205.114.317.114a.5.5%200%200%200%20.318-.886L8.817.397a.5.5%200%200%200-.703.068.5.5%200%200%200%20.069.703l1.364%201.124zm-7.661-.065c.086%200%20.173-.022.253-.068l1.523-.893a.5.5%200%200%200-.506-.863l-1.523.892a.5.5%200%200%200-.179.685c.094.158.261.247.432.247z%22%20transform%3D%22matrix%28-1%200%200%201%2058%200%29%22%20fill%3D%22%233bb300%22/%3E%3Cpath%20d%3D%22M.3%2021.86V10.18q0-.46.02-.68.04-.22.18-.5.28-.54%201.34-.54%201.06%200%201.42.28.38.26.44.78.76-1.04%202.38-1.04%201.64%200%203.1%201.54%201.46%201.54%201.46%203.58%200%202.04-1.46%203.58-1.44%201.54-3.08%201.54-1.64%200-2.38-.92v4.04q0%20.46-.04.68-.02.22-.18.5-.14.3-.5.42-.36.12-.98.12-.62%200-1-.12-.36-.12-.52-.4-.14-.28-.18-.5-.02-.22-.02-.68zm3.96-9.42q-.46.54-.46%201.18%200%20.64.46%201.18.48.52%201.2.52.74%200%201.24-.52.52-.52.52-1.18%200-.66-.48-1.18-.48-.54-1.26-.54-.76%200-1.22.54zm14.741-8.36q.16-.3.54-.42.38-.12%201-.12.64%200%201.02.12.38.12.52.42.16.3.18.54.04.22.04.68v11.94q0%20.46-.04.7-.02.22-.18.5-.3.54-1.7.54-1.38%200-1.54-.98-.84.96-2.34.96-1.8%200-3.28-1.56-1.48-1.58-1.48-3.66%200-2.1%201.48-3.68%201.5-1.58%203.28-1.58%201.48%200%202.3%201v-4.2q0-.46.02-.68.04-.24.18-.52zm-3.24%2010.86q.52.54%201.26.54.74%200%201.22-.54.5-.54.5-1.18%200-.66-.48-1.22-.46-.56-1.26-.56-.8%200-1.28.56-.48.54-.48%201.2%200%20.66.52%201.2zm7.833-1.2q0-2.4%201.68-3.96%201.68-1.56%203.84-1.56%202.16%200%203.82%201.56%201.66%201.54%201.66%203.94%200%201.66-.86%202.96-.86%201.28-2.1%201.9-1.22.6-2.54.6-1.32%200-2.56-.64-1.24-.66-2.1-1.92-.84-1.28-.84-2.88zm4.18%201.44q.64.48%201.3.48.66%200%201.32-.5.66-.5.66-1.48%200-.98-.62-1.46-.62-.48-1.34-.48-.72%200-1.34.5-.62.5-.62%201.48%200%20.96.64%201.46zm11.412-1.44q0%20.84.56%201.32.56.46%201.18.46.64%200%201.18-.36.56-.38.9-.38.6%200%201.46%201.06.46.58.46%201.04%200%20.76-1.1%201.42-1.14.8-2.8.8-1.86%200-3.58-1.34-.82-.64-1.34-1.7-.52-1.08-.52-2.36%200-1.3.52-2.34.52-1.06%201.34-1.7%201.66-1.32%203.54-1.32.76%200%201.48.22.72.2%201.06.4l.32.2q.36.24.56.38.52.4.52.92%200%20.5-.42%201.14-.72%201.1-1.38%201.1-.38%200-1.08-.44-.36-.34-1.04-.34-.66%200-1.24.48-.58.48-.58%201.34z%22%20fill%3D%22green%22/%3E%3C/svg%3E"/>
        </a>
</div>
    </nav>
    <main class="pdoc">
            <section class="module-info">
                    <h1 class="modulename">
bench_executor<wbr>.ontop    </h1>

                        <div class="docstring"><p>Ontop is a Virtual Knowledge Graph system. It exposes the content of
arbitrary relational databases as knowledge graphs. These graphs are virtual,
which means that data remains in the data sources instead of being moved
to another database.</p>

<p><strong>Website</strong>: <a href="https://ontop-vkg.org">https://ontop-vkg.org</a><br>
<strong>Repository</strong>: <a href="https://github.com/ontop/ontop">https://github.com/ontop/ontop</a></p>
</div>

                        <input id="mod-ontop-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">

                        <label class="view-source-button" for="mod-ontop-view-source"><span>View Source</span></label>

                        <div class="pdoc-code codehilite"><pre><span></span><span id="L-1"><a href="#L-1"><span class="linenos">  1</span></a><span class="ch">#!/usr/bin/env python3</span>
</span><span id="L-2"><a href="#L-2"><span class="linenos">  2</span></a>
</span><span id="L-3"><a href="#L-3"><span class="linenos">  3</span></a><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-4"><a href="#L-4"><span class="linenos">  4</span></a><span class="sd">Ontop is a Virtual Knowledge Graph system. It exposes the content of</span>
</span><span id="L-5"><a href="#L-5"><span class="linenos">  5</span></a><span class="sd">arbitrary relational databases as knowledge graphs. These graphs are virtual,</span>
</span><span id="L-6"><a href="#L-6"><span class="linenos">  6</span></a><span class="sd">which means that data remains in the data sources instead of being moved</span>
</span><span id="L-7"><a href="#L-7"><span class="linenos">  7</span></a><span class="sd">to another database.</span>
</span><span id="L-8"><a href="#L-8"><span class="linenos">  8</span></a>
</span><span id="L-9"><a href="#L-9"><span class="linenos">  9</span></a><span class="sd">**Website**: https://ontop-vkg.org&lt;br&gt;</span>
</span><span id="L-10"><a href="#L-10"><span class="linenos"> 10</span></a><span class="sd">**Repository**: https://github.com/ontop/ontop</span>
</span><span id="L-11"><a href="#L-11"><span class="linenos"> 11</span></a><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-12"><a href="#L-12"><span class="linenos"> 12</span></a>
</span><span id="L-13"><a href="#L-13"><span class="linenos"> 13</span></a><span class="kn">import</span> <span class="nn">os</span>
</span><span id="L-14"><a href="#L-14"><span class="linenos"> 14</span></a><span class="kn">import</span> <span class="nn">psutil</span>
</span><span id="L-15"><a href="#L-15"><span class="linenos"> 15</span></a><span class="kn">import</span> <span class="nn">configparser</span>
</span><span id="L-16"><a href="#L-16"><span class="linenos"> 16</span></a><span class="kn">from</span> <span class="nn">rdflib</span> <span class="kn">import</span> <span class="n">Graph</span><span class="p">,</span> <span class="n">Namespace</span><span class="p">,</span> <span class="n">RDF</span><span class="p">,</span> <span class="n">URIRef</span>
</span><span id="L-17"><a href="#L-17"><span class="linenos"> 17</span></a><span class="kn">from</span> <span class="nn">timeout_decorator</span> <span class="kn">import</span> <span class="n">timeout</span><span class="p">,</span> <span class="ne">TimeoutError</span>  <span class="c1"># type: ignore</span>
</span><span id="L-18"><a href="#L-18"><span class="linenos"> 18</span></a><span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">Dict</span><span class="p">,</span> <span class="n">Optional</span>
</span><span id="L-19"><a href="#L-19"><span class="linenos"> 19</span></a><span class="kn">from</span> <span class="nn">bench_executor.container</span> <span class="kn">import</span> <span class="n">Container</span>
</span><span id="L-20"><a href="#L-20"><span class="linenos"> 20</span></a><span class="kn">from</span> <span class="nn">bench_executor.logger</span> <span class="kn">import</span> <span class="n">Logger</span>
</span><span id="L-21"><a href="#L-21"><span class="linenos"> 21</span></a>
</span><span id="L-22"><a href="#L-22"><span class="linenos"> 22</span></a><span class="n">VERSION</span> <span class="o">=</span> <span class="s1">&#39;5.0.0&#39;</span>
</span><span id="L-23"><a href="#L-23"><span class="linenos"> 23</span></a><span class="n">TIMEOUT</span> <span class="o">=</span> <span class="mi">6</span> <span class="o">*</span> <span class="mi">3600</span>  <span class="c1"># 6 hours</span>
</span><span id="L-24"><a href="#L-24"><span class="linenos"> 24</span></a><span class="n">R2RML</span> <span class="o">=</span> <span class="n">Namespace</span><span class="p">(</span><span class="s1">&#39;http://www.w3.org/ns/r2rml#&#39;</span><span class="p">)</span>
</span><span id="L-25"><a href="#L-25"><span class="linenos"> 25</span></a>
</span><span id="L-26"><a href="#L-26"><span class="linenos"> 26</span></a>
</span><span id="L-27"><a href="#L-27"><span class="linenos"> 27</span></a><span class="k">class</span> <span class="nc">Ontop</span><span class="p">(</span><span class="n">Container</span><span class="p">):</span>
</span><span id="L-28"><a href="#L-28"><span class="linenos"> 28</span></a>    <span class="sd">&quot;&quot;&quot;Ontop container super class for OntopMaterialize and OntopVirtualize.&quot;&quot;&quot;</span>
</span><span id="L-29"><a href="#L-29"><span class="linenos"> 29</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">data_path</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">logger</span><span class="p">:</span> <span class="n">Logger</span><span class="p">,</span> <span class="n">mode</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
</span><span id="L-30"><a href="#L-30"><span class="linenos"> 30</span></a>        <span class="sd">&quot;&quot;&quot;Creates an instance of the Ontop class.</span>
</span><span id="L-31"><a href="#L-31"><span class="linenos"> 31</span></a>
</span><span id="L-32"><a href="#L-32"><span class="linenos"> 32</span></a><span class="sd">        Parameters</span>
</span><span id="L-33"><a href="#L-33"><span class="linenos"> 33</span></a><span class="sd">        ----------</span>
</span><span id="L-34"><a href="#L-34"><span class="linenos"> 34</span></a><span class="sd">        name : str</span>
</span><span id="L-35"><a href="#L-35"><span class="linenos"> 35</span></a><span class="sd">            Pretty name of the container.</span>
</span><span id="L-36"><a href="#L-36"><span class="linenos"> 36</span></a><span class="sd">        data_path: str</span>
</span><span id="L-37"><a href="#L-37"><span class="linenos"> 37</span></a><span class="sd">            Path to the data directory of the case.</span>
</span><span id="L-38"><a href="#L-38"><span class="linenos"> 38</span></a><span class="sd">        logger : Logger</span>
</span><span id="L-39"><a href="#L-39"><span class="linenos"> 39</span></a><span class="sd">            Logger to use for log messages.</span>
</span><span id="L-40"><a href="#L-40"><span class="linenos"> 40</span></a><span class="sd">        mode : str</span>
</span><span id="L-41"><a href="#L-41"><span class="linenos"> 41</span></a><span class="sd">            Ontop mode: `materialize` or `endpoint`</span>
</span><span id="L-42"><a href="#L-42"><span class="linenos"> 42</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-43"><a href="#L-43"><span class="linenos"> 43</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_mode</span> <span class="o">=</span> <span class="n">mode</span>
</span><span id="L-44"><a href="#L-44"><span class="linenos"> 44</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_headers</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="L-45"><a href="#L-45"><span class="linenos"> 45</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span> <span class="o">=</span> <span class="n">logger</span>
</span><span id="L-46"><a href="#L-46"><span class="linenos"> 46</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_data_path</span> <span class="o">=</span> <span class="n">data_path</span>
</span><span id="L-47"><a href="#L-47"><span class="linenos"> 47</span></a>
</span><span id="L-48"><a href="#L-48"><span class="linenos"> 48</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_mode</span> <span class="o">==</span> <span class="s1">&#39;endpoint&#39;</span><span class="p">:</span>
</span><span id="L-49"><a href="#L-49"><span class="linenos"> 49</span></a>            <span class="n">subdir</span> <span class="o">=</span> <span class="s1">&#39;ontopvirtualize&#39;</span>
</span><span id="L-50"><a href="#L-50"><span class="linenos"> 50</span></a>        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">_mode</span> <span class="o">==</span> <span class="s1">&#39;materialize&#39;</span><span class="p">:</span>
</span><span id="L-51"><a href="#L-51"><span class="linenos"> 51</span></a>            <span class="n">subdir</span> <span class="o">=</span> <span class="s1">&#39;ontopmaterialize&#39;</span>
</span><span id="L-52"><a href="#L-52"><span class="linenos"> 52</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-53"><a href="#L-53"><span class="linenos"> 53</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Unknown Ontop mode: &quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_mode</span><span class="si">}</span><span class="s1">&quot;&#39;</span><span class="p">)</span>
</span><span id="L-54"><a href="#L-54"><span class="linenos"> 54</span></a>        <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_data_path</span><span class="p">,</span> <span class="n">subdir</span><span class="p">),</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="L-55"><a href="#L-55"><span class="linenos"> 55</span></a>
</span><span id="L-56"><a href="#L-56"><span class="linenos"> 56</span></a>        <span class="c1"># Set Java heap to 1/2 of available memory instead of the default 1/4</span>
</span><span id="L-57"><a href="#L-57"><span class="linenos"> 57</span></a>        <span class="n">max_heap</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">psutil</span><span class="o">.</span><span class="n">virtual_memory</span><span class="p">()</span><span class="o">.</span><span class="n">total</span> <span class="o">*</span> <span class="p">(</span><span class="mi">1</span><span class="o">/</span><span class="mi">2</span><span class="p">))</span>
</span><span id="L-58"><a href="#L-58"><span class="linenos"> 58</span></a>
</span><span id="L-59"><a href="#L-59"><span class="linenos"> 59</span></a>        <span class="c1"># Configure logging</span>
</span><span id="L-60"><a href="#L-60"><span class="linenos"> 60</span></a>        <span class="n">log_level</span> <span class="o">=</span> <span class="s1">&#39;info&#39;</span>
</span><span id="L-61"><a href="#L-61"><span class="linenos"> 61</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span>
</span><span id="L-62"><a href="#L-62"><span class="linenos"> 62</span></a>            <span class="n">log_level</span> <span class="o">=</span> <span class="s1">&#39;debug&#39;</span>
</span><span id="L-63"><a href="#L-63"><span class="linenos"> 63</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Initialized Ontop logger at &quot;</span><span class="si">{</span><span class="n">log_level</span><span class="si">}</span><span class="s1">&quot; level&#39;</span><span class="p">)</span>
</span><span id="L-64"><a href="#L-64"><span class="linenos"> 64</span></a>
</span><span id="L-65"><a href="#L-65"><span class="linenos"> 65</span></a>        <span class="n">environment</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;ONTOP_JAVA_ARGS&#39;</span><span class="p">:</span> <span class="sa">f</span><span class="s1">&#39;-Xmx</span><span class="si">{</span><span class="n">max_heap</span><span class="si">}</span><span class="s1"> -Xms</span><span class="si">{</span><span class="n">max_heap</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">,</span>
</span><span id="L-66"><a href="#L-66"><span class="linenos"> 66</span></a>                       <span class="s1">&#39;ONTOP_LOG_LEVEL&#39;</span><span class="p">:</span> <span class="n">log_level</span><span class="p">}</span>
</span><span id="L-67"><a href="#L-67"><span class="linenos"> 67</span></a>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;blindreviewing/ontop:v</span><span class="si">{</span><span class="n">VERSION</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span>
</span><span id="L-68"><a href="#L-68"><span class="linenos"> 68</span></a>                         <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="p">,</span>
</span><span id="L-69"><a href="#L-69"><span class="linenos"> 69</span></a>                         <span class="n">ports</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;8888&#39;</span><span class="p">:</span> <span class="s1">&#39;8888&#39;</span><span class="p">},</span>
</span><span id="L-70"><a href="#L-70"><span class="linenos"> 70</span></a>                         <span class="n">environment</span><span class="o">=</span><span class="n">environment</span><span class="p">,</span>
</span><span id="L-71"><a href="#L-71"><span class="linenos"> 71</span></a>                         <span class="n">volumes</span><span class="o">=</span><span class="p">[</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_data_path</span><span class="si">}</span><span class="s1">/&#39;</span>
</span><span id="L-72"><a href="#L-72"><span class="linenos"> 72</span></a>                                  <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">root_mount_directory</span><span class="si">}</span><span class="s1">:/data&#39;</span><span class="p">,</span>
</span><span id="L-73"><a href="#L-73"><span class="linenos"> 73</span></a>                                  <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_data_path</span><span class="si">}</span><span class="s1">/shared:/data/shared&#39;</span><span class="p">])</span>
</span><span id="L-74"><a href="#L-74"><span class="linenos"> 74</span></a>
</span><span id="L-75"><a href="#L-75"><span class="linenos"> 75</span></a>    <span class="nd">@property</span>
</span><span id="L-76"><a href="#L-76"><span class="linenos"> 76</span></a>    <span class="k">def</span> <span class="nf">root_mount_directory</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="L-77"><a href="#L-77"><span class="linenos"> 77</span></a>        <span class="sd">&quot;&quot;&quot;Subdirectory in the root directory of the case for Ontop.</span>
</span><span id="L-78"><a href="#L-78"><span class="linenos"> 78</span></a>
</span><span id="L-79"><a href="#L-79"><span class="linenos"> 79</span></a><span class="sd">        Returns</span>
</span><span id="L-80"><a href="#L-80"><span class="linenos"> 80</span></a><span class="sd">        -------</span>
</span><span id="L-81"><a href="#L-81"><span class="linenos"> 81</span></a><span class="sd">        subdirectory : str</span>
</span><span id="L-82"><a href="#L-82"><span class="linenos"> 82</span></a><span class="sd">            Subdirectory of the root directory for Ontop.</span>
</span><span id="L-83"><a href="#L-83"><span class="linenos"> 83</span></a>
</span><span id="L-84"><a href="#L-84"><span class="linenos"> 84</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-85"><a href="#L-85"><span class="linenos"> 85</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_mode</span> <span class="o">==</span> <span class="s1">&#39;endpoint&#39;</span><span class="p">:</span>
</span><span id="L-86"><a href="#L-86"><span class="linenos"> 86</span></a>            <span class="k">return</span> <span class="s1">&#39;ontopvirtualize&#39;</span>
</span><span id="L-87"><a href="#L-87"><span class="linenos"> 87</span></a>        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">_mode</span> <span class="o">==</span> <span class="s1">&#39;materialize&#39;</span><span class="p">:</span>
</span><span id="L-88"><a href="#L-88"><span class="linenos"> 88</span></a>            <span class="k">return</span> <span class="s1">&#39;ontopmaterialize&#39;</span>
</span><span id="L-89"><a href="#L-89"><span class="linenos"> 89</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-90"><a href="#L-90"><span class="linenos"> 90</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Unknown Ontop mode: &quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_mode</span><span class="si">}</span><span class="s1">&quot;&#39;</span><span class="p">)</span>
</span><span id="L-91"><a href="#L-91"><span class="linenos"> 91</span></a>
</span><span id="L-92"><a href="#L-92"><span class="linenos"> 92</span></a>    <span class="nd">@property</span>
</span><span id="L-93"><a href="#L-93"><span class="linenos"> 93</span></a>    <span class="k">def</span> <span class="nf">endpoint</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="L-94"><a href="#L-94"><span class="linenos"> 94</span></a>        <span class="sd">&quot;&quot;&quot;SPARQL endpoint URL for Ontop.</span>
</span><span id="L-95"><a href="#L-95"><span class="linenos"> 95</span></a>
</span><span id="L-96"><a href="#L-96"><span class="linenos"> 96</span></a><span class="sd">        Returns</span>
</span><span id="L-97"><a href="#L-97"><span class="linenos"> 97</span></a><span class="sd">        -------</span>
</span><span id="L-98"><a href="#L-98"><span class="linenos"> 98</span></a><span class="sd">        url : str</span>
</span><span id="L-99"><a href="#L-99"><span class="linenos"> 99</span></a><span class="sd">            SPARQL endpoint URL.</span>
</span><span id="L-100"><a href="#L-100"><span class="linenos">100</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-101"><a href="#L-101"><span class="linenos">101</span></a>        <span class="k">return</span> <span class="s1">&#39;http://localhost:8888/sparql&#39;</span>
</span><span id="L-102"><a href="#L-102"><span class="linenos">102</span></a>
</span><span id="L-103"><a href="#L-103"><span class="linenos">103</span></a>    <span class="nd">@property</span>
</span><span id="L-104"><a href="#L-104"><span class="linenos">104</span></a>    <span class="k">def</span> <span class="nf">headers</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
</span><span id="L-105"><a href="#L-105"><span class="linenos">105</span></a>        <span class="sd">&quot;&quot;&quot;HTTP headers of SPARQL queries for serialization formats.</span>
</span><span id="L-106"><a href="#L-106"><span class="linenos">106</span></a>
</span><span id="L-107"><a href="#L-107"><span class="linenos">107</span></a><span class="sd">        Only supported serialization formats are included in the dictionary.</span>
</span><span id="L-108"><a href="#L-108"><span class="linenos">108</span></a><span class="sd">        Currently, the following formats are supported:</span>
</span><span id="L-109"><a href="#L-109"><span class="linenos">109</span></a><span class="sd">        - N-Triples</span>
</span><span id="L-110"><a href="#L-110"><span class="linenos">110</span></a><span class="sd">        - N-Quads</span>
</span><span id="L-111"><a href="#L-111"><span class="linenos">111</span></a><span class="sd">        - Turtle</span>
</span><span id="L-112"><a href="#L-112"><span class="linenos">112</span></a><span class="sd">        - CSV</span>
</span><span id="L-113"><a href="#L-113"><span class="linenos">113</span></a><span class="sd">        - RDF/JSON</span>
</span><span id="L-114"><a href="#L-114"><span class="linenos">114</span></a><span class="sd">        - RDF/XML</span>
</span><span id="L-115"><a href="#L-115"><span class="linenos">115</span></a><span class="sd">        - JSON-LD</span>
</span><span id="L-116"><a href="#L-116"><span class="linenos">116</span></a>
</span><span id="L-117"><a href="#L-117"><span class="linenos">117</span></a><span class="sd">        Returns</span>
</span><span id="L-118"><a href="#L-118"><span class="linenos">118</span></a><span class="sd">        -------</span>
</span><span id="L-119"><a href="#L-119"><span class="linenos">119</span></a><span class="sd">        headers : dict</span>
</span><span id="L-120"><a href="#L-120"><span class="linenos">120</span></a><span class="sd">            Dictionary of headers to use for each serialization format.</span>
</span><span id="L-121"><a href="#L-121"><span class="linenos">121</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-122"><a href="#L-122"><span class="linenos">122</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_headers</span>
</span><span id="L-123"><a href="#L-123"><span class="linenos">123</span></a>
</span><span id="L-124"><a href="#L-124"><span class="linenos">124</span></a>    <span class="k">def</span> <span class="nf">_execute</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">arguments</span><span class="p">:</span> <span class="nb">list</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="L-125"><a href="#L-125"><span class="linenos">125</span></a>        <span class="sd">&quot;&quot;&quot;Execute Ontop with given arguments.</span>
</span><span id="L-126"><a href="#L-126"><span class="linenos">126</span></a>
</span><span id="L-127"><a href="#L-127"><span class="linenos">127</span></a><span class="sd">        Parameters</span>
</span><span id="L-128"><a href="#L-128"><span class="linenos">128</span></a><span class="sd">        ----------</span>
</span><span id="L-129"><a href="#L-129"><span class="linenos">129</span></a><span class="sd">        arguments : list</span>
</span><span id="L-130"><a href="#L-130"><span class="linenos">130</span></a><span class="sd">            Arguments to supply to Ontop.</span>
</span><span id="L-131"><a href="#L-131"><span class="linenos">131</span></a>
</span><span id="L-132"><a href="#L-132"><span class="linenos">132</span></a><span class="sd">        Returns</span>
</span><span id="L-133"><a href="#L-133"><span class="linenos">133</span></a><span class="sd">        -------</span>
</span><span id="L-134"><a href="#L-134"><span class="linenos">134</span></a><span class="sd">        success : bool</span>
</span><span id="L-135"><a href="#L-135"><span class="linenos">135</span></a><span class="sd">            Whether the execution succeeded or not.</span>
</span><span id="L-136"><a href="#L-136"><span class="linenos">136</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-137"><a href="#L-137"><span class="linenos">137</span></a>
</span><span id="L-138"><a href="#L-138"><span class="linenos">138</span></a>        <span class="n">cmd</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;/ontop/ontop </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_mode</span><span class="si">}</span><span class="s1"> </span><span class="si">{</span><span class="s2">&quot; &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">arguments</span><span class="p">)</span><span class="si">}</span><span class="s1">&#39;</span>
</span><span id="L-139"><a href="#L-139"><span class="linenos">139</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Executing Ontop with command: </span><span class="si">{</span><span class="n">cmd</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
</span><span id="L-140"><a href="#L-140"><span class="linenos">140</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_mode</span> <span class="o">==</span> <span class="s1">&#39;endpoint&#39;</span><span class="p">:</span>
</span><span id="L-141"><a href="#L-141"><span class="linenos">141</span></a>            <span class="n">log_line</span> <span class="o">=</span> <span class="s1">&#39;OntopEndpointApplication - Started &#39;</span> <span class="o">+</span> \
</span><span id="L-142"><a href="#L-142"><span class="linenos">142</span></a>                       <span class="s1">&#39;OntopEndpointApplication&#39;</span>
</span><span id="L-143"><a href="#L-143"><span class="linenos">143</span></a>            <span class="n">success</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">run_and_wait_for_log</span><span class="p">(</span><span class="n">log_line</span><span class="p">,</span> <span class="n">cmd</span><span class="p">)</span>
</span><span id="L-144"><a href="#L-144"><span class="linenos">144</span></a>        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">_mode</span> <span class="o">==</span> <span class="s1">&#39;materialize&#39;</span><span class="p">:</span>
</span><span id="L-145"><a href="#L-145"><span class="linenos">145</span></a>            <span class="n">success</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">run_and_wait_for_exit</span><span class="p">(</span><span class="n">cmd</span><span class="p">)</span>
</span><span id="L-146"><a href="#L-146"><span class="linenos">146</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-147"><a href="#L-147"><span class="linenos">147</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Unknown Ontop mode &quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_mode</span><span class="si">}</span><span class="s1">&quot;&#39;</span><span class="p">)</span>
</span><span id="L-148"><a href="#L-148"><span class="linenos">148</span></a>            <span class="n">success</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="L-149"><a href="#L-149"><span class="linenos">149</span></a>
</span><span id="L-150"><a href="#L-150"><span class="linenos">150</span></a>        <span class="k">return</span> <span class="n">success</span>
</span><span id="L-151"><a href="#L-151"><span class="linenos">151</span></a>
</span><span id="L-152"><a href="#L-152"><span class="linenos">152</span></a>    <span class="k">def</span> <span class="nf">_execute_mapping</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
</span><span id="L-153"><a href="#L-153"><span class="linenos">153</span></a>                         <span class="n">config_file</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="L-154"><a href="#L-154"><span class="linenos">154</span></a>                         <span class="n">arguments</span><span class="p">:</span> <span class="nb">list</span><span class="p">,</span>
</span><span id="L-155"><a href="#L-155"><span class="linenos">155</span></a>                         <span class="n">mapping_file</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="L-156"><a href="#L-156"><span class="linenos">156</span></a>                         <span class="n">output_file</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span>
</span><span id="L-157"><a href="#L-157"><span class="linenos">157</span></a>                         <span class="n">rdb_username</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="L-158"><a href="#L-158"><span class="linenos">158</span></a>                         <span class="n">rdb_password</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="L-159"><a href="#L-159"><span class="linenos">159</span></a>                         <span class="n">rdb_host</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="L-160"><a href="#L-160"><span class="linenos">160</span></a>                         <span class="n">rdb_port</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
</span><span id="L-161"><a href="#L-161"><span class="linenos">161</span></a>                         <span class="n">rdb_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="L-162"><a href="#L-162"><span class="linenos">162</span></a>                         <span class="n">rdb_type</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="L-163"><a href="#L-163"><span class="linenos">163</span></a>        <span class="sd">&quot;&quot;&quot;Execute a mapping file with Ontop.</span>
</span><span id="L-164"><a href="#L-164"><span class="linenos">164</span></a>
</span><span id="L-165"><a href="#L-165"><span class="linenos">165</span></a><span class="sd">        Only relational databases are supported by</span>
</span><span id="L-166"><a href="#L-166"><span class="linenos">166</span></a><span class="sd">        Ontop, thus the relational database parameters are mandantory.</span>
</span><span id="L-167"><a href="#L-167"><span class="linenos">167</span></a>
</span><span id="L-168"><a href="#L-168"><span class="linenos">168</span></a><span class="sd">        Parameters</span>
</span><span id="L-169"><a href="#L-169"><span class="linenos">169</span></a><span class="sd">        ----------</span>
</span><span id="L-170"><a href="#L-170"><span class="linenos">170</span></a><span class="sd">        config_file : str</span>
</span><span id="L-171"><a href="#L-171"><span class="linenos">171</span></a><span class="sd">            Name of the generated config file for Ontop.</span>
</span><span id="L-172"><a href="#L-172"><span class="linenos">172</span></a><span class="sd">        arguments : list</span>
</span><span id="L-173"><a href="#L-173"><span class="linenos">173</span></a><span class="sd">            List of arguments to pass to Ontop.</span>
</span><span id="L-174"><a href="#L-174"><span class="linenos">174</span></a><span class="sd">        mapping_file : str</span>
</span><span id="L-175"><a href="#L-175"><span class="linenos">175</span></a><span class="sd">            Name of the mapping file to use.</span>
</span><span id="L-176"><a href="#L-176"><span class="linenos">176</span></a><span class="sd">        output_file : Optional[str]</span>
</span><span id="L-177"><a href="#L-177"><span class="linenos">177</span></a><span class="sd">            Name of the output file to use. Only applicable for</span>
</span><span id="L-178"><a href="#L-178"><span class="linenos">178</span></a><span class="sd">            materialization.</span>
</span><span id="L-179"><a href="#L-179"><span class="linenos">179</span></a><span class="sd">        rdb_username : str</span>
</span><span id="L-180"><a href="#L-180"><span class="linenos">180</span></a><span class="sd">            Username for the database.</span>
</span><span id="L-181"><a href="#L-181"><span class="linenos">181</span></a><span class="sd">        rdb_password : str</span>
</span><span id="L-182"><a href="#L-182"><span class="linenos">182</span></a><span class="sd">            Password for the database.</span>
</span><span id="L-183"><a href="#L-183"><span class="linenos">183</span></a><span class="sd">        rdb_host : str</span>
</span><span id="L-184"><a href="#L-184"><span class="linenos">184</span></a><span class="sd">            Hostname for the database.</span>
</span><span id="L-185"><a href="#L-185"><span class="linenos">185</span></a><span class="sd">        rdb_port : int</span>
</span><span id="L-186"><a href="#L-186"><span class="linenos">186</span></a><span class="sd">            Port for the database.</span>
</span><span id="L-187"><a href="#L-187"><span class="linenos">187</span></a><span class="sd">        rdb_name : str</span>
</span><span id="L-188"><a href="#L-188"><span class="linenos">188</span></a><span class="sd">            Database name for the database.</span>
</span><span id="L-189"><a href="#L-189"><span class="linenos">189</span></a><span class="sd">        rdb_type : str</span>
</span><span id="L-190"><a href="#L-190"><span class="linenos">190</span></a><span class="sd">            Database type.</span>
</span><span id="L-191"><a href="#L-191"><span class="linenos">191</span></a>
</span><span id="L-192"><a href="#L-192"><span class="linenos">192</span></a><span class="sd">        Returns</span>
</span><span id="L-193"><a href="#L-193"><span class="linenos">193</span></a><span class="sd">        -------</span>
</span><span id="L-194"><a href="#L-194"><span class="linenos">194</span></a><span class="sd">        success : bool</span>
</span><span id="L-195"><a href="#L-195"><span class="linenos">195</span></a><span class="sd">            Whether the execution was successfull or not.</span>
</span><span id="L-196"><a href="#L-196"><span class="linenos">196</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-197"><a href="#L-197"><span class="linenos">197</span></a>        <span class="c1"># Generate INI configuration file since no CLI is available</span>
</span><span id="L-198"><a href="#L-198"><span class="linenos">198</span></a>        <span class="n">config</span> <span class="o">=</span> <span class="n">configparser</span><span class="o">.</span><span class="n">ConfigParser</span><span class="p">()</span>
</span><span id="L-199"><a href="#L-199"><span class="linenos">199</span></a>        <span class="n">config</span><span class="p">[</span><span class="s1">&#39;root&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="L-200"><a href="#L-200"><span class="linenos">200</span></a>        <span class="k">if</span> <span class="n">rdb_type</span> <span class="o">==</span> <span class="s1">&#39;MySQL&#39;</span><span class="p">:</span>
</span><span id="L-201"><a href="#L-201"><span class="linenos">201</span></a>            <span class="n">dsn</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;jdbc:mysql://</span><span class="si">{</span><span class="n">rdb_host</span><span class="si">}</span><span class="s1">:</span><span class="si">{</span><span class="n">rdb_port</span><span class="si">}</span><span class="s1">/</span><span class="si">{</span><span class="n">rdb_name</span><span class="si">}</span><span class="s1">&#39;</span>
</span><span id="L-202"><a href="#L-202"><span class="linenos">202</span></a>            <span class="n">config</span><span class="p">[</span><span class="s1">&#39;root&#39;</span><span class="p">][</span><span class="s1">&#39;jdbc.url&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">dsn</span>
</span><span id="L-203"><a href="#L-203"><span class="linenos">203</span></a>            <span class="n">config</span><span class="p">[</span><span class="s1">&#39;root&#39;</span><span class="p">][</span><span class="s1">&#39;jdbc.driver&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;com.mysql.cj.jdbc.Driver&#39;</span>
</span><span id="L-204"><a href="#L-204"><span class="linenos">204</span></a>        <span class="k">elif</span> <span class="n">rdb_type</span> <span class="o">==</span> <span class="s1">&#39;PostgreSQL&#39;</span><span class="p">:</span>
</span><span id="L-205"><a href="#L-205"><span class="linenos">205</span></a>            <span class="n">dsn</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;jdbc:postgresql://</span><span class="si">{</span><span class="n">rdb_host</span><span class="si">}</span><span class="s1">:</span><span class="si">{</span><span class="n">rdb_port</span><span class="si">}</span><span class="s1">/</span><span class="si">{</span><span class="n">rdb_name</span><span class="si">}</span><span class="s1">&#39;</span>
</span><span id="L-206"><a href="#L-206"><span class="linenos">206</span></a>            <span class="n">config</span><span class="p">[</span><span class="s1">&#39;root&#39;</span><span class="p">][</span><span class="s1">&#39;jdbc.url&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">dsn</span>
</span><span id="L-207"><a href="#L-207"><span class="linenos">207</span></a>            <span class="n">config</span><span class="p">[</span><span class="s1">&#39;root&#39;</span><span class="p">][</span><span class="s1">&#39;jdbc.driver&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;org.postgresql.Driver&#39;</span>
</span><span id="L-208"><a href="#L-208"><span class="linenos">208</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-209"><a href="#L-209"><span class="linenos">209</span></a>            <span class="n">msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;Unknown RDB type: &quot;</span><span class="si">{</span><span class="n">rdb_type</span><span class="si">}</span><span class="s1">&quot;&#39;</span>
</span><span id="L-210"><a href="#L-210"><span class="linenos">210</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
</span><span id="L-211"><a href="#L-211"><span class="linenos">211</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
</span><span id="L-212"><a href="#L-212"><span class="linenos">212</span></a>        <span class="n">config</span><span class="p">[</span><span class="s1">&#39;root&#39;</span><span class="p">][</span><span class="s1">&#39;jdbc.user&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">rdb_username</span>
</span><span id="L-213"><a href="#L-213"><span class="linenos">213</span></a>        <span class="n">config</span><span class="p">[</span><span class="s1">&#39;root&#39;</span><span class="p">][</span><span class="s1">&#39;jdbc.password&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">rdb_password</span>
</span><span id="L-214"><a href="#L-214"><span class="linenos">214</span></a>
</span><span id="L-215"><a href="#L-215"><span class="linenos">215</span></a>        <span class="n">path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_data_path</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">root_mount_directory</span><span class="p">)</span>
</span><span id="L-216"><a href="#L-216"><span class="linenos">216</span></a>        <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="L-217"><a href="#L-217"><span class="linenos">217</span></a>        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="s1">&#39;config.properties&#39;</span><span class="p">),</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
</span><span id="L-218"><a href="#L-218"><span class="linenos">218</span></a>            <span class="n">config</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="n">space_around_delimiters</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</span><span id="L-219"><a href="#L-219"><span class="linenos">219</span></a>
</span><span id="L-220"><a href="#L-220"><span class="linenos">220</span></a>        <span class="c1"># .properties files are like .ini files but without a [HEADER]</span>
</span><span id="L-221"><a href="#L-221"><span class="linenos">221</span></a>        <span class="c1"># Use a [root] header and remove it after writing</span>
</span><span id="L-222"><a href="#L-222"><span class="linenos">222</span></a>        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="s1">&#39;config.properties&#39;</span><span class="p">),</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
</span><span id="L-223"><a href="#L-223"><span class="linenos">223</span></a>            <span class="n">data</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
</span><span id="L-224"><a href="#L-224"><span class="linenos">224</span></a>
</span><span id="L-225"><a href="#L-225"><span class="linenos">225</span></a>        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="s1">&#39;config.properties&#39;</span><span class="p">),</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
</span><span id="L-226"><a href="#L-226"><span class="linenos">226</span></a>            <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;[root]</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">))</span>
</span><span id="L-227"><a href="#L-227"><span class="linenos">227</span></a>
</span><span id="L-228"><a href="#L-228"><span class="linenos">228</span></a>        <span class="c1"># Compatibility with Ontop requiring rr:class</span>
</span><span id="L-229"><a href="#L-229"><span class="linenos">229</span></a>        <span class="c1"># Replace any rdf:type construction with rr:class</span>
</span><span id="L-230"><a href="#L-230"><span class="linenos">230</span></a>        <span class="c1"># Without this, a strange error is raised: &#39;The definition of the</span>
</span><span id="L-231"><a href="#L-231"><span class="linenos">231</span></a>        <span class="c1"># predicate is not always a ground term triple(s,p,o)&#39;</span>
</span><span id="L-232"><a href="#L-232"><span class="linenos">232</span></a>        <span class="n">g</span> <span class="o">=</span> <span class="n">Graph</span><span class="p">()</span>
</span><span id="L-233"><a href="#L-233"><span class="linenos">233</span></a>        <span class="n">g</span><span class="o">.</span><span class="n">bind</span><span class="p">(</span><span class="s1">&#39;r2rml&#39;</span><span class="p">,</span> <span class="n">R2RML</span><span class="p">)</span>
</span><span id="L-234"><a href="#L-234"><span class="linenos">234</span></a>        <span class="n">g</span><span class="o">.</span><span class="n">bind</span><span class="p">(</span><span class="s1">&#39;rdf&#39;</span><span class="p">,</span> <span class="n">RDF</span><span class="p">)</span>
</span><span id="L-235"><a href="#L-235"><span class="linenos">235</span></a>        <span class="n">g</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_data_path</span><span class="p">,</span> <span class="s1">&#39;shared&#39;</span><span class="p">,</span>
</span><span id="L-236"><a href="#L-236"><span class="linenos">236</span></a>                             <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">mapping_file</span><span class="p">)))</span>
</span><span id="L-237"><a href="#L-237"><span class="linenos">237</span></a>
</span><span id="L-238"><a href="#L-238"><span class="linenos">238</span></a>        <span class="k">for</span> <span class="n">triples_map_iri</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">o</span> <span class="ow">in</span> <span class="n">g</span><span class="o">.</span><span class="n">triples</span><span class="p">((</span><span class="kc">None</span><span class="p">,</span> <span class="n">RDF</span><span class="o">.</span><span class="n">type</span><span class="p">,</span>
</span><span id="L-239"><a href="#L-239"><span class="linenos">239</span></a>                                                <span class="n">R2RML</span><span class="o">.</span><span class="n">TriplesMap</span><span class="p">)):</span>
</span><span id="L-240"><a href="#L-240"><span class="linenos">240</span></a>            <span class="n">subject_map_iri</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">value</span><span class="p">(</span><span class="n">triples_map_iri</span><span class="p">,</span> <span class="n">R2RML</span><span class="o">.</span><span class="n">subjectMap</span><span class="p">)</span>
</span><span id="L-241"><a href="#L-241"><span class="linenos">241</span></a>
</span><span id="L-242"><a href="#L-242"><span class="linenos">242</span></a>            <span class="n">iter_pom</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">triples</span><span class="p">((</span><span class="n">triples_map_iri</span><span class="p">,</span>
</span><span id="L-243"><a href="#L-243"><span class="linenos">243</span></a>                                  <span class="n">R2RML</span><span class="o">.</span><span class="n">predicateObjectMap</span><span class="p">,</span>
</span><span id="L-244"><a href="#L-244"><span class="linenos">244</span></a>                                  <span class="kc">None</span><span class="p">))</span>
</span><span id="L-245"><a href="#L-245"><span class="linenos">245</span></a>            <span class="k">for</span> <span class="n">s</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">predicate_object_map_iri</span> <span class="ow">in</span> <span class="n">iter_pom</span><span class="p">:</span>
</span><span id="L-246"><a href="#L-246"><span class="linenos">246</span></a>                <span class="n">predicate_map_iri</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">value</span><span class="p">(</span><span class="n">predicate_object_map_iri</span><span class="p">,</span>
</span><span id="L-247"><a href="#L-247"><span class="linenos">247</span></a>                                            <span class="n">R2RML</span><span class="o">.</span><span class="n">predicateMap</span><span class="p">)</span>
</span><span id="L-248"><a href="#L-248"><span class="linenos">248</span></a>                <span class="n">object_map_iri</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">value</span><span class="p">(</span><span class="n">predicate_object_map_iri</span><span class="p">,</span>
</span><span id="L-249"><a href="#L-249"><span class="linenos">249</span></a>                                         <span class="n">R2RML</span><span class="o">.</span><span class="n">objectMap</span><span class="p">)</span>
</span><span id="L-250"><a href="#L-250"><span class="linenos">250</span></a>
</span><span id="L-251"><a href="#L-251"><span class="linenos">251</span></a>                <span class="k">if</span> <span class="n">predicate_map_iri</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">object_map_iri</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-252"><a href="#L-252"><span class="linenos">252</span></a>                    <span class="k">continue</span>
</span><span id="L-253"><a href="#L-253"><span class="linenos">253</span></a>
</span><span id="L-254"><a href="#L-254"><span class="linenos">254</span></a>                <span class="c1"># Check if PredicateObjectMap is pointing to a PredicateMap</span>
</span><span id="L-255"><a href="#L-255"><span class="linenos">255</span></a>                <span class="c1"># specifying rdf:type. Skip this PredicateObjectMap if not</span>
</span><span id="L-256"><a href="#L-256"><span class="linenos">256</span></a>                <span class="k">if</span> <span class="n">g</span><span class="o">.</span><span class="n">value</span><span class="p">(</span><span class="n">predicate_map_iri</span><span class="p">,</span> <span class="n">R2RML</span><span class="o">.</span><span class="n">constant</span><span class="p">)</span> <span class="o">!=</span> <span class="n">RDF</span><span class="o">.</span><span class="n">type</span><span class="p">:</span>
</span><span id="L-257"><a href="#L-257"><span class="linenos">257</span></a>                    <span class="k">continue</span>
</span><span id="L-258"><a href="#L-258"><span class="linenos">258</span></a>
</span><span id="L-259"><a href="#L-259"><span class="linenos">259</span></a>                <span class="c1"># Retrieve the ObjectMap rr:constant value and add it as</span>
</span><span id="L-260"><a href="#L-260"><span class="linenos">260</span></a>                <span class="c1"># rr:class to the Subject Map is present</span>
</span><span id="L-261"><a href="#L-261"><span class="linenos">261</span></a>                <span class="n">rdf_type_value</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">value</span><span class="p">(</span><span class="n">object_map_iri</span><span class="p">,</span> <span class="n">R2RML</span><span class="o">.</span><span class="n">constant</span><span class="p">)</span>
</span><span id="L-262"><a href="#L-262"><span class="linenos">262</span></a>                <span class="k">if</span> <span class="n">rdf_type_value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-263"><a href="#L-263"><span class="linenos">263</span></a>                    <span class="n">iri</span> <span class="o">=</span> <span class="n">URIRef</span><span class="p">(</span><span class="n">rdf_type_value</span><span class="o">.</span><span class="n">toPython</span><span class="p">())</span>
</span><span id="L-264"><a href="#L-264"><span class="linenos">264</span></a>                    <span class="n">g</span><span class="o">.</span><span class="n">add</span><span class="p">((</span><span class="n">subject_map_iri</span><span class="p">,</span> <span class="n">R2RML</span><span class="p">[</span><span class="s1">&#39;class&#39;</span><span class="p">],</span> <span class="n">iri</span><span class="p">))</span>
</span><span id="L-265"><a href="#L-265"><span class="linenos">265</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="L-266"><a href="#L-266"><span class="linenos">266</span></a>                    <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;Cannot extract rr:class value, rdf:type value &#39;</span> <span class="o">+</span> \
</span><span id="L-267"><a href="#L-267"><span class="linenos">267</span></a>                          <span class="s1">&#39;is not a constant value!&#39;</span>
</span><span id="L-268"><a href="#L-268"><span class="linenos">268</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
</span><span id="L-269"><a href="#L-269"><span class="linenos">269</span></a>                    <span class="k">return</span> <span class="kc">False</span>
</span><span id="L-270"><a href="#L-270"><span class="linenos">270</span></a>
</span><span id="L-271"><a href="#L-271"><span class="linenos">271</span></a>                <span class="c1"># Remove all triples associated with the rdf:type PredicateMap</span>
</span><span id="L-272"><a href="#L-272"><span class="linenos">272</span></a>                <span class="k">for</span> <span class="n">s</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">o</span> <span class="ow">in</span> <span class="n">g</span><span class="o">.</span><span class="n">triples</span><span class="p">((</span><span class="n">predicate_map_iri</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">)):</span>
</span><span id="L-273"><a href="#L-273"><span class="linenos">273</span></a>                    <span class="n">g</span><span class="o">.</span><span class="n">remove</span><span class="p">((</span><span class="n">s</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">o</span><span class="p">))</span>
</span><span id="L-274"><a href="#L-274"><span class="linenos">274</span></a>
</span><span id="L-275"><a href="#L-275"><span class="linenos">275</span></a>                <span class="c1"># Remove all triples associated with the rdf:type ObjectMap</span>
</span><span id="L-276"><a href="#L-276"><span class="linenos">276</span></a>                <span class="k">for</span> <span class="n">s</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">o</span> <span class="ow">in</span> <span class="n">g</span><span class="o">.</span><span class="n">triples</span><span class="p">((</span><span class="n">object_map_iri</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">)):</span>
</span><span id="L-277"><a href="#L-277"><span class="linenos">277</span></a>                    <span class="n">g</span><span class="o">.</span><span class="n">remove</span><span class="p">((</span><span class="n">s</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">o</span><span class="p">))</span>
</span><span id="L-278"><a href="#L-278"><span class="linenos">278</span></a>
</span><span id="L-279"><a href="#L-279"><span class="linenos">279</span></a>                <span class="c1"># Remove all triples associated with the</span>
</span><span id="L-280"><a href="#L-280"><span class="linenos">280</span></a>                <span class="c1"># rdf:type PredicateObjectMap</span>
</span><span id="L-281"><a href="#L-281"><span class="linenos">281</span></a>                <span class="k">for</span> <span class="n">s</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">o</span> <span class="ow">in</span> <span class="n">g</span><span class="o">.</span><span class="n">triples</span><span class="p">((</span><span class="n">object_map_iri</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">)):</span>
</span><span id="L-282"><a href="#L-282"><span class="linenos">282</span></a>                    <span class="n">g</span><span class="o">.</span><span class="n">remove</span><span class="p">((</span><span class="n">s</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">o</span><span class="p">))</span>
</span><span id="L-283"><a href="#L-283"><span class="linenos">283</span></a>
</span><span id="L-284"><a href="#L-284"><span class="linenos">284</span></a>                <span class="c1"># Remove PredicateObjectMap from Triples Map</span>
</span><span id="L-285"><a href="#L-285"><span class="linenos">285</span></a>                <span class="n">g</span><span class="o">.</span><span class="n">remove</span><span class="p">((</span><span class="n">triples_map_iri</span><span class="p">,</span> <span class="n">R2RML</span><span class="o">.</span><span class="n">predicateObjectMap</span><span class="p">,</span>
</span><span id="L-286"><a href="#L-286"><span class="linenos">286</span></a>                          <span class="n">predicate_object_map_iri</span><span class="p">))</span>
</span><span id="L-287"><a href="#L-287"><span class="linenos">287</span></a>
</span><span id="L-288"><a href="#L-288"><span class="linenos">288</span></a>            <span class="n">destination</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_data_path</span><span class="p">,</span>
</span><span id="L-289"><a href="#L-289"><span class="linenos">289</span></a>                                       <span class="bp">self</span><span class="o">.</span><span class="n">root_mount_directory</span><span class="p">,</span>
</span><span id="L-290"><a href="#L-290"><span class="linenos">290</span></a>                                       <span class="s1">&#39;mapping_converted.r2rml.ttl&#39;</span><span class="p">)</span>
</span><span id="L-291"><a href="#L-291"><span class="linenos">291</span></a>            <span class="n">g</span><span class="o">.</span><span class="n">serialize</span><span class="p">(</span><span class="n">destination</span><span class="o">=</span><span class="n">destination</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="s1">&#39;turtle&#39;</span><span class="p">)</span>
</span><span id="L-292"><a href="#L-292"><span class="linenos">292</span></a>
</span><span id="L-293"><a href="#L-293"><span class="linenos">293</span></a>        <span class="n">arguments</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;-m&#39;</span><span class="p">)</span>
</span><span id="L-294"><a href="#L-294"><span class="linenos">294</span></a>        <span class="n">arguments</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;/data/mapping_converted.r2rml.ttl&#39;</span><span class="p">)</span>
</span><span id="L-295"><a href="#L-295"><span class="linenos">295</span></a>        <span class="k">if</span> <span class="n">output_file</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-296"><a href="#L-296"><span class="linenos">296</span></a>            <span class="n">arguments</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;-o&#39;</span><span class="p">)</span>
</span><span id="L-297"><a href="#L-297"><span class="linenos">297</span></a>            <span class="n">arguments</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s1">&#39;/data/shared/&#39;</span><span class="p">,</span> <span class="n">output_file</span><span class="p">))</span>
</span><span id="L-298"><a href="#L-298"><span class="linenos">298</span></a>        <span class="n">arguments</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;-p&#39;</span><span class="p">)</span>
</span><span id="L-299"><a href="#L-299"><span class="linenos">299</span></a>        <span class="n">arguments</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;/data/config.properties&#39;</span><span class="p">)</span>
</span><span id="L-300"><a href="#L-300"><span class="linenos">300</span></a>
</span><span id="L-301"><a href="#L-301"><span class="linenos">301</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_execute</span><span class="p">(</span><span class="n">arguments</span><span class="p">)</span>
</span><span id="L-302"><a href="#L-302"><span class="linenos">302</span></a>
</span><span id="L-303"><a href="#L-303"><span class="linenos">303</span></a>
</span><span id="L-304"><a href="#L-304"><span class="linenos">304</span></a><span class="k">class</span> <span class="nc">OntopVirtualize</span><span class="p">(</span><span class="n">Ontop</span><span class="p">):</span>
</span><span id="L-305"><a href="#L-305"><span class="linenos">305</span></a>    <span class="sd">&quot;&quot;&quot;OntopVirtualize container for setting up an Ontop SPARQL endpoint.&quot;&quot;&quot;</span>
</span><span id="L-306"><a href="#L-306"><span class="linenos">306</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data_path</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">config_path</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">directory</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="L-307"><a href="#L-307"><span class="linenos">307</span></a>                 <span class="n">verbose</span><span class="p">:</span> <span class="nb">bool</span><span class="p">):</span>
</span><span id="L-308"><a href="#L-308"><span class="linenos">308</span></a>        <span class="sd">&quot;&quot;&quot;Creates an instance of the OntopVirtualize class.</span>
</span><span id="L-309"><a href="#L-309"><span class="linenos">309</span></a>
</span><span id="L-310"><a href="#L-310"><span class="linenos">310</span></a><span class="sd">        Parameters</span>
</span><span id="L-311"><a href="#L-311"><span class="linenos">311</span></a><span class="sd">        ----------</span>
</span><span id="L-312"><a href="#L-312"><span class="linenos">312</span></a><span class="sd">        data_path : str</span>
</span><span id="L-313"><a href="#L-313"><span class="linenos">313</span></a><span class="sd">            Path to the data directory of the case.</span>
</span><span id="L-314"><a href="#L-314"><span class="linenos">314</span></a><span class="sd">        config_path : str</span>
</span><span id="L-315"><a href="#L-315"><span class="linenos">315</span></a><span class="sd">            Path to the config directory of the case.</span>
</span><span id="L-316"><a href="#L-316"><span class="linenos">316</span></a><span class="sd">        directory : str</span>
</span><span id="L-317"><a href="#L-317"><span class="linenos">317</span></a><span class="sd">            Path to the directory to store logs.</span>
</span><span id="L-318"><a href="#L-318"><span class="linenos">318</span></a><span class="sd">        verbose : bool</span>
</span><span id="L-319"><a href="#L-319"><span class="linenos">319</span></a><span class="sd">            Enable verbose logs.</span>
</span><span id="L-320"><a href="#L-320"><span class="linenos">320</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-321"><a href="#L-321"><span class="linenos">321</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_data_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">data_path</span><span class="p">)</span>
</span><span id="L-322"><a href="#L-322"><span class="linenos">322</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_config_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">config_path</span><span class="p">)</span>
</span><span id="L-323"><a href="#L-323"><span class="linenos">323</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span> <span class="o">=</span> <span class="n">Logger</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="n">directory</span><span class="p">,</span> <span class="n">verbose</span><span class="p">)</span>
</span><span id="L-324"><a href="#L-324"><span class="linenos">324</span></a>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="s1">&#39;Ontop-Virtualize&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_data_path</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="p">,</span>
</span><span id="L-325"><a href="#L-325"><span class="linenos">325</span></a>                         <span class="s1">&#39;endpoint&#39;</span><span class="p">)</span>
</span><span id="L-326"><a href="#L-326"><span class="linenos">326</span></a>
</span><span id="L-327"><a href="#L-327"><span class="linenos">327</span></a>    <span class="k">def</span> <span class="nf">execute_mapping</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
</span><span id="L-328"><a href="#L-328"><span class="linenos">328</span></a>                        <span class="n">mapping_file</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="L-329"><a href="#L-329"><span class="linenos">329</span></a>                        <span class="n">serialization</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="L-330"><a href="#L-330"><span class="linenos">330</span></a>                        <span class="n">rdb_username</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="L-331"><a href="#L-331"><span class="linenos">331</span></a>                        <span class="n">rdb_password</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="L-332"><a href="#L-332"><span class="linenos">332</span></a>                        <span class="n">rdb_host</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="L-333"><a href="#L-333"><span class="linenos">333</span></a>                        <span class="n">rdb_port</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
</span><span id="L-334"><a href="#L-334"><span class="linenos">334</span></a>                        <span class="n">rdb_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="L-335"><a href="#L-335"><span class="linenos">335</span></a>                        <span class="n">rdb_type</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="L-336"><a href="#L-336"><span class="linenos">336</span></a>        <span class="sd">&quot;&quot;&quot;Start an Ontop SPARQL endpoint with a mapping.</span>
</span><span id="L-337"><a href="#L-337"><span class="linenos">337</span></a>
</span><span id="L-338"><a href="#L-338"><span class="linenos">338</span></a><span class="sd">        Only relational databases are supported by</span>
</span><span id="L-339"><a href="#L-339"><span class="linenos">339</span></a><span class="sd">        Ontop, thus the relational database parameters are mandantory.</span>
</span><span id="L-340"><a href="#L-340"><span class="linenos">340</span></a><span class="sd">        Ontop SPARQL endpoint supports the following serialization formats:</span>
</span><span id="L-341"><a href="#L-341"><span class="linenos">341</span></a><span class="sd">        - N-Triples (Ontop v5+)</span>
</span><span id="L-342"><a href="#L-342"><span class="linenos">342</span></a><span class="sd">        - N-Quads (Ontop v5+)</span>
</span><span id="L-343"><a href="#L-343"><span class="linenos">343</span></a><span class="sd">        - Turtle</span>
</span><span id="L-344"><a href="#L-344"><span class="linenos">344</span></a><span class="sd">        - RDF/JSON</span>
</span><span id="L-345"><a href="#L-345"><span class="linenos">345</span></a><span class="sd">        - JSON-LD</span>
</span><span id="L-346"><a href="#L-346"><span class="linenos">346</span></a><span class="sd">        - CSV</span>
</span><span id="L-347"><a href="#L-347"><span class="linenos">347</span></a>
</span><span id="L-348"><a href="#L-348"><span class="linenos">348</span></a><span class="sd">        Parameters</span>
</span><span id="L-349"><a href="#L-349"><span class="linenos">349</span></a><span class="sd">        ----------</span>
</span><span id="L-350"><a href="#L-350"><span class="linenos">350</span></a><span class="sd">        mapping_file : str</span>
</span><span id="L-351"><a href="#L-351"><span class="linenos">351</span></a><span class="sd">            Path to the mapping file to execute.</span>
</span><span id="L-352"><a href="#L-352"><span class="linenos">352</span></a><span class="sd">        serialization : str</span>
</span><span id="L-353"><a href="#L-353"><span class="linenos">353</span></a><span class="sd">            Serialization format to use.</span>
</span><span id="L-354"><a href="#L-354"><span class="linenos">354</span></a><span class="sd">        rdb_username : str</span>
</span><span id="L-355"><a href="#L-355"><span class="linenos">355</span></a><span class="sd">            Username for the database.</span>
</span><span id="L-356"><a href="#L-356"><span class="linenos">356</span></a><span class="sd">        rdb_password : str</span>
</span><span id="L-357"><a href="#L-357"><span class="linenos">357</span></a><span class="sd">            Password for the database.</span>
</span><span id="L-358"><a href="#L-358"><span class="linenos">358</span></a><span class="sd">        rdb_host : str</span>
</span><span id="L-359"><a href="#L-359"><span class="linenos">359</span></a><span class="sd">            Hostname for the database.</span>
</span><span id="L-360"><a href="#L-360"><span class="linenos">360</span></a><span class="sd">        rdb_port : int</span>
</span><span id="L-361"><a href="#L-361"><span class="linenos">361</span></a><span class="sd">            Port for the database.</span>
</span><span id="L-362"><a href="#L-362"><span class="linenos">362</span></a><span class="sd">        rdb_name : str</span>
</span><span id="L-363"><a href="#L-363"><span class="linenos">363</span></a><span class="sd">            Database name for the database.</span>
</span><span id="L-364"><a href="#L-364"><span class="linenos">364</span></a><span class="sd">        rdb_type : str</span>
</span><span id="L-365"><a href="#L-365"><span class="linenos">365</span></a><span class="sd">            Database type.</span>
</span><span id="L-366"><a href="#L-366"><span class="linenos">366</span></a>
</span><span id="L-367"><a href="#L-367"><span class="linenos">367</span></a><span class="sd">        Returns</span>
</span><span id="L-368"><a href="#L-368"><span class="linenos">368</span></a><span class="sd">        -------</span>
</span><span id="L-369"><a href="#L-369"><span class="linenos">369</span></a><span class="sd">        success : bool</span>
</span><span id="L-370"><a href="#L-370"><span class="linenos">370</span></a><span class="sd">            Whether the execution was successfull or not.</span>
</span><span id="L-371"><a href="#L-371"><span class="linenos">371</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-372"><a href="#L-372"><span class="linenos">372</span></a>        <span class="n">config_file</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_data_path</span><span class="si">}</span><span class="s1">/</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">root_mount_directory</span><span class="si">}</span><span class="s1">&#39;</span> <span class="o">+</span> \
</span><span id="L-373"><a href="#L-373"><span class="linenos">373</span></a>                      <span class="s1">&#39;/config.properties&#39;</span>
</span><span id="L-374"><a href="#L-374"><span class="linenos">374</span></a>        <span class="n">arguments</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;--cors-allowed-origins=*&#39;</span><span class="p">,</span> <span class="s1">&#39;--port=8888&#39;</span><span class="p">]</span>
</span><span id="L-375"><a href="#L-375"><span class="linenos">375</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_headers</span><span class="p">[</span><span class="s1">&#39;ntriples&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;Accept&#39;</span><span class="p">:</span> <span class="s1">&#39;application/n-triples&#39;</span><span class="p">}</span>
</span><span id="L-376"><a href="#L-376"><span class="linenos">376</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_headers</span><span class="p">[</span><span class="s1">&#39;nquads&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;Accept&#39;</span><span class="p">:</span> <span class="s1">&#39;application/n-quads&#39;</span><span class="p">}</span>
</span><span id="L-377"><a href="#L-377"><span class="linenos">377</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_headers</span><span class="p">[</span><span class="s1">&#39;turtle&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;Accept&#39;</span><span class="p">:</span> <span class="s1">&#39;text/turtle&#39;</span><span class="p">}</span>
</span><span id="L-378"><a href="#L-378"><span class="linenos">378</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_headers</span><span class="p">[</span><span class="s1">&#39;rdfjson&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;Accept&#39;</span><span class="p">:</span> <span class="s1">&#39;application/rdf+json&#39;</span><span class="p">}</span>
</span><span id="L-379"><a href="#L-379"><span class="linenos">379</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_headers</span><span class="p">[</span><span class="s1">&#39;rdfxml&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;Accept&#39;</span><span class="p">:</span> <span class="s1">&#39;application/rdf+xml&#39;</span><span class="p">}</span>
</span><span id="L-380"><a href="#L-380"><span class="linenos">380</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_headers</span><span class="p">[</span><span class="s1">&#39;jsonld&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;Accept&#39;</span><span class="p">:</span> <span class="s1">&#39;application/ld+json&#39;</span><span class="p">}</span>
</span><span id="L-381"><a href="#L-381"><span class="linenos">381</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_headers</span><span class="p">[</span><span class="s1">&#39;csv&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;Accept&#39;</span><span class="p">:</span> <span class="s1">&#39;text/csv&#39;</span><span class="p">}</span>
</span><span id="L-382"><a href="#L-382"><span class="linenos">382</span></a>        <span class="k">if</span> <span class="n">serialization</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_headers</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
</span><span id="L-383"><a href="#L-383"><span class="linenos">383</span></a>            <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;Unsupported serialization format &#39;</span> <span class="o">+</span> \
</span><span id="L-384"><a href="#L-384"><span class="linenos">384</span></a>                  <span class="sa">f</span><span class="s1">&#39;&quot;</span><span class="si">{</span><span class="n">serialization</span><span class="si">}</span><span class="s1">&quot; for Ontop&#39;</span>
</span><span id="L-385"><a href="#L-385"><span class="linenos">385</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
</span><span id="L-386"><a href="#L-386"><span class="linenos">386</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
</span><span id="L-387"><a href="#L-387"><span class="linenos">387</span></a>        <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">_execute_mapping</span><span class="p">(</span><span class="n">config_file</span><span class="p">,</span> <span class="n">arguments</span><span class="p">,</span>
</span><span id="L-388"><a href="#L-388"><span class="linenos">388</span></a>                                        <span class="n">mapping_file</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="n">rdb_username</span><span class="p">,</span>
</span><span id="L-389"><a href="#L-389"><span class="linenos">389</span></a>                                        <span class="n">rdb_password</span><span class="p">,</span> <span class="n">rdb_host</span><span class="p">,</span> <span class="n">rdb_port</span><span class="p">,</span>
</span><span id="L-390"><a href="#L-390"><span class="linenos">390</span></a>                                        <span class="n">rdb_name</span><span class="p">,</span> <span class="n">rdb_type</span><span class="p">)</span>
</span><span id="L-391"><a href="#L-391"><span class="linenos">391</span></a>
</span><span id="L-392"><a href="#L-392"><span class="linenos">392</span></a>
</span><span id="L-393"><a href="#L-393"><span class="linenos">393</span></a><span class="k">class</span> <span class="nc">OntopMaterialize</span><span class="p">(</span><span class="n">Ontop</span><span class="p">):</span>
</span><span id="L-394"><a href="#L-394"><span class="linenos">394</span></a>    <span class="sd">&quot;&quot;&quot;OntopMaterialize container to execute a R2RML mapping.&quot;&quot;&quot;</span>
</span><span id="L-395"><a href="#L-395"><span class="linenos">395</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data_path</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">config_path</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">directory</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="L-396"><a href="#L-396"><span class="linenos">396</span></a>                 <span class="n">verbose</span><span class="p">:</span> <span class="nb">bool</span><span class="p">):</span>
</span><span id="L-397"><a href="#L-397"><span class="linenos">397</span></a>        <span class="sd">&quot;&quot;&quot;Creates an instance of the OntopMaterialize class.</span>
</span><span id="L-398"><a href="#L-398"><span class="linenos">398</span></a>
</span><span id="L-399"><a href="#L-399"><span class="linenos">399</span></a><span class="sd">        Parameters</span>
</span><span id="L-400"><a href="#L-400"><span class="linenos">400</span></a><span class="sd">        ----------</span>
</span><span id="L-401"><a href="#L-401"><span class="linenos">401</span></a><span class="sd">        data_path : str</span>
</span><span id="L-402"><a href="#L-402"><span class="linenos">402</span></a><span class="sd">            Path to the data directory of the case.</span>
</span><span id="L-403"><a href="#L-403"><span class="linenos">403</span></a><span class="sd">        config_path : str</span>
</span><span id="L-404"><a href="#L-404"><span class="linenos">404</span></a><span class="sd">            Path to the config directory of the case.</span>
</span><span id="L-405"><a href="#L-405"><span class="linenos">405</span></a><span class="sd">        directory : str</span>
</span><span id="L-406"><a href="#L-406"><span class="linenos">406</span></a><span class="sd">            Path to the directory to store logs.</span>
</span><span id="L-407"><a href="#L-407"><span class="linenos">407</span></a><span class="sd">        verbose : bool</span>
</span><span id="L-408"><a href="#L-408"><span class="linenos">408</span></a><span class="sd">            Enable verbose logs.</span>
</span><span id="L-409"><a href="#L-409"><span class="linenos">409</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-410"><a href="#L-410"><span class="linenos">410</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_data_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">data_path</span><span class="p">)</span>
</span><span id="L-411"><a href="#L-411"><span class="linenos">411</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_config_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">config_path</span><span class="p">)</span>
</span><span id="L-412"><a href="#L-412"><span class="linenos">412</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span> <span class="o">=</span> <span class="n">Logger</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="n">directory</span><span class="p">,</span> <span class="n">verbose</span><span class="p">)</span>
</span><span id="L-413"><a href="#L-413"><span class="linenos">413</span></a>        <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_data_path</span><span class="p">,</span> <span class="s1">&#39;ontopmaterialize&#39;</span><span class="p">),</span>
</span><span id="L-414"><a href="#L-414"><span class="linenos">414</span></a>                    <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="L-415"><a href="#L-415"><span class="linenos">415</span></a>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="s1">&#39;Ontop-Materialize&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_data_path</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="p">,</span>
</span><span id="L-416"><a href="#L-416"><span class="linenos">416</span></a>                         <span class="s1">&#39;materialize&#39;</span><span class="p">)</span>
</span><span id="L-417"><a href="#L-417"><span class="linenos">417</span></a>
</span><span id="L-418"><a href="#L-418"><span class="linenos">418</span></a>    <span class="nd">@timeout</span><span class="p">(</span><span class="n">TIMEOUT</span><span class="p">)</span>
</span><span id="L-419"><a href="#L-419"><span class="linenos">419</span></a>    <span class="k">def</span> <span class="nf">_execute_mapping_with_timeout</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mapping_file</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="L-420"><a href="#L-420"><span class="linenos">420</span></a>                                      <span class="n">output_file</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="L-421"><a href="#L-421"><span class="linenos">421</span></a>                                      <span class="n">serialization</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="L-422"><a href="#L-422"><span class="linenos">422</span></a>                                      <span class="n">rdb_username</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="L-423"><a href="#L-423"><span class="linenos">423</span></a>                                      <span class="n">rdb_password</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="L-424"><a href="#L-424"><span class="linenos">424</span></a>                                      <span class="n">rdb_host</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="L-425"><a href="#L-425"><span class="linenos">425</span></a>                                      <span class="n">rdb_port</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
</span><span id="L-426"><a href="#L-426"><span class="linenos">426</span></a>                                      <span class="n">rdb_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="L-427"><a href="#L-427"><span class="linenos">427</span></a>                                      <span class="n">rdb_type</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="L-428"><a href="#L-428"><span class="linenos">428</span></a>        <span class="sd">&quot;&quot;&quot;Execute a mapping with a provided timeout.</span>
</span><span id="L-429"><a href="#L-429"><span class="linenos">429</span></a>
</span><span id="L-430"><a href="#L-430"><span class="linenos">430</span></a><span class="sd">        Returns</span>
</span><span id="L-431"><a href="#L-431"><span class="linenos">431</span></a><span class="sd">        -------</span>
</span><span id="L-432"><a href="#L-432"><span class="linenos">432</span></a><span class="sd">        success : bool</span>
</span><span id="L-433"><a href="#L-433"><span class="linenos">433</span></a><span class="sd">            Whether the execution was successfull or not.</span>
</span><span id="L-434"><a href="#L-434"><span class="linenos">434</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-435"><a href="#L-435"><span class="linenos">435</span></a>        <span class="n">config_file</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_data_path</span><span class="si">}</span><span class="s1">/</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">root_mount_directory</span><span class="si">}</span><span class="s1">&#39;</span> <span class="o">+</span> \
</span><span id="L-436"><a href="#L-436"><span class="linenos">436</span></a>                      <span class="s1">&#39;/config.properties&#39;</span>
</span><span id="L-437"><a href="#L-437"><span class="linenos">437</span></a>        <span class="n">arguments</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;-f&#39;</span><span class="p">,</span> <span class="n">serialization</span><span class="p">]</span>
</span><span id="L-438"><a href="#L-438"><span class="linenos">438</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_headers</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="L-439"><a href="#L-439"><span class="linenos">439</span></a>        <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">_execute_mapping</span><span class="p">(</span><span class="n">config_file</span><span class="p">,</span> <span class="n">arguments</span><span class="p">,</span>
</span><span id="L-440"><a href="#L-440"><span class="linenos">440</span></a>                                        <span class="n">mapping_file</span><span class="p">,</span> <span class="n">output_file</span><span class="p">,</span>
</span><span id="L-441"><a href="#L-441"><span class="linenos">441</span></a>                                        <span class="n">rdb_username</span><span class="p">,</span> <span class="n">rdb_password</span><span class="p">,</span>
</span><span id="L-442"><a href="#L-442"><span class="linenos">442</span></a>                                        <span class="n">rdb_host</span><span class="p">,</span> <span class="n">rdb_port</span><span class="p">,</span> <span class="n">rdb_name</span><span class="p">,</span> <span class="n">rdb_type</span><span class="p">)</span>
</span><span id="L-443"><a href="#L-443"><span class="linenos">443</span></a>
</span><span id="L-444"><a href="#L-444"><span class="linenos">444</span></a>    <span class="k">def</span> <span class="nf">execute_mapping</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
</span><span id="L-445"><a href="#L-445"><span class="linenos">445</span></a>                        <span class="n">mapping_file</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="L-446"><a href="#L-446"><span class="linenos">446</span></a>                        <span class="n">output_file</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="L-447"><a href="#L-447"><span class="linenos">447</span></a>                        <span class="n">serialization</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="L-448"><a href="#L-448"><span class="linenos">448</span></a>                        <span class="n">rdb_username</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="L-449"><a href="#L-449"><span class="linenos">449</span></a>                        <span class="n">rdb_password</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="L-450"><a href="#L-450"><span class="linenos">450</span></a>                        <span class="n">rdb_host</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="L-451"><a href="#L-451"><span class="linenos">451</span></a>                        <span class="n">rdb_port</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
</span><span id="L-452"><a href="#L-452"><span class="linenos">452</span></a>                        <span class="n">rdb_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="L-453"><a href="#L-453"><span class="linenos">453</span></a>                        <span class="n">rdb_type</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="L-454"><a href="#L-454"><span class="linenos">454</span></a>        <span class="sd">&quot;&quot;&quot;Execute a R2RML mapping with Ontop</span>
</span><span id="L-455"><a href="#L-455"><span class="linenos">455</span></a>
</span><span id="L-456"><a href="#L-456"><span class="linenos">456</span></a><span class="sd">        N-Quads and N-Triples are currently supported as serialization</span>
</span><span id="L-457"><a href="#L-457"><span class="linenos">457</span></a><span class="sd">        for Ontop materialize. Only relational databases are supported by</span>
</span><span id="L-458"><a href="#L-458"><span class="linenos">458</span></a><span class="sd">        Ontop, thus the relational database parameters are mandantory.</span>
</span><span id="L-459"><a href="#L-459"><span class="linenos">459</span></a>
</span><span id="L-460"><a href="#L-460"><span class="linenos">460</span></a><span class="sd">        Parameters</span>
</span><span id="L-461"><a href="#L-461"><span class="linenos">461</span></a><span class="sd">        ----------</span>
</span><span id="L-462"><a href="#L-462"><span class="linenos">462</span></a><span class="sd">        mapping_file : str</span>
</span><span id="L-463"><a href="#L-463"><span class="linenos">463</span></a><span class="sd">            Path to the mapping file to execute.</span>
</span><span id="L-464"><a href="#L-464"><span class="linenos">464</span></a><span class="sd">        output_file : str</span>
</span><span id="L-465"><a href="#L-465"><span class="linenos">465</span></a><span class="sd">            Name of the output file to store the triples in. This is not used</span>
</span><span id="L-466"><a href="#L-466"><span class="linenos">466</span></a><span class="sd">            for OntopVirtualize.</span>
</span><span id="L-467"><a href="#L-467"><span class="linenos">467</span></a><span class="sd">        serialization : str</span>
</span><span id="L-468"><a href="#L-468"><span class="linenos">468</span></a><span class="sd">            Serialization format to use.</span>
</span><span id="L-469"><a href="#L-469"><span class="linenos">469</span></a><span class="sd">        rdb_username : str</span>
</span><span id="L-470"><a href="#L-470"><span class="linenos">470</span></a><span class="sd">            Username for the database.</span>
</span><span id="L-471"><a href="#L-471"><span class="linenos">471</span></a><span class="sd">        rdb_password : str</span>
</span><span id="L-472"><a href="#L-472"><span class="linenos">472</span></a><span class="sd">            Password for the database.</span>
</span><span id="L-473"><a href="#L-473"><span class="linenos">473</span></a><span class="sd">        rdb_host : str</span>
</span><span id="L-474"><a href="#L-474"><span class="linenos">474</span></a><span class="sd">            Hostname for the database.</span>
</span><span id="L-475"><a href="#L-475"><span class="linenos">475</span></a><span class="sd">        rdb_port : int</span>
</span><span id="L-476"><a href="#L-476"><span class="linenos">476</span></a><span class="sd">            Port for the database.</span>
</span><span id="L-477"><a href="#L-477"><span class="linenos">477</span></a><span class="sd">        rdb_name : str</span>
</span><span id="L-478"><a href="#L-478"><span class="linenos">478</span></a><span class="sd">            Database name for the database.</span>
</span><span id="L-479"><a href="#L-479"><span class="linenos">479</span></a><span class="sd">        rdb_type : str</span>
</span><span id="L-480"><a href="#L-480"><span class="linenos">480</span></a><span class="sd">            Database type.</span>
</span><span id="L-481"><a href="#L-481"><span class="linenos">481</span></a>
</span><span id="L-482"><a href="#L-482"><span class="linenos">482</span></a><span class="sd">        Returns</span>
</span><span id="L-483"><a href="#L-483"><span class="linenos">483</span></a><span class="sd">        -------</span>
</span><span id="L-484"><a href="#L-484"><span class="linenos">484</span></a><span class="sd">        success : bool</span>
</span><span id="L-485"><a href="#L-485"><span class="linenos">485</span></a><span class="sd">            Whether the execution was successfull or not.</span>
</span><span id="L-486"><a href="#L-486"><span class="linenos">486</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-487"><a href="#L-487"><span class="linenos">487</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="L-488"><a href="#L-488"><span class="linenos">488</span></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_execute_mapping_with_timeout</span><span class="p">(</span><span class="n">mapping_file</span><span class="p">,</span>
</span><span id="L-489"><a href="#L-489"><span class="linenos">489</span></a>                                                      <span class="n">output_file</span><span class="p">,</span>
</span><span id="L-490"><a href="#L-490"><span class="linenos">490</span></a>                                                      <span class="n">serialization</span><span class="p">,</span>
</span><span id="L-491"><a href="#L-491"><span class="linenos">491</span></a>                                                      <span class="n">rdb_username</span><span class="p">,</span>
</span><span id="L-492"><a href="#L-492"><span class="linenos">492</span></a>                                                      <span class="n">rdb_password</span><span class="p">,</span>
</span><span id="L-493"><a href="#L-493"><span class="linenos">493</span></a>                                                      <span class="n">rdb_host</span><span class="p">,</span>
</span><span id="L-494"><a href="#L-494"><span class="linenos">494</span></a>                                                      <span class="n">rdb_port</span><span class="p">,</span>
</span><span id="L-495"><a href="#L-495"><span class="linenos">495</span></a>                                                      <span class="n">rdb_name</span><span class="p">,</span>
</span><span id="L-496"><a href="#L-496"><span class="linenos">496</span></a>                                                      <span class="n">rdb_type</span><span class="p">)</span>
</span><span id="L-497"><a href="#L-497"><span class="linenos">497</span></a>        <span class="k">except</span> <span class="ne">TimeoutError</span><span class="p">:</span>
</span><span id="L-498"><a href="#L-498"><span class="linenos">498</span></a>            <span class="n">msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;Timeout (</span><span class="si">{</span><span class="n">TIMEOUT</span><span class="si">}</span><span class="s1">s) reached for Ontop Materialize&#39;</span>
</span><span id="L-499"><a href="#L-499"><span class="linenos">499</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
</span><span id="L-500"><a href="#L-500"><span class="linenos">500</span></a>
</span><span id="L-501"><a href="#L-501"><span class="linenos">501</span></a>        <span class="k">return</span> <span class="kc">False</span>
</span></pre></div>


            </section>
                <section id="Ontop">
                            <input id="Ontop-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">Ontop</span><wbr>(<span class="base"><a href="container.html#Container">bench_executor.container.Container</a></span>):

                <label class="view-source-button" for="Ontop-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Ontop"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Ontop-28"><a href="#Ontop-28"><span class="linenos"> 28</span></a><span class="k">class</span> <span class="nc">Ontop</span><span class="p">(</span><span class="n">Container</span><span class="p">):</span>
</span><span id="Ontop-29"><a href="#Ontop-29"><span class="linenos"> 29</span></a>    <span class="sd">&quot;&quot;&quot;Ontop container super class for OntopMaterialize and OntopVirtualize.&quot;&quot;&quot;</span>
</span><span id="Ontop-30"><a href="#Ontop-30"><span class="linenos"> 30</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">data_path</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">logger</span><span class="p">:</span> <span class="n">Logger</span><span class="p">,</span> <span class="n">mode</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
</span><span id="Ontop-31"><a href="#Ontop-31"><span class="linenos"> 31</span></a>        <span class="sd">&quot;&quot;&quot;Creates an instance of the Ontop class.</span>
</span><span id="Ontop-32"><a href="#Ontop-32"><span class="linenos"> 32</span></a>
</span><span id="Ontop-33"><a href="#Ontop-33"><span class="linenos"> 33</span></a><span class="sd">        Parameters</span>
</span><span id="Ontop-34"><a href="#Ontop-34"><span class="linenos"> 34</span></a><span class="sd">        ----------</span>
</span><span id="Ontop-35"><a href="#Ontop-35"><span class="linenos"> 35</span></a><span class="sd">        name : str</span>
</span><span id="Ontop-36"><a href="#Ontop-36"><span class="linenos"> 36</span></a><span class="sd">            Pretty name of the container.</span>
</span><span id="Ontop-37"><a href="#Ontop-37"><span class="linenos"> 37</span></a><span class="sd">        data_path: str</span>
</span><span id="Ontop-38"><a href="#Ontop-38"><span class="linenos"> 38</span></a><span class="sd">            Path to the data directory of the case.</span>
</span><span id="Ontop-39"><a href="#Ontop-39"><span class="linenos"> 39</span></a><span class="sd">        logger : Logger</span>
</span><span id="Ontop-40"><a href="#Ontop-40"><span class="linenos"> 40</span></a><span class="sd">            Logger to use for log messages.</span>
</span><span id="Ontop-41"><a href="#Ontop-41"><span class="linenos"> 41</span></a><span class="sd">        mode : str</span>
</span><span id="Ontop-42"><a href="#Ontop-42"><span class="linenos"> 42</span></a><span class="sd">            Ontop mode: `materialize` or `endpoint`</span>
</span><span id="Ontop-43"><a href="#Ontop-43"><span class="linenos"> 43</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Ontop-44"><a href="#Ontop-44"><span class="linenos"> 44</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_mode</span> <span class="o">=</span> <span class="n">mode</span>
</span><span id="Ontop-45"><a href="#Ontop-45"><span class="linenos"> 45</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_headers</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="Ontop-46"><a href="#Ontop-46"><span class="linenos"> 46</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span> <span class="o">=</span> <span class="n">logger</span>
</span><span id="Ontop-47"><a href="#Ontop-47"><span class="linenos"> 47</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_data_path</span> <span class="o">=</span> <span class="n">data_path</span>
</span><span id="Ontop-48"><a href="#Ontop-48"><span class="linenos"> 48</span></a>
</span><span id="Ontop-49"><a href="#Ontop-49"><span class="linenos"> 49</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_mode</span> <span class="o">==</span> <span class="s1">&#39;endpoint&#39;</span><span class="p">:</span>
</span><span id="Ontop-50"><a href="#Ontop-50"><span class="linenos"> 50</span></a>            <span class="n">subdir</span> <span class="o">=</span> <span class="s1">&#39;ontopvirtualize&#39;</span>
</span><span id="Ontop-51"><a href="#Ontop-51"><span class="linenos"> 51</span></a>        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">_mode</span> <span class="o">==</span> <span class="s1">&#39;materialize&#39;</span><span class="p">:</span>
</span><span id="Ontop-52"><a href="#Ontop-52"><span class="linenos"> 52</span></a>            <span class="n">subdir</span> <span class="o">=</span> <span class="s1">&#39;ontopmaterialize&#39;</span>
</span><span id="Ontop-53"><a href="#Ontop-53"><span class="linenos"> 53</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="Ontop-54"><a href="#Ontop-54"><span class="linenos"> 54</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Unknown Ontop mode: &quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_mode</span><span class="si">}</span><span class="s1">&quot;&#39;</span><span class="p">)</span>
</span><span id="Ontop-55"><a href="#Ontop-55"><span class="linenos"> 55</span></a>        <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_data_path</span><span class="p">,</span> <span class="n">subdir</span><span class="p">),</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="Ontop-56"><a href="#Ontop-56"><span class="linenos"> 56</span></a>
</span><span id="Ontop-57"><a href="#Ontop-57"><span class="linenos"> 57</span></a>        <span class="c1"># Set Java heap to 1/2 of available memory instead of the default 1/4</span>
</span><span id="Ontop-58"><a href="#Ontop-58"><span class="linenos"> 58</span></a>        <span class="n">max_heap</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">psutil</span><span class="o">.</span><span class="n">virtual_memory</span><span class="p">()</span><span class="o">.</span><span class="n">total</span> <span class="o">*</span> <span class="p">(</span><span class="mi">1</span><span class="o">/</span><span class="mi">2</span><span class="p">))</span>
</span><span id="Ontop-59"><a href="#Ontop-59"><span class="linenos"> 59</span></a>
</span><span id="Ontop-60"><a href="#Ontop-60"><span class="linenos"> 60</span></a>        <span class="c1"># Configure logging</span>
</span><span id="Ontop-61"><a href="#Ontop-61"><span class="linenos"> 61</span></a>        <span class="n">log_level</span> <span class="o">=</span> <span class="s1">&#39;info&#39;</span>
</span><span id="Ontop-62"><a href="#Ontop-62"><span class="linenos"> 62</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span>
</span><span id="Ontop-63"><a href="#Ontop-63"><span class="linenos"> 63</span></a>            <span class="n">log_level</span> <span class="o">=</span> <span class="s1">&#39;debug&#39;</span>
</span><span id="Ontop-64"><a href="#Ontop-64"><span class="linenos"> 64</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Initialized Ontop logger at &quot;</span><span class="si">{</span><span class="n">log_level</span><span class="si">}</span><span class="s1">&quot; level&#39;</span><span class="p">)</span>
</span><span id="Ontop-65"><a href="#Ontop-65"><span class="linenos"> 65</span></a>
</span><span id="Ontop-66"><a href="#Ontop-66"><span class="linenos"> 66</span></a>        <span class="n">environment</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;ONTOP_JAVA_ARGS&#39;</span><span class="p">:</span> <span class="sa">f</span><span class="s1">&#39;-Xmx</span><span class="si">{</span><span class="n">max_heap</span><span class="si">}</span><span class="s1"> -Xms</span><span class="si">{</span><span class="n">max_heap</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">,</span>
</span><span id="Ontop-67"><a href="#Ontop-67"><span class="linenos"> 67</span></a>                       <span class="s1">&#39;ONTOP_LOG_LEVEL&#39;</span><span class="p">:</span> <span class="n">log_level</span><span class="p">}</span>
</span><span id="Ontop-68"><a href="#Ontop-68"><span class="linenos"> 68</span></a>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;blindreviewing/ontop:v</span><span class="si">{</span><span class="n">VERSION</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span>
</span><span id="Ontop-69"><a href="#Ontop-69"><span class="linenos"> 69</span></a>                         <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="p">,</span>
</span><span id="Ontop-70"><a href="#Ontop-70"><span class="linenos"> 70</span></a>                         <span class="n">ports</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;8888&#39;</span><span class="p">:</span> <span class="s1">&#39;8888&#39;</span><span class="p">},</span>
</span><span id="Ontop-71"><a href="#Ontop-71"><span class="linenos"> 71</span></a>                         <span class="n">environment</span><span class="o">=</span><span class="n">environment</span><span class="p">,</span>
</span><span id="Ontop-72"><a href="#Ontop-72"><span class="linenos"> 72</span></a>                         <span class="n">volumes</span><span class="o">=</span><span class="p">[</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_data_path</span><span class="si">}</span><span class="s1">/&#39;</span>
</span><span id="Ontop-73"><a href="#Ontop-73"><span class="linenos"> 73</span></a>                                  <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">root_mount_directory</span><span class="si">}</span><span class="s1">:/data&#39;</span><span class="p">,</span>
</span><span id="Ontop-74"><a href="#Ontop-74"><span class="linenos"> 74</span></a>                                  <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_data_path</span><span class="si">}</span><span class="s1">/shared:/data/shared&#39;</span><span class="p">])</span>
</span><span id="Ontop-75"><a href="#Ontop-75"><span class="linenos"> 75</span></a>
</span><span id="Ontop-76"><a href="#Ontop-76"><span class="linenos"> 76</span></a>    <span class="nd">@property</span>
</span><span id="Ontop-77"><a href="#Ontop-77"><span class="linenos"> 77</span></a>    <span class="k">def</span> <span class="nf">root_mount_directory</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="Ontop-78"><a href="#Ontop-78"><span class="linenos"> 78</span></a>        <span class="sd">&quot;&quot;&quot;Subdirectory in the root directory of the case for Ontop.</span>
</span><span id="Ontop-79"><a href="#Ontop-79"><span class="linenos"> 79</span></a>
</span><span id="Ontop-80"><a href="#Ontop-80"><span class="linenos"> 80</span></a><span class="sd">        Returns</span>
</span><span id="Ontop-81"><a href="#Ontop-81"><span class="linenos"> 81</span></a><span class="sd">        -------</span>
</span><span id="Ontop-82"><a href="#Ontop-82"><span class="linenos"> 82</span></a><span class="sd">        subdirectory : str</span>
</span><span id="Ontop-83"><a href="#Ontop-83"><span class="linenos"> 83</span></a><span class="sd">            Subdirectory of the root directory for Ontop.</span>
</span><span id="Ontop-84"><a href="#Ontop-84"><span class="linenos"> 84</span></a>
</span><span id="Ontop-85"><a href="#Ontop-85"><span class="linenos"> 85</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Ontop-86"><a href="#Ontop-86"><span class="linenos"> 86</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_mode</span> <span class="o">==</span> <span class="s1">&#39;endpoint&#39;</span><span class="p">:</span>
</span><span id="Ontop-87"><a href="#Ontop-87"><span class="linenos"> 87</span></a>            <span class="k">return</span> <span class="s1">&#39;ontopvirtualize&#39;</span>
</span><span id="Ontop-88"><a href="#Ontop-88"><span class="linenos"> 88</span></a>        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">_mode</span> <span class="o">==</span> <span class="s1">&#39;materialize&#39;</span><span class="p">:</span>
</span><span id="Ontop-89"><a href="#Ontop-89"><span class="linenos"> 89</span></a>            <span class="k">return</span> <span class="s1">&#39;ontopmaterialize&#39;</span>
</span><span id="Ontop-90"><a href="#Ontop-90"><span class="linenos"> 90</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="Ontop-91"><a href="#Ontop-91"><span class="linenos"> 91</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Unknown Ontop mode: &quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_mode</span><span class="si">}</span><span class="s1">&quot;&#39;</span><span class="p">)</span>
</span><span id="Ontop-92"><a href="#Ontop-92"><span class="linenos"> 92</span></a>
</span><span id="Ontop-93"><a href="#Ontop-93"><span class="linenos"> 93</span></a>    <span class="nd">@property</span>
</span><span id="Ontop-94"><a href="#Ontop-94"><span class="linenos"> 94</span></a>    <span class="k">def</span> <span class="nf">endpoint</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="Ontop-95"><a href="#Ontop-95"><span class="linenos"> 95</span></a>        <span class="sd">&quot;&quot;&quot;SPARQL endpoint URL for Ontop.</span>
</span><span id="Ontop-96"><a href="#Ontop-96"><span class="linenos"> 96</span></a>
</span><span id="Ontop-97"><a href="#Ontop-97"><span class="linenos"> 97</span></a><span class="sd">        Returns</span>
</span><span id="Ontop-98"><a href="#Ontop-98"><span class="linenos"> 98</span></a><span class="sd">        -------</span>
</span><span id="Ontop-99"><a href="#Ontop-99"><span class="linenos"> 99</span></a><span class="sd">        url : str</span>
</span><span id="Ontop-100"><a href="#Ontop-100"><span class="linenos">100</span></a><span class="sd">            SPARQL endpoint URL.</span>
</span><span id="Ontop-101"><a href="#Ontop-101"><span class="linenos">101</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Ontop-102"><a href="#Ontop-102"><span class="linenos">102</span></a>        <span class="k">return</span> <span class="s1">&#39;http://localhost:8888/sparql&#39;</span>
</span><span id="Ontop-103"><a href="#Ontop-103"><span class="linenos">103</span></a>
</span><span id="Ontop-104"><a href="#Ontop-104"><span class="linenos">104</span></a>    <span class="nd">@property</span>
</span><span id="Ontop-105"><a href="#Ontop-105"><span class="linenos">105</span></a>    <span class="k">def</span> <span class="nf">headers</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
</span><span id="Ontop-106"><a href="#Ontop-106"><span class="linenos">106</span></a>        <span class="sd">&quot;&quot;&quot;HTTP headers of SPARQL queries for serialization formats.</span>
</span><span id="Ontop-107"><a href="#Ontop-107"><span class="linenos">107</span></a>
</span><span id="Ontop-108"><a href="#Ontop-108"><span class="linenos">108</span></a><span class="sd">        Only supported serialization formats are included in the dictionary.</span>
</span><span id="Ontop-109"><a href="#Ontop-109"><span class="linenos">109</span></a><span class="sd">        Currently, the following formats are supported:</span>
</span><span id="Ontop-110"><a href="#Ontop-110"><span class="linenos">110</span></a><span class="sd">        - N-Triples</span>
</span><span id="Ontop-111"><a href="#Ontop-111"><span class="linenos">111</span></a><span class="sd">        - N-Quads</span>
</span><span id="Ontop-112"><a href="#Ontop-112"><span class="linenos">112</span></a><span class="sd">        - Turtle</span>
</span><span id="Ontop-113"><a href="#Ontop-113"><span class="linenos">113</span></a><span class="sd">        - CSV</span>
</span><span id="Ontop-114"><a href="#Ontop-114"><span class="linenos">114</span></a><span class="sd">        - RDF/JSON</span>
</span><span id="Ontop-115"><a href="#Ontop-115"><span class="linenos">115</span></a><span class="sd">        - RDF/XML</span>
</span><span id="Ontop-116"><a href="#Ontop-116"><span class="linenos">116</span></a><span class="sd">        - JSON-LD</span>
</span><span id="Ontop-117"><a href="#Ontop-117"><span class="linenos">117</span></a>
</span><span id="Ontop-118"><a href="#Ontop-118"><span class="linenos">118</span></a><span class="sd">        Returns</span>
</span><span id="Ontop-119"><a href="#Ontop-119"><span class="linenos">119</span></a><span class="sd">        -------</span>
</span><span id="Ontop-120"><a href="#Ontop-120"><span class="linenos">120</span></a><span class="sd">        headers : dict</span>
</span><span id="Ontop-121"><a href="#Ontop-121"><span class="linenos">121</span></a><span class="sd">            Dictionary of headers to use for each serialization format.</span>
</span><span id="Ontop-122"><a href="#Ontop-122"><span class="linenos">122</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Ontop-123"><a href="#Ontop-123"><span class="linenos">123</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_headers</span>
</span><span id="Ontop-124"><a href="#Ontop-124"><span class="linenos">124</span></a>
</span><span id="Ontop-125"><a href="#Ontop-125"><span class="linenos">125</span></a>    <span class="k">def</span> <span class="nf">_execute</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">arguments</span><span class="p">:</span> <span class="nb">list</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="Ontop-126"><a href="#Ontop-126"><span class="linenos">126</span></a>        <span class="sd">&quot;&quot;&quot;Execute Ontop with given arguments.</span>
</span><span id="Ontop-127"><a href="#Ontop-127"><span class="linenos">127</span></a>
</span><span id="Ontop-128"><a href="#Ontop-128"><span class="linenos">128</span></a><span class="sd">        Parameters</span>
</span><span id="Ontop-129"><a href="#Ontop-129"><span class="linenos">129</span></a><span class="sd">        ----------</span>
</span><span id="Ontop-130"><a href="#Ontop-130"><span class="linenos">130</span></a><span class="sd">        arguments : list</span>
</span><span id="Ontop-131"><a href="#Ontop-131"><span class="linenos">131</span></a><span class="sd">            Arguments to supply to Ontop.</span>
</span><span id="Ontop-132"><a href="#Ontop-132"><span class="linenos">132</span></a>
</span><span id="Ontop-133"><a href="#Ontop-133"><span class="linenos">133</span></a><span class="sd">        Returns</span>
</span><span id="Ontop-134"><a href="#Ontop-134"><span class="linenos">134</span></a><span class="sd">        -------</span>
</span><span id="Ontop-135"><a href="#Ontop-135"><span class="linenos">135</span></a><span class="sd">        success : bool</span>
</span><span id="Ontop-136"><a href="#Ontop-136"><span class="linenos">136</span></a><span class="sd">            Whether the execution succeeded or not.</span>
</span><span id="Ontop-137"><a href="#Ontop-137"><span class="linenos">137</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Ontop-138"><a href="#Ontop-138"><span class="linenos">138</span></a>
</span><span id="Ontop-139"><a href="#Ontop-139"><span class="linenos">139</span></a>        <span class="n">cmd</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;/ontop/ontop </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_mode</span><span class="si">}</span><span class="s1"> </span><span class="si">{</span><span class="s2">&quot; &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">arguments</span><span class="p">)</span><span class="si">}</span><span class="s1">&#39;</span>
</span><span id="Ontop-140"><a href="#Ontop-140"><span class="linenos">140</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Executing Ontop with command: </span><span class="si">{</span><span class="n">cmd</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
</span><span id="Ontop-141"><a href="#Ontop-141"><span class="linenos">141</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_mode</span> <span class="o">==</span> <span class="s1">&#39;endpoint&#39;</span><span class="p">:</span>
</span><span id="Ontop-142"><a href="#Ontop-142"><span class="linenos">142</span></a>            <span class="n">log_line</span> <span class="o">=</span> <span class="s1">&#39;OntopEndpointApplication - Started &#39;</span> <span class="o">+</span> \
</span><span id="Ontop-143"><a href="#Ontop-143"><span class="linenos">143</span></a>                       <span class="s1">&#39;OntopEndpointApplication&#39;</span>
</span><span id="Ontop-144"><a href="#Ontop-144"><span class="linenos">144</span></a>            <span class="n">success</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">run_and_wait_for_log</span><span class="p">(</span><span class="n">log_line</span><span class="p">,</span> <span class="n">cmd</span><span class="p">)</span>
</span><span id="Ontop-145"><a href="#Ontop-145"><span class="linenos">145</span></a>        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">_mode</span> <span class="o">==</span> <span class="s1">&#39;materialize&#39;</span><span class="p">:</span>
</span><span id="Ontop-146"><a href="#Ontop-146"><span class="linenos">146</span></a>            <span class="n">success</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">run_and_wait_for_exit</span><span class="p">(</span><span class="n">cmd</span><span class="p">)</span>
</span><span id="Ontop-147"><a href="#Ontop-147"><span class="linenos">147</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="Ontop-148"><a href="#Ontop-148"><span class="linenos">148</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Unknown Ontop mode &quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_mode</span><span class="si">}</span><span class="s1">&quot;&#39;</span><span class="p">)</span>
</span><span id="Ontop-149"><a href="#Ontop-149"><span class="linenos">149</span></a>            <span class="n">success</span> <span class="o">=</span> <span class="kc">False</span>
</span><span id="Ontop-150"><a href="#Ontop-150"><span class="linenos">150</span></a>
</span><span id="Ontop-151"><a href="#Ontop-151"><span class="linenos">151</span></a>        <span class="k">return</span> <span class="n">success</span>
</span><span id="Ontop-152"><a href="#Ontop-152"><span class="linenos">152</span></a>
</span><span id="Ontop-153"><a href="#Ontop-153"><span class="linenos">153</span></a>    <span class="k">def</span> <span class="nf">_execute_mapping</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
</span><span id="Ontop-154"><a href="#Ontop-154"><span class="linenos">154</span></a>                         <span class="n">config_file</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="Ontop-155"><a href="#Ontop-155"><span class="linenos">155</span></a>                         <span class="n">arguments</span><span class="p">:</span> <span class="nb">list</span><span class="p">,</span>
</span><span id="Ontop-156"><a href="#Ontop-156"><span class="linenos">156</span></a>                         <span class="n">mapping_file</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="Ontop-157"><a href="#Ontop-157"><span class="linenos">157</span></a>                         <span class="n">output_file</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span>
</span><span id="Ontop-158"><a href="#Ontop-158"><span class="linenos">158</span></a>                         <span class="n">rdb_username</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="Ontop-159"><a href="#Ontop-159"><span class="linenos">159</span></a>                         <span class="n">rdb_password</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="Ontop-160"><a href="#Ontop-160"><span class="linenos">160</span></a>                         <span class="n">rdb_host</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="Ontop-161"><a href="#Ontop-161"><span class="linenos">161</span></a>                         <span class="n">rdb_port</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
</span><span id="Ontop-162"><a href="#Ontop-162"><span class="linenos">162</span></a>                         <span class="n">rdb_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="Ontop-163"><a href="#Ontop-163"><span class="linenos">163</span></a>                         <span class="n">rdb_type</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="Ontop-164"><a href="#Ontop-164"><span class="linenos">164</span></a>        <span class="sd">&quot;&quot;&quot;Execute a mapping file with Ontop.</span>
</span><span id="Ontop-165"><a href="#Ontop-165"><span class="linenos">165</span></a>
</span><span id="Ontop-166"><a href="#Ontop-166"><span class="linenos">166</span></a><span class="sd">        Only relational databases are supported by</span>
</span><span id="Ontop-167"><a href="#Ontop-167"><span class="linenos">167</span></a><span class="sd">        Ontop, thus the relational database parameters are mandantory.</span>
</span><span id="Ontop-168"><a href="#Ontop-168"><span class="linenos">168</span></a>
</span><span id="Ontop-169"><a href="#Ontop-169"><span class="linenos">169</span></a><span class="sd">        Parameters</span>
</span><span id="Ontop-170"><a href="#Ontop-170"><span class="linenos">170</span></a><span class="sd">        ----------</span>
</span><span id="Ontop-171"><a href="#Ontop-171"><span class="linenos">171</span></a><span class="sd">        config_file : str</span>
</span><span id="Ontop-172"><a href="#Ontop-172"><span class="linenos">172</span></a><span class="sd">            Name of the generated config file for Ontop.</span>
</span><span id="Ontop-173"><a href="#Ontop-173"><span class="linenos">173</span></a><span class="sd">        arguments : list</span>
</span><span id="Ontop-174"><a href="#Ontop-174"><span class="linenos">174</span></a><span class="sd">            List of arguments to pass to Ontop.</span>
</span><span id="Ontop-175"><a href="#Ontop-175"><span class="linenos">175</span></a><span class="sd">        mapping_file : str</span>
</span><span id="Ontop-176"><a href="#Ontop-176"><span class="linenos">176</span></a><span class="sd">            Name of the mapping file to use.</span>
</span><span id="Ontop-177"><a href="#Ontop-177"><span class="linenos">177</span></a><span class="sd">        output_file : Optional[str]</span>
</span><span id="Ontop-178"><a href="#Ontop-178"><span class="linenos">178</span></a><span class="sd">            Name of the output file to use. Only applicable for</span>
</span><span id="Ontop-179"><a href="#Ontop-179"><span class="linenos">179</span></a><span class="sd">            materialization.</span>
</span><span id="Ontop-180"><a href="#Ontop-180"><span class="linenos">180</span></a><span class="sd">        rdb_username : str</span>
</span><span id="Ontop-181"><a href="#Ontop-181"><span class="linenos">181</span></a><span class="sd">            Username for the database.</span>
</span><span id="Ontop-182"><a href="#Ontop-182"><span class="linenos">182</span></a><span class="sd">        rdb_password : str</span>
</span><span id="Ontop-183"><a href="#Ontop-183"><span class="linenos">183</span></a><span class="sd">            Password for the database.</span>
</span><span id="Ontop-184"><a href="#Ontop-184"><span class="linenos">184</span></a><span class="sd">        rdb_host : str</span>
</span><span id="Ontop-185"><a href="#Ontop-185"><span class="linenos">185</span></a><span class="sd">            Hostname for the database.</span>
</span><span id="Ontop-186"><a href="#Ontop-186"><span class="linenos">186</span></a><span class="sd">        rdb_port : int</span>
</span><span id="Ontop-187"><a href="#Ontop-187"><span class="linenos">187</span></a><span class="sd">            Port for the database.</span>
</span><span id="Ontop-188"><a href="#Ontop-188"><span class="linenos">188</span></a><span class="sd">        rdb_name : str</span>
</span><span id="Ontop-189"><a href="#Ontop-189"><span class="linenos">189</span></a><span class="sd">            Database name for the database.</span>
</span><span id="Ontop-190"><a href="#Ontop-190"><span class="linenos">190</span></a><span class="sd">        rdb_type : str</span>
</span><span id="Ontop-191"><a href="#Ontop-191"><span class="linenos">191</span></a><span class="sd">            Database type.</span>
</span><span id="Ontop-192"><a href="#Ontop-192"><span class="linenos">192</span></a>
</span><span id="Ontop-193"><a href="#Ontop-193"><span class="linenos">193</span></a><span class="sd">        Returns</span>
</span><span id="Ontop-194"><a href="#Ontop-194"><span class="linenos">194</span></a><span class="sd">        -------</span>
</span><span id="Ontop-195"><a href="#Ontop-195"><span class="linenos">195</span></a><span class="sd">        success : bool</span>
</span><span id="Ontop-196"><a href="#Ontop-196"><span class="linenos">196</span></a><span class="sd">            Whether the execution was successfull or not.</span>
</span><span id="Ontop-197"><a href="#Ontop-197"><span class="linenos">197</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Ontop-198"><a href="#Ontop-198"><span class="linenos">198</span></a>        <span class="c1"># Generate INI configuration file since no CLI is available</span>
</span><span id="Ontop-199"><a href="#Ontop-199"><span class="linenos">199</span></a>        <span class="n">config</span> <span class="o">=</span> <span class="n">configparser</span><span class="o">.</span><span class="n">ConfigParser</span><span class="p">()</span>
</span><span id="Ontop-200"><a href="#Ontop-200"><span class="linenos">200</span></a>        <span class="n">config</span><span class="p">[</span><span class="s1">&#39;root&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="Ontop-201"><a href="#Ontop-201"><span class="linenos">201</span></a>        <span class="k">if</span> <span class="n">rdb_type</span> <span class="o">==</span> <span class="s1">&#39;MySQL&#39;</span><span class="p">:</span>
</span><span id="Ontop-202"><a href="#Ontop-202"><span class="linenos">202</span></a>            <span class="n">dsn</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;jdbc:mysql://</span><span class="si">{</span><span class="n">rdb_host</span><span class="si">}</span><span class="s1">:</span><span class="si">{</span><span class="n">rdb_port</span><span class="si">}</span><span class="s1">/</span><span class="si">{</span><span class="n">rdb_name</span><span class="si">}</span><span class="s1">&#39;</span>
</span><span id="Ontop-203"><a href="#Ontop-203"><span class="linenos">203</span></a>            <span class="n">config</span><span class="p">[</span><span class="s1">&#39;root&#39;</span><span class="p">][</span><span class="s1">&#39;jdbc.url&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">dsn</span>
</span><span id="Ontop-204"><a href="#Ontop-204"><span class="linenos">204</span></a>            <span class="n">config</span><span class="p">[</span><span class="s1">&#39;root&#39;</span><span class="p">][</span><span class="s1">&#39;jdbc.driver&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;com.mysql.cj.jdbc.Driver&#39;</span>
</span><span id="Ontop-205"><a href="#Ontop-205"><span class="linenos">205</span></a>        <span class="k">elif</span> <span class="n">rdb_type</span> <span class="o">==</span> <span class="s1">&#39;PostgreSQL&#39;</span><span class="p">:</span>
</span><span id="Ontop-206"><a href="#Ontop-206"><span class="linenos">206</span></a>            <span class="n">dsn</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;jdbc:postgresql://</span><span class="si">{</span><span class="n">rdb_host</span><span class="si">}</span><span class="s1">:</span><span class="si">{</span><span class="n">rdb_port</span><span class="si">}</span><span class="s1">/</span><span class="si">{</span><span class="n">rdb_name</span><span class="si">}</span><span class="s1">&#39;</span>
</span><span id="Ontop-207"><a href="#Ontop-207"><span class="linenos">207</span></a>            <span class="n">config</span><span class="p">[</span><span class="s1">&#39;root&#39;</span><span class="p">][</span><span class="s1">&#39;jdbc.url&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">dsn</span>
</span><span id="Ontop-208"><a href="#Ontop-208"><span class="linenos">208</span></a>            <span class="n">config</span><span class="p">[</span><span class="s1">&#39;root&#39;</span><span class="p">][</span><span class="s1">&#39;jdbc.driver&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;org.postgresql.Driver&#39;</span>
</span><span id="Ontop-209"><a href="#Ontop-209"><span class="linenos">209</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="Ontop-210"><a href="#Ontop-210"><span class="linenos">210</span></a>            <span class="n">msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;Unknown RDB type: &quot;</span><span class="si">{</span><span class="n">rdb_type</span><span class="si">}</span><span class="s1">&quot;&#39;</span>
</span><span id="Ontop-211"><a href="#Ontop-211"><span class="linenos">211</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
</span><span id="Ontop-212"><a href="#Ontop-212"><span class="linenos">212</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
</span><span id="Ontop-213"><a href="#Ontop-213"><span class="linenos">213</span></a>        <span class="n">config</span><span class="p">[</span><span class="s1">&#39;root&#39;</span><span class="p">][</span><span class="s1">&#39;jdbc.user&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">rdb_username</span>
</span><span id="Ontop-214"><a href="#Ontop-214"><span class="linenos">214</span></a>        <span class="n">config</span><span class="p">[</span><span class="s1">&#39;root&#39;</span><span class="p">][</span><span class="s1">&#39;jdbc.password&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">rdb_password</span>
</span><span id="Ontop-215"><a href="#Ontop-215"><span class="linenos">215</span></a>
</span><span id="Ontop-216"><a href="#Ontop-216"><span class="linenos">216</span></a>        <span class="n">path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_data_path</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">root_mount_directory</span><span class="p">)</span>
</span><span id="Ontop-217"><a href="#Ontop-217"><span class="linenos">217</span></a>        <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="Ontop-218"><a href="#Ontop-218"><span class="linenos">218</span></a>        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="s1">&#39;config.properties&#39;</span><span class="p">),</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
</span><span id="Ontop-219"><a href="#Ontop-219"><span class="linenos">219</span></a>            <span class="n">config</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="n">space_around_delimiters</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</span><span id="Ontop-220"><a href="#Ontop-220"><span class="linenos">220</span></a>
</span><span id="Ontop-221"><a href="#Ontop-221"><span class="linenos">221</span></a>        <span class="c1"># .properties files are like .ini files but without a [HEADER]</span>
</span><span id="Ontop-222"><a href="#Ontop-222"><span class="linenos">222</span></a>        <span class="c1"># Use a [root] header and remove it after writing</span>
</span><span id="Ontop-223"><a href="#Ontop-223"><span class="linenos">223</span></a>        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="s1">&#39;config.properties&#39;</span><span class="p">),</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
</span><span id="Ontop-224"><a href="#Ontop-224"><span class="linenos">224</span></a>            <span class="n">data</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
</span><span id="Ontop-225"><a href="#Ontop-225"><span class="linenos">225</span></a>
</span><span id="Ontop-226"><a href="#Ontop-226"><span class="linenos">226</span></a>        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="s1">&#39;config.properties&#39;</span><span class="p">),</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
</span><span id="Ontop-227"><a href="#Ontop-227"><span class="linenos">227</span></a>            <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;[root]</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">))</span>
</span><span id="Ontop-228"><a href="#Ontop-228"><span class="linenos">228</span></a>
</span><span id="Ontop-229"><a href="#Ontop-229"><span class="linenos">229</span></a>        <span class="c1"># Compatibility with Ontop requiring rr:class</span>
</span><span id="Ontop-230"><a href="#Ontop-230"><span class="linenos">230</span></a>        <span class="c1"># Replace any rdf:type construction with rr:class</span>
</span><span id="Ontop-231"><a href="#Ontop-231"><span class="linenos">231</span></a>        <span class="c1"># Without this, a strange error is raised: &#39;The definition of the</span>
</span><span id="Ontop-232"><a href="#Ontop-232"><span class="linenos">232</span></a>        <span class="c1"># predicate is not always a ground term triple(s,p,o)&#39;</span>
</span><span id="Ontop-233"><a href="#Ontop-233"><span class="linenos">233</span></a>        <span class="n">g</span> <span class="o">=</span> <span class="n">Graph</span><span class="p">()</span>
</span><span id="Ontop-234"><a href="#Ontop-234"><span class="linenos">234</span></a>        <span class="n">g</span><span class="o">.</span><span class="n">bind</span><span class="p">(</span><span class="s1">&#39;r2rml&#39;</span><span class="p">,</span> <span class="n">R2RML</span><span class="p">)</span>
</span><span id="Ontop-235"><a href="#Ontop-235"><span class="linenos">235</span></a>        <span class="n">g</span><span class="o">.</span><span class="n">bind</span><span class="p">(</span><span class="s1">&#39;rdf&#39;</span><span class="p">,</span> <span class="n">RDF</span><span class="p">)</span>
</span><span id="Ontop-236"><a href="#Ontop-236"><span class="linenos">236</span></a>        <span class="n">g</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_data_path</span><span class="p">,</span> <span class="s1">&#39;shared&#39;</span><span class="p">,</span>
</span><span id="Ontop-237"><a href="#Ontop-237"><span class="linenos">237</span></a>                             <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">mapping_file</span><span class="p">)))</span>
</span><span id="Ontop-238"><a href="#Ontop-238"><span class="linenos">238</span></a>
</span><span id="Ontop-239"><a href="#Ontop-239"><span class="linenos">239</span></a>        <span class="k">for</span> <span class="n">triples_map_iri</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">o</span> <span class="ow">in</span> <span class="n">g</span><span class="o">.</span><span class="n">triples</span><span class="p">((</span><span class="kc">None</span><span class="p">,</span> <span class="n">RDF</span><span class="o">.</span><span class="n">type</span><span class="p">,</span>
</span><span id="Ontop-240"><a href="#Ontop-240"><span class="linenos">240</span></a>                                                <span class="n">R2RML</span><span class="o">.</span><span class="n">TriplesMap</span><span class="p">)):</span>
</span><span id="Ontop-241"><a href="#Ontop-241"><span class="linenos">241</span></a>            <span class="n">subject_map_iri</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">value</span><span class="p">(</span><span class="n">triples_map_iri</span><span class="p">,</span> <span class="n">R2RML</span><span class="o">.</span><span class="n">subjectMap</span><span class="p">)</span>
</span><span id="Ontop-242"><a href="#Ontop-242"><span class="linenos">242</span></a>
</span><span id="Ontop-243"><a href="#Ontop-243"><span class="linenos">243</span></a>            <span class="n">iter_pom</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">triples</span><span class="p">((</span><span class="n">triples_map_iri</span><span class="p">,</span>
</span><span id="Ontop-244"><a href="#Ontop-244"><span class="linenos">244</span></a>                                  <span class="n">R2RML</span><span class="o">.</span><span class="n">predicateObjectMap</span><span class="p">,</span>
</span><span id="Ontop-245"><a href="#Ontop-245"><span class="linenos">245</span></a>                                  <span class="kc">None</span><span class="p">))</span>
</span><span id="Ontop-246"><a href="#Ontop-246"><span class="linenos">246</span></a>            <span class="k">for</span> <span class="n">s</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">predicate_object_map_iri</span> <span class="ow">in</span> <span class="n">iter_pom</span><span class="p">:</span>
</span><span id="Ontop-247"><a href="#Ontop-247"><span class="linenos">247</span></a>                <span class="n">predicate_map_iri</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">value</span><span class="p">(</span><span class="n">predicate_object_map_iri</span><span class="p">,</span>
</span><span id="Ontop-248"><a href="#Ontop-248"><span class="linenos">248</span></a>                                            <span class="n">R2RML</span><span class="o">.</span><span class="n">predicateMap</span><span class="p">)</span>
</span><span id="Ontop-249"><a href="#Ontop-249"><span class="linenos">249</span></a>                <span class="n">object_map_iri</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">value</span><span class="p">(</span><span class="n">predicate_object_map_iri</span><span class="p">,</span>
</span><span id="Ontop-250"><a href="#Ontop-250"><span class="linenos">250</span></a>                                         <span class="n">R2RML</span><span class="o">.</span><span class="n">objectMap</span><span class="p">)</span>
</span><span id="Ontop-251"><a href="#Ontop-251"><span class="linenos">251</span></a>
</span><span id="Ontop-252"><a href="#Ontop-252"><span class="linenos">252</span></a>                <span class="k">if</span> <span class="n">predicate_map_iri</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">object_map_iri</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Ontop-253"><a href="#Ontop-253"><span class="linenos">253</span></a>                    <span class="k">continue</span>
</span><span id="Ontop-254"><a href="#Ontop-254"><span class="linenos">254</span></a>
</span><span id="Ontop-255"><a href="#Ontop-255"><span class="linenos">255</span></a>                <span class="c1"># Check if PredicateObjectMap is pointing to a PredicateMap</span>
</span><span id="Ontop-256"><a href="#Ontop-256"><span class="linenos">256</span></a>                <span class="c1"># specifying rdf:type. Skip this PredicateObjectMap if not</span>
</span><span id="Ontop-257"><a href="#Ontop-257"><span class="linenos">257</span></a>                <span class="k">if</span> <span class="n">g</span><span class="o">.</span><span class="n">value</span><span class="p">(</span><span class="n">predicate_map_iri</span><span class="p">,</span> <span class="n">R2RML</span><span class="o">.</span><span class="n">constant</span><span class="p">)</span> <span class="o">!=</span> <span class="n">RDF</span><span class="o">.</span><span class="n">type</span><span class="p">:</span>
</span><span id="Ontop-258"><a href="#Ontop-258"><span class="linenos">258</span></a>                    <span class="k">continue</span>
</span><span id="Ontop-259"><a href="#Ontop-259"><span class="linenos">259</span></a>
</span><span id="Ontop-260"><a href="#Ontop-260"><span class="linenos">260</span></a>                <span class="c1"># Retrieve the ObjectMap rr:constant value and add it as</span>
</span><span id="Ontop-261"><a href="#Ontop-261"><span class="linenos">261</span></a>                <span class="c1"># rr:class to the Subject Map is present</span>
</span><span id="Ontop-262"><a href="#Ontop-262"><span class="linenos">262</span></a>                <span class="n">rdf_type_value</span> <span class="o">=</span> <span class="n">g</span><span class="o">.</span><span class="n">value</span><span class="p">(</span><span class="n">object_map_iri</span><span class="p">,</span> <span class="n">R2RML</span><span class="o">.</span><span class="n">constant</span><span class="p">)</span>
</span><span id="Ontop-263"><a href="#Ontop-263"><span class="linenos">263</span></a>                <span class="k">if</span> <span class="n">rdf_type_value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Ontop-264"><a href="#Ontop-264"><span class="linenos">264</span></a>                    <span class="n">iri</span> <span class="o">=</span> <span class="n">URIRef</span><span class="p">(</span><span class="n">rdf_type_value</span><span class="o">.</span><span class="n">toPython</span><span class="p">())</span>
</span><span id="Ontop-265"><a href="#Ontop-265"><span class="linenos">265</span></a>                    <span class="n">g</span><span class="o">.</span><span class="n">add</span><span class="p">((</span><span class="n">subject_map_iri</span><span class="p">,</span> <span class="n">R2RML</span><span class="p">[</span><span class="s1">&#39;class&#39;</span><span class="p">],</span> <span class="n">iri</span><span class="p">))</span>
</span><span id="Ontop-266"><a href="#Ontop-266"><span class="linenos">266</span></a>                <span class="k">else</span><span class="p">:</span>
</span><span id="Ontop-267"><a href="#Ontop-267"><span class="linenos">267</span></a>                    <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;Cannot extract rr:class value, rdf:type value &#39;</span> <span class="o">+</span> \
</span><span id="Ontop-268"><a href="#Ontop-268"><span class="linenos">268</span></a>                          <span class="s1">&#39;is not a constant value!&#39;</span>
</span><span id="Ontop-269"><a href="#Ontop-269"><span class="linenos">269</span></a>                    <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
</span><span id="Ontop-270"><a href="#Ontop-270"><span class="linenos">270</span></a>                    <span class="k">return</span> <span class="kc">False</span>
</span><span id="Ontop-271"><a href="#Ontop-271"><span class="linenos">271</span></a>
</span><span id="Ontop-272"><a href="#Ontop-272"><span class="linenos">272</span></a>                <span class="c1"># Remove all triples associated with the rdf:type PredicateMap</span>
</span><span id="Ontop-273"><a href="#Ontop-273"><span class="linenos">273</span></a>                <span class="k">for</span> <span class="n">s</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">o</span> <span class="ow">in</span> <span class="n">g</span><span class="o">.</span><span class="n">triples</span><span class="p">((</span><span class="n">predicate_map_iri</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">)):</span>
</span><span id="Ontop-274"><a href="#Ontop-274"><span class="linenos">274</span></a>                    <span class="n">g</span><span class="o">.</span><span class="n">remove</span><span class="p">((</span><span class="n">s</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">o</span><span class="p">))</span>
</span><span id="Ontop-275"><a href="#Ontop-275"><span class="linenos">275</span></a>
</span><span id="Ontop-276"><a href="#Ontop-276"><span class="linenos">276</span></a>                <span class="c1"># Remove all triples associated with the rdf:type ObjectMap</span>
</span><span id="Ontop-277"><a href="#Ontop-277"><span class="linenos">277</span></a>                <span class="k">for</span> <span class="n">s</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">o</span> <span class="ow">in</span> <span class="n">g</span><span class="o">.</span><span class="n">triples</span><span class="p">((</span><span class="n">object_map_iri</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">)):</span>
</span><span id="Ontop-278"><a href="#Ontop-278"><span class="linenos">278</span></a>                    <span class="n">g</span><span class="o">.</span><span class="n">remove</span><span class="p">((</span><span class="n">s</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">o</span><span class="p">))</span>
</span><span id="Ontop-279"><a href="#Ontop-279"><span class="linenos">279</span></a>
</span><span id="Ontop-280"><a href="#Ontop-280"><span class="linenos">280</span></a>                <span class="c1"># Remove all triples associated with the</span>
</span><span id="Ontop-281"><a href="#Ontop-281"><span class="linenos">281</span></a>                <span class="c1"># rdf:type PredicateObjectMap</span>
</span><span id="Ontop-282"><a href="#Ontop-282"><span class="linenos">282</span></a>                <span class="k">for</span> <span class="n">s</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">o</span> <span class="ow">in</span> <span class="n">g</span><span class="o">.</span><span class="n">triples</span><span class="p">((</span><span class="n">object_map_iri</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">)):</span>
</span><span id="Ontop-283"><a href="#Ontop-283"><span class="linenos">283</span></a>                    <span class="n">g</span><span class="o">.</span><span class="n">remove</span><span class="p">((</span><span class="n">s</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">o</span><span class="p">))</span>
</span><span id="Ontop-284"><a href="#Ontop-284"><span class="linenos">284</span></a>
</span><span id="Ontop-285"><a href="#Ontop-285"><span class="linenos">285</span></a>                <span class="c1"># Remove PredicateObjectMap from Triples Map</span>
</span><span id="Ontop-286"><a href="#Ontop-286"><span class="linenos">286</span></a>                <span class="n">g</span><span class="o">.</span><span class="n">remove</span><span class="p">((</span><span class="n">triples_map_iri</span><span class="p">,</span> <span class="n">R2RML</span><span class="o">.</span><span class="n">predicateObjectMap</span><span class="p">,</span>
</span><span id="Ontop-287"><a href="#Ontop-287"><span class="linenos">287</span></a>                          <span class="n">predicate_object_map_iri</span><span class="p">))</span>
</span><span id="Ontop-288"><a href="#Ontop-288"><span class="linenos">288</span></a>
</span><span id="Ontop-289"><a href="#Ontop-289"><span class="linenos">289</span></a>            <span class="n">destination</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_data_path</span><span class="p">,</span>
</span><span id="Ontop-290"><a href="#Ontop-290"><span class="linenos">290</span></a>                                       <span class="bp">self</span><span class="o">.</span><span class="n">root_mount_directory</span><span class="p">,</span>
</span><span id="Ontop-291"><a href="#Ontop-291"><span class="linenos">291</span></a>                                       <span class="s1">&#39;mapping_converted.r2rml.ttl&#39;</span><span class="p">)</span>
</span><span id="Ontop-292"><a href="#Ontop-292"><span class="linenos">292</span></a>            <span class="n">g</span><span class="o">.</span><span class="n">serialize</span><span class="p">(</span><span class="n">destination</span><span class="o">=</span><span class="n">destination</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="s1">&#39;turtle&#39;</span><span class="p">)</span>
</span><span id="Ontop-293"><a href="#Ontop-293"><span class="linenos">293</span></a>
</span><span id="Ontop-294"><a href="#Ontop-294"><span class="linenos">294</span></a>        <span class="n">arguments</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;-m&#39;</span><span class="p">)</span>
</span><span id="Ontop-295"><a href="#Ontop-295"><span class="linenos">295</span></a>        <span class="n">arguments</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;/data/mapping_converted.r2rml.ttl&#39;</span><span class="p">)</span>
</span><span id="Ontop-296"><a href="#Ontop-296"><span class="linenos">296</span></a>        <span class="k">if</span> <span class="n">output_file</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="Ontop-297"><a href="#Ontop-297"><span class="linenos">297</span></a>            <span class="n">arguments</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;-o&#39;</span><span class="p">)</span>
</span><span id="Ontop-298"><a href="#Ontop-298"><span class="linenos">298</span></a>            <span class="n">arguments</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s1">&#39;/data/shared/&#39;</span><span class="p">,</span> <span class="n">output_file</span><span class="p">))</span>
</span><span id="Ontop-299"><a href="#Ontop-299"><span class="linenos">299</span></a>        <span class="n">arguments</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;-p&#39;</span><span class="p">)</span>
</span><span id="Ontop-300"><a href="#Ontop-300"><span class="linenos">300</span></a>        <span class="n">arguments</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;/data/config.properties&#39;</span><span class="p">)</span>
</span><span id="Ontop-301"><a href="#Ontop-301"><span class="linenos">301</span></a>
</span><span id="Ontop-302"><a href="#Ontop-302"><span class="linenos">302</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_execute</span><span class="p">(</span><span class="n">arguments</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Ontop container super class for OntopMaterialize and OntopVirtualize.</p>
</div>


                            <div id="Ontop.__init__" class="classattr">
                                        <input id="Ontop.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">Ontop</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="n">name</span><span class="p">:</span> <span class="nb">str</span>,</span><span class="param">	<span class="n">data_path</span><span class="p">:</span> <span class="nb">str</span>,</span><span class="param">	<span class="n">logger</span><span class="p">:</span> <span class="n"><a href="logger.html#Logger">bench_executor.logger.Logger</a></span>,</span><span class="param">	<span class="n">mode</span><span class="p">:</span> <span class="nb">str</span></span>)</span>

                <label class="view-source-button" for="Ontop.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#Ontop.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="Ontop.__init__-30"><a href="#Ontop.__init__-30"><span class="linenos">30</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">data_path</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">logger</span><span class="p">:</span> <span class="n">Logger</span><span class="p">,</span> <span class="n">mode</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
</span><span id="Ontop.__init__-31"><a href="#Ontop.__init__-31"><span class="linenos">31</span></a>        <span class="sd">&quot;&quot;&quot;Creates an instance of the Ontop class.</span>
</span><span id="Ontop.__init__-32"><a href="#Ontop.__init__-32"><span class="linenos">32</span></a>
</span><span id="Ontop.__init__-33"><a href="#Ontop.__init__-33"><span class="linenos">33</span></a><span class="sd">        Parameters</span>
</span><span id="Ontop.__init__-34"><a href="#Ontop.__init__-34"><span class="linenos">34</span></a><span class="sd">        ----------</span>
</span><span id="Ontop.__init__-35"><a href="#Ontop.__init__-35"><span class="linenos">35</span></a><span class="sd">        name : str</span>
</span><span id="Ontop.__init__-36"><a href="#Ontop.__init__-36"><span class="linenos">36</span></a><span class="sd">            Pretty name of the container.</span>
</span><span id="Ontop.__init__-37"><a href="#Ontop.__init__-37"><span class="linenos">37</span></a><span class="sd">        data_path: str</span>
</span><span id="Ontop.__init__-38"><a href="#Ontop.__init__-38"><span class="linenos">38</span></a><span class="sd">            Path to the data directory of the case.</span>
</span><span id="Ontop.__init__-39"><a href="#Ontop.__init__-39"><span class="linenos">39</span></a><span class="sd">        logger : Logger</span>
</span><span id="Ontop.__init__-40"><a href="#Ontop.__init__-40"><span class="linenos">40</span></a><span class="sd">            Logger to use for log messages.</span>
</span><span id="Ontop.__init__-41"><a href="#Ontop.__init__-41"><span class="linenos">41</span></a><span class="sd">        mode : str</span>
</span><span id="Ontop.__init__-42"><a href="#Ontop.__init__-42"><span class="linenos">42</span></a><span class="sd">            Ontop mode: `materialize` or `endpoint`</span>
</span><span id="Ontop.__init__-43"><a href="#Ontop.__init__-43"><span class="linenos">43</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="Ontop.__init__-44"><a href="#Ontop.__init__-44"><span class="linenos">44</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_mode</span> <span class="o">=</span> <span class="n">mode</span>
</span><span id="Ontop.__init__-45"><a href="#Ontop.__init__-45"><span class="linenos">45</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_headers</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="Ontop.__init__-46"><a href="#Ontop.__init__-46"><span class="linenos">46</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span> <span class="o">=</span> <span class="n">logger</span>
</span><span id="Ontop.__init__-47"><a href="#Ontop.__init__-47"><span class="linenos">47</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_data_path</span> <span class="o">=</span> <span class="n">data_path</span>
</span><span id="Ontop.__init__-48"><a href="#Ontop.__init__-48"><span class="linenos">48</span></a>
</span><span id="Ontop.__init__-49"><a href="#Ontop.__init__-49"><span class="linenos">49</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_mode</span> <span class="o">==</span> <span class="s1">&#39;endpoint&#39;</span><span class="p">:</span>
</span><span id="Ontop.__init__-50"><a href="#Ontop.__init__-50"><span class="linenos">50</span></a>            <span class="n">subdir</span> <span class="o">=</span> <span class="s1">&#39;ontopvirtualize&#39;</span>
</span><span id="Ontop.__init__-51"><a href="#Ontop.__init__-51"><span class="linenos">51</span></a>        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">_mode</span> <span class="o">==</span> <span class="s1">&#39;materialize&#39;</span><span class="p">:</span>
</span><span id="Ontop.__init__-52"><a href="#Ontop.__init__-52"><span class="linenos">52</span></a>            <span class="n">subdir</span> <span class="o">=</span> <span class="s1">&#39;ontopmaterialize&#39;</span>
</span><span id="Ontop.__init__-53"><a href="#Ontop.__init__-53"><span class="linenos">53</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="Ontop.__init__-54"><a href="#Ontop.__init__-54"><span class="linenos">54</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Unknown Ontop mode: &quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_mode</span><span class="si">}</span><span class="s1">&quot;&#39;</span><span class="p">)</span>
</span><span id="Ontop.__init__-55"><a href="#Ontop.__init__-55"><span class="linenos">55</span></a>        <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_data_path</span><span class="p">,</span> <span class="n">subdir</span><span class="p">),</span> <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="Ontop.__init__-56"><a href="#Ontop.__init__-56"><span class="linenos">56</span></a>
</span><span id="Ontop.__init__-57"><a href="#Ontop.__init__-57"><span class="linenos">57</span></a>        <span class="c1"># Set Java heap to 1/2 of available memory instead of the default 1/4</span>
</span><span id="Ontop.__init__-58"><a href="#Ontop.__init__-58"><span class="linenos">58</span></a>        <span class="n">max_heap</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">psutil</span><span class="o">.</span><span class="n">virtual_memory</span><span class="p">()</span><span class="o">.</span><span class="n">total</span> <span class="o">*</span> <span class="p">(</span><span class="mi">1</span><span class="o">/</span><span class="mi">2</span><span class="p">))</span>
</span><span id="Ontop.__init__-59"><a href="#Ontop.__init__-59"><span class="linenos">59</span></a>
</span><span id="Ontop.__init__-60"><a href="#Ontop.__init__-60"><span class="linenos">60</span></a>        <span class="c1"># Configure logging</span>
</span><span id="Ontop.__init__-61"><a href="#Ontop.__init__-61"><span class="linenos">61</span></a>        <span class="n">log_level</span> <span class="o">=</span> <span class="s1">&#39;info&#39;</span>
</span><span id="Ontop.__init__-62"><a href="#Ontop.__init__-62"><span class="linenos">62</span></a>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">verbose</span><span class="p">:</span>
</span><span id="Ontop.__init__-63"><a href="#Ontop.__init__-63"><span class="linenos">63</span></a>            <span class="n">log_level</span> <span class="o">=</span> <span class="s1">&#39;debug&#39;</span>
</span><span id="Ontop.__init__-64"><a href="#Ontop.__init__-64"><span class="linenos">64</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Initialized Ontop logger at &quot;</span><span class="si">{</span><span class="n">log_level</span><span class="si">}</span><span class="s1">&quot; level&#39;</span><span class="p">)</span>
</span><span id="Ontop.__init__-65"><a href="#Ontop.__init__-65"><span class="linenos">65</span></a>
</span><span id="Ontop.__init__-66"><a href="#Ontop.__init__-66"><span class="linenos">66</span></a>        <span class="n">environment</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;ONTOP_JAVA_ARGS&#39;</span><span class="p">:</span> <span class="sa">f</span><span class="s1">&#39;-Xmx</span><span class="si">{</span><span class="n">max_heap</span><span class="si">}</span><span class="s1"> -Xms</span><span class="si">{</span><span class="n">max_heap</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">,</span>
</span><span id="Ontop.__init__-67"><a href="#Ontop.__init__-67"><span class="linenos">67</span></a>                       <span class="s1">&#39;ONTOP_LOG_LEVEL&#39;</span><span class="p">:</span> <span class="n">log_level</span><span class="p">}</span>
</span><span id="Ontop.__init__-68"><a href="#Ontop.__init__-68"><span class="linenos">68</span></a>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;blindreviewing/ontop:v</span><span class="si">{</span><span class="n">VERSION</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span>
</span><span id="Ontop.__init__-69"><a href="#Ontop.__init__-69"><span class="linenos">69</span></a>                         <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="p">,</span>
</span><span id="Ontop.__init__-70"><a href="#Ontop.__init__-70"><span class="linenos">70</span></a>                         <span class="n">ports</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;8888&#39;</span><span class="p">:</span> <span class="s1">&#39;8888&#39;</span><span class="p">},</span>
</span><span id="Ontop.__init__-71"><a href="#Ontop.__init__-71"><span class="linenos">71</span></a>                         <span class="n">environment</span><span class="o">=</span><span class="n">environment</span><span class="p">,</span>
</span><span id="Ontop.__init__-72"><a href="#Ontop.__init__-72"><span class="linenos">72</span></a>                         <span class="n">volumes</span><span class="o">=</span><span class="p">[</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_data_path</span><span class="si">}</span><span class="s1">/&#39;</span>
</span><span id="Ontop.__init__-73"><a href="#Ontop.__init__-73"><span class="linenos">73</span></a>                                  <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">root_mount_directory</span><span class="si">}</span><span class="s1">:/data&#39;</span><span class="p">,</span>
</span><span id="Ontop.__init__-74"><a href="#Ontop.__init__-74"><span class="linenos">74</span></a>                                  <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_data_path</span><span class="si">}</span><span class="s1">/shared:/data/shared&#39;</span><span class="p">])</span>
</span></pre></div>


            <div class="docstring"><p>Creates an instance of the Ontop class.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>name</strong> (str):
Pretty name of the container.</li>
<li><strong>data_path</strong> (str):
Path to the data directory of the case.</li>
<li><strong>logger</strong> (Logger):
Logger to use for log messages.</li>
<li><strong>mode</strong> (str):
Ontop mode: <code>materialize</code> or <code><a href="#Ontop.endpoint">endpoint</a></code></li>
</ul>
</div>


                            </div>
                            <div id="Ontop.root_mount_directory" class="classattr">
                                <div class="attr variable">
            <span class="name">root_mount_directory</span><span class="annotation">: str</span>

        
    </div>
    <a class="headerlink" href="#Ontop.root_mount_directory"></a>
    
            <div class="docstring"><p>Subdirectory in the root directory of the case for Ontop.</p>

<h6 id="returns">Returns</h6>

<ul>
<li><strong>subdirectory</strong> (str):
Subdirectory of the root directory for Ontop.</li>
</ul>
</div>


                            </div>
                            <div id="Ontop.endpoint" class="classattr">
                                <div class="attr variable">
            <span class="name">endpoint</span><span class="annotation">: str</span>

        
    </div>
    <a class="headerlink" href="#Ontop.endpoint"></a>
    
            <div class="docstring"><p>SPARQL endpoint URL for Ontop.</p>

<h6 id="returns">Returns</h6>

<ul>
<li><strong>url</strong> (str):
SPARQL endpoint URL.</li>
</ul>
</div>


                            </div>
                            <div id="Ontop.headers" class="classattr">
                                <div class="attr variable">
            <span class="name">headers</span><span class="annotation">: dict</span>

        
    </div>
    <a class="headerlink" href="#Ontop.headers"></a>
    
            <div class="docstring"><p>HTTP headers of SPARQL queries for serialization formats.</p>

<p>Only supported serialization formats are included in the dictionary.
Currently, the following formats are supported:</p>

<ul>
<li>N-Triples</li>
<li>N-Quads</li>
<li>Turtle</li>
<li>CSV</li>
<li>RDF/JSON</li>
<li>RDF/XML</li>
<li>JSON-LD</li>
</ul>

<h6 id="returns">Returns</h6>

<ul>
<li><strong>headers</strong> (dict):
Dictionary of headers to use for each serialization format.</li>
</ul>
</div>


                            </div>
                            <div class="inherited">
                                <h5>Inherited Members</h5>
                                <dl>
                                    <div><dt><a href="container.html#Container">bench_executor.container.Container</a></dt>
                                <dd id="Ontop.started" class="variable"><a href="container.html#Container.started">started</a></dd>
                <dd id="Ontop.name" class="variable"><a href="container.html#Container.name">name</a></dd>
                <dd id="Ontop.run" class="function"><a href="container.html#Container.run">run</a></dd>
                <dd id="Ontop.exec" class="function"><a href="container.html#Container.exec">exec</a></dd>
                <dd id="Ontop.run_and_wait_for_log" class="function"><a href="container.html#Container.run_and_wait_for_log">run_and_wait_for_log</a></dd>
                <dd id="Ontop.run_and_wait_for_exit" class="function"><a href="container.html#Container.run_and_wait_for_exit">run_and_wait_for_exit</a></dd>
                <dd id="Ontop.stop" class="function"><a href="container.html#Container.stop">stop</a></dd>

            </div>
                                </dl>
                            </div>
                </section>
                <section id="OntopVirtualize">
                            <input id="OntopVirtualize-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">OntopVirtualize</span><wbr>(<span class="base"><a href="#Ontop">Ontop</a></span>):

                <label class="view-source-button" for="OntopVirtualize-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#OntopVirtualize"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="OntopVirtualize-305"><a href="#OntopVirtualize-305"><span class="linenos">305</span></a><span class="k">class</span> <span class="nc">OntopVirtualize</span><span class="p">(</span><span class="n">Ontop</span><span class="p">):</span>
</span><span id="OntopVirtualize-306"><a href="#OntopVirtualize-306"><span class="linenos">306</span></a>    <span class="sd">&quot;&quot;&quot;OntopVirtualize container for setting up an Ontop SPARQL endpoint.&quot;&quot;&quot;</span>
</span><span id="OntopVirtualize-307"><a href="#OntopVirtualize-307"><span class="linenos">307</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data_path</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">config_path</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">directory</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="OntopVirtualize-308"><a href="#OntopVirtualize-308"><span class="linenos">308</span></a>                 <span class="n">verbose</span><span class="p">:</span> <span class="nb">bool</span><span class="p">):</span>
</span><span id="OntopVirtualize-309"><a href="#OntopVirtualize-309"><span class="linenos">309</span></a>        <span class="sd">&quot;&quot;&quot;Creates an instance of the OntopVirtualize class.</span>
</span><span id="OntopVirtualize-310"><a href="#OntopVirtualize-310"><span class="linenos">310</span></a>
</span><span id="OntopVirtualize-311"><a href="#OntopVirtualize-311"><span class="linenos">311</span></a><span class="sd">        Parameters</span>
</span><span id="OntopVirtualize-312"><a href="#OntopVirtualize-312"><span class="linenos">312</span></a><span class="sd">        ----------</span>
</span><span id="OntopVirtualize-313"><a href="#OntopVirtualize-313"><span class="linenos">313</span></a><span class="sd">        data_path : str</span>
</span><span id="OntopVirtualize-314"><a href="#OntopVirtualize-314"><span class="linenos">314</span></a><span class="sd">            Path to the data directory of the case.</span>
</span><span id="OntopVirtualize-315"><a href="#OntopVirtualize-315"><span class="linenos">315</span></a><span class="sd">        config_path : str</span>
</span><span id="OntopVirtualize-316"><a href="#OntopVirtualize-316"><span class="linenos">316</span></a><span class="sd">            Path to the config directory of the case.</span>
</span><span id="OntopVirtualize-317"><a href="#OntopVirtualize-317"><span class="linenos">317</span></a><span class="sd">        directory : str</span>
</span><span id="OntopVirtualize-318"><a href="#OntopVirtualize-318"><span class="linenos">318</span></a><span class="sd">            Path to the directory to store logs.</span>
</span><span id="OntopVirtualize-319"><a href="#OntopVirtualize-319"><span class="linenos">319</span></a><span class="sd">        verbose : bool</span>
</span><span id="OntopVirtualize-320"><a href="#OntopVirtualize-320"><span class="linenos">320</span></a><span class="sd">            Enable verbose logs.</span>
</span><span id="OntopVirtualize-321"><a href="#OntopVirtualize-321"><span class="linenos">321</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="OntopVirtualize-322"><a href="#OntopVirtualize-322"><span class="linenos">322</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_data_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">data_path</span><span class="p">)</span>
</span><span id="OntopVirtualize-323"><a href="#OntopVirtualize-323"><span class="linenos">323</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_config_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">config_path</span><span class="p">)</span>
</span><span id="OntopVirtualize-324"><a href="#OntopVirtualize-324"><span class="linenos">324</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span> <span class="o">=</span> <span class="n">Logger</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="n">directory</span><span class="p">,</span> <span class="n">verbose</span><span class="p">)</span>
</span><span id="OntopVirtualize-325"><a href="#OntopVirtualize-325"><span class="linenos">325</span></a>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="s1">&#39;Ontop-Virtualize&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_data_path</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="p">,</span>
</span><span id="OntopVirtualize-326"><a href="#OntopVirtualize-326"><span class="linenos">326</span></a>                         <span class="s1">&#39;endpoint&#39;</span><span class="p">)</span>
</span><span id="OntopVirtualize-327"><a href="#OntopVirtualize-327"><span class="linenos">327</span></a>
</span><span id="OntopVirtualize-328"><a href="#OntopVirtualize-328"><span class="linenos">328</span></a>    <span class="k">def</span> <span class="nf">execute_mapping</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
</span><span id="OntopVirtualize-329"><a href="#OntopVirtualize-329"><span class="linenos">329</span></a>                        <span class="n">mapping_file</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="OntopVirtualize-330"><a href="#OntopVirtualize-330"><span class="linenos">330</span></a>                        <span class="n">serialization</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="OntopVirtualize-331"><a href="#OntopVirtualize-331"><span class="linenos">331</span></a>                        <span class="n">rdb_username</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="OntopVirtualize-332"><a href="#OntopVirtualize-332"><span class="linenos">332</span></a>                        <span class="n">rdb_password</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="OntopVirtualize-333"><a href="#OntopVirtualize-333"><span class="linenos">333</span></a>                        <span class="n">rdb_host</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="OntopVirtualize-334"><a href="#OntopVirtualize-334"><span class="linenos">334</span></a>                        <span class="n">rdb_port</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
</span><span id="OntopVirtualize-335"><a href="#OntopVirtualize-335"><span class="linenos">335</span></a>                        <span class="n">rdb_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="OntopVirtualize-336"><a href="#OntopVirtualize-336"><span class="linenos">336</span></a>                        <span class="n">rdb_type</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="OntopVirtualize-337"><a href="#OntopVirtualize-337"><span class="linenos">337</span></a>        <span class="sd">&quot;&quot;&quot;Start an Ontop SPARQL endpoint with a mapping.</span>
</span><span id="OntopVirtualize-338"><a href="#OntopVirtualize-338"><span class="linenos">338</span></a>
</span><span id="OntopVirtualize-339"><a href="#OntopVirtualize-339"><span class="linenos">339</span></a><span class="sd">        Only relational databases are supported by</span>
</span><span id="OntopVirtualize-340"><a href="#OntopVirtualize-340"><span class="linenos">340</span></a><span class="sd">        Ontop, thus the relational database parameters are mandantory.</span>
</span><span id="OntopVirtualize-341"><a href="#OntopVirtualize-341"><span class="linenos">341</span></a><span class="sd">        Ontop SPARQL endpoint supports the following serialization formats:</span>
</span><span id="OntopVirtualize-342"><a href="#OntopVirtualize-342"><span class="linenos">342</span></a><span class="sd">        - N-Triples (Ontop v5+)</span>
</span><span id="OntopVirtualize-343"><a href="#OntopVirtualize-343"><span class="linenos">343</span></a><span class="sd">        - N-Quads (Ontop v5+)</span>
</span><span id="OntopVirtualize-344"><a href="#OntopVirtualize-344"><span class="linenos">344</span></a><span class="sd">        - Turtle</span>
</span><span id="OntopVirtualize-345"><a href="#OntopVirtualize-345"><span class="linenos">345</span></a><span class="sd">        - RDF/JSON</span>
</span><span id="OntopVirtualize-346"><a href="#OntopVirtualize-346"><span class="linenos">346</span></a><span class="sd">        - JSON-LD</span>
</span><span id="OntopVirtualize-347"><a href="#OntopVirtualize-347"><span class="linenos">347</span></a><span class="sd">        - CSV</span>
</span><span id="OntopVirtualize-348"><a href="#OntopVirtualize-348"><span class="linenos">348</span></a>
</span><span id="OntopVirtualize-349"><a href="#OntopVirtualize-349"><span class="linenos">349</span></a><span class="sd">        Parameters</span>
</span><span id="OntopVirtualize-350"><a href="#OntopVirtualize-350"><span class="linenos">350</span></a><span class="sd">        ----------</span>
</span><span id="OntopVirtualize-351"><a href="#OntopVirtualize-351"><span class="linenos">351</span></a><span class="sd">        mapping_file : str</span>
</span><span id="OntopVirtualize-352"><a href="#OntopVirtualize-352"><span class="linenos">352</span></a><span class="sd">            Path to the mapping file to execute.</span>
</span><span id="OntopVirtualize-353"><a href="#OntopVirtualize-353"><span class="linenos">353</span></a><span class="sd">        serialization : str</span>
</span><span id="OntopVirtualize-354"><a href="#OntopVirtualize-354"><span class="linenos">354</span></a><span class="sd">            Serialization format to use.</span>
</span><span id="OntopVirtualize-355"><a href="#OntopVirtualize-355"><span class="linenos">355</span></a><span class="sd">        rdb_username : str</span>
</span><span id="OntopVirtualize-356"><a href="#OntopVirtualize-356"><span class="linenos">356</span></a><span class="sd">            Username for the database.</span>
</span><span id="OntopVirtualize-357"><a href="#OntopVirtualize-357"><span class="linenos">357</span></a><span class="sd">        rdb_password : str</span>
</span><span id="OntopVirtualize-358"><a href="#OntopVirtualize-358"><span class="linenos">358</span></a><span class="sd">            Password for the database.</span>
</span><span id="OntopVirtualize-359"><a href="#OntopVirtualize-359"><span class="linenos">359</span></a><span class="sd">        rdb_host : str</span>
</span><span id="OntopVirtualize-360"><a href="#OntopVirtualize-360"><span class="linenos">360</span></a><span class="sd">            Hostname for the database.</span>
</span><span id="OntopVirtualize-361"><a href="#OntopVirtualize-361"><span class="linenos">361</span></a><span class="sd">        rdb_port : int</span>
</span><span id="OntopVirtualize-362"><a href="#OntopVirtualize-362"><span class="linenos">362</span></a><span class="sd">            Port for the database.</span>
</span><span id="OntopVirtualize-363"><a href="#OntopVirtualize-363"><span class="linenos">363</span></a><span class="sd">        rdb_name : str</span>
</span><span id="OntopVirtualize-364"><a href="#OntopVirtualize-364"><span class="linenos">364</span></a><span class="sd">            Database name for the database.</span>
</span><span id="OntopVirtualize-365"><a href="#OntopVirtualize-365"><span class="linenos">365</span></a><span class="sd">        rdb_type : str</span>
</span><span id="OntopVirtualize-366"><a href="#OntopVirtualize-366"><span class="linenos">366</span></a><span class="sd">            Database type.</span>
</span><span id="OntopVirtualize-367"><a href="#OntopVirtualize-367"><span class="linenos">367</span></a>
</span><span id="OntopVirtualize-368"><a href="#OntopVirtualize-368"><span class="linenos">368</span></a><span class="sd">        Returns</span>
</span><span id="OntopVirtualize-369"><a href="#OntopVirtualize-369"><span class="linenos">369</span></a><span class="sd">        -------</span>
</span><span id="OntopVirtualize-370"><a href="#OntopVirtualize-370"><span class="linenos">370</span></a><span class="sd">        success : bool</span>
</span><span id="OntopVirtualize-371"><a href="#OntopVirtualize-371"><span class="linenos">371</span></a><span class="sd">            Whether the execution was successfull or not.</span>
</span><span id="OntopVirtualize-372"><a href="#OntopVirtualize-372"><span class="linenos">372</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="OntopVirtualize-373"><a href="#OntopVirtualize-373"><span class="linenos">373</span></a>        <span class="n">config_file</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_data_path</span><span class="si">}</span><span class="s1">/</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">root_mount_directory</span><span class="si">}</span><span class="s1">&#39;</span> <span class="o">+</span> \
</span><span id="OntopVirtualize-374"><a href="#OntopVirtualize-374"><span class="linenos">374</span></a>                      <span class="s1">&#39;/config.properties&#39;</span>
</span><span id="OntopVirtualize-375"><a href="#OntopVirtualize-375"><span class="linenos">375</span></a>        <span class="n">arguments</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;--cors-allowed-origins=*&#39;</span><span class="p">,</span> <span class="s1">&#39;--port=8888&#39;</span><span class="p">]</span>
</span><span id="OntopVirtualize-376"><a href="#OntopVirtualize-376"><span class="linenos">376</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_headers</span><span class="p">[</span><span class="s1">&#39;ntriples&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;Accept&#39;</span><span class="p">:</span> <span class="s1">&#39;application/n-triples&#39;</span><span class="p">}</span>
</span><span id="OntopVirtualize-377"><a href="#OntopVirtualize-377"><span class="linenos">377</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_headers</span><span class="p">[</span><span class="s1">&#39;nquads&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;Accept&#39;</span><span class="p">:</span> <span class="s1">&#39;application/n-quads&#39;</span><span class="p">}</span>
</span><span id="OntopVirtualize-378"><a href="#OntopVirtualize-378"><span class="linenos">378</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_headers</span><span class="p">[</span><span class="s1">&#39;turtle&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;Accept&#39;</span><span class="p">:</span> <span class="s1">&#39;text/turtle&#39;</span><span class="p">}</span>
</span><span id="OntopVirtualize-379"><a href="#OntopVirtualize-379"><span class="linenos">379</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_headers</span><span class="p">[</span><span class="s1">&#39;rdfjson&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;Accept&#39;</span><span class="p">:</span> <span class="s1">&#39;application/rdf+json&#39;</span><span class="p">}</span>
</span><span id="OntopVirtualize-380"><a href="#OntopVirtualize-380"><span class="linenos">380</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_headers</span><span class="p">[</span><span class="s1">&#39;rdfxml&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;Accept&#39;</span><span class="p">:</span> <span class="s1">&#39;application/rdf+xml&#39;</span><span class="p">}</span>
</span><span id="OntopVirtualize-381"><a href="#OntopVirtualize-381"><span class="linenos">381</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_headers</span><span class="p">[</span><span class="s1">&#39;jsonld&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;Accept&#39;</span><span class="p">:</span> <span class="s1">&#39;application/ld+json&#39;</span><span class="p">}</span>
</span><span id="OntopVirtualize-382"><a href="#OntopVirtualize-382"><span class="linenos">382</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_headers</span><span class="p">[</span><span class="s1">&#39;csv&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;Accept&#39;</span><span class="p">:</span> <span class="s1">&#39;text/csv&#39;</span><span class="p">}</span>
</span><span id="OntopVirtualize-383"><a href="#OntopVirtualize-383"><span class="linenos">383</span></a>        <span class="k">if</span> <span class="n">serialization</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_headers</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
</span><span id="OntopVirtualize-384"><a href="#OntopVirtualize-384"><span class="linenos">384</span></a>            <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;Unsupported serialization format &#39;</span> <span class="o">+</span> \
</span><span id="OntopVirtualize-385"><a href="#OntopVirtualize-385"><span class="linenos">385</span></a>                  <span class="sa">f</span><span class="s1">&#39;&quot;</span><span class="si">{</span><span class="n">serialization</span><span class="si">}</span><span class="s1">&quot; for Ontop&#39;</span>
</span><span id="OntopVirtualize-386"><a href="#OntopVirtualize-386"><span class="linenos">386</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
</span><span id="OntopVirtualize-387"><a href="#OntopVirtualize-387"><span class="linenos">387</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
</span><span id="OntopVirtualize-388"><a href="#OntopVirtualize-388"><span class="linenos">388</span></a>        <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">_execute_mapping</span><span class="p">(</span><span class="n">config_file</span><span class="p">,</span> <span class="n">arguments</span><span class="p">,</span>
</span><span id="OntopVirtualize-389"><a href="#OntopVirtualize-389"><span class="linenos">389</span></a>                                        <span class="n">mapping_file</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="n">rdb_username</span><span class="p">,</span>
</span><span id="OntopVirtualize-390"><a href="#OntopVirtualize-390"><span class="linenos">390</span></a>                                        <span class="n">rdb_password</span><span class="p">,</span> <span class="n">rdb_host</span><span class="p">,</span> <span class="n">rdb_port</span><span class="p">,</span>
</span><span id="OntopVirtualize-391"><a href="#OntopVirtualize-391"><span class="linenos">391</span></a>                                        <span class="n">rdb_name</span><span class="p">,</span> <span class="n">rdb_type</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>OntopVirtualize container for setting up an Ontop SPARQL endpoint.</p>
</div>


                            <div id="OntopVirtualize.__init__" class="classattr">
                                        <input id="OntopVirtualize.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">OntopVirtualize</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">data_path</span><span class="p">:</span> <span class="nb">str</span>, </span><span class="param"><span class="n">config_path</span><span class="p">:</span> <span class="nb">str</span>, </span><span class="param"><span class="n">directory</span><span class="p">:</span> <span class="nb">str</span>, </span><span class="param"><span class="n">verbose</span><span class="p">:</span> <span class="nb">bool</span></span>)</span>

                <label class="view-source-button" for="OntopVirtualize.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#OntopVirtualize.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="OntopVirtualize.__init__-307"><a href="#OntopVirtualize.__init__-307"><span class="linenos">307</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data_path</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">config_path</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">directory</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="OntopVirtualize.__init__-308"><a href="#OntopVirtualize.__init__-308"><span class="linenos">308</span></a>                 <span class="n">verbose</span><span class="p">:</span> <span class="nb">bool</span><span class="p">):</span>
</span><span id="OntopVirtualize.__init__-309"><a href="#OntopVirtualize.__init__-309"><span class="linenos">309</span></a>        <span class="sd">&quot;&quot;&quot;Creates an instance of the OntopVirtualize class.</span>
</span><span id="OntopVirtualize.__init__-310"><a href="#OntopVirtualize.__init__-310"><span class="linenos">310</span></a>
</span><span id="OntopVirtualize.__init__-311"><a href="#OntopVirtualize.__init__-311"><span class="linenos">311</span></a><span class="sd">        Parameters</span>
</span><span id="OntopVirtualize.__init__-312"><a href="#OntopVirtualize.__init__-312"><span class="linenos">312</span></a><span class="sd">        ----------</span>
</span><span id="OntopVirtualize.__init__-313"><a href="#OntopVirtualize.__init__-313"><span class="linenos">313</span></a><span class="sd">        data_path : str</span>
</span><span id="OntopVirtualize.__init__-314"><a href="#OntopVirtualize.__init__-314"><span class="linenos">314</span></a><span class="sd">            Path to the data directory of the case.</span>
</span><span id="OntopVirtualize.__init__-315"><a href="#OntopVirtualize.__init__-315"><span class="linenos">315</span></a><span class="sd">        config_path : str</span>
</span><span id="OntopVirtualize.__init__-316"><a href="#OntopVirtualize.__init__-316"><span class="linenos">316</span></a><span class="sd">            Path to the config directory of the case.</span>
</span><span id="OntopVirtualize.__init__-317"><a href="#OntopVirtualize.__init__-317"><span class="linenos">317</span></a><span class="sd">        directory : str</span>
</span><span id="OntopVirtualize.__init__-318"><a href="#OntopVirtualize.__init__-318"><span class="linenos">318</span></a><span class="sd">            Path to the directory to store logs.</span>
</span><span id="OntopVirtualize.__init__-319"><a href="#OntopVirtualize.__init__-319"><span class="linenos">319</span></a><span class="sd">        verbose : bool</span>
</span><span id="OntopVirtualize.__init__-320"><a href="#OntopVirtualize.__init__-320"><span class="linenos">320</span></a><span class="sd">            Enable verbose logs.</span>
</span><span id="OntopVirtualize.__init__-321"><a href="#OntopVirtualize.__init__-321"><span class="linenos">321</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="OntopVirtualize.__init__-322"><a href="#OntopVirtualize.__init__-322"><span class="linenos">322</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_data_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">data_path</span><span class="p">)</span>
</span><span id="OntopVirtualize.__init__-323"><a href="#OntopVirtualize.__init__-323"><span class="linenos">323</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_config_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">config_path</span><span class="p">)</span>
</span><span id="OntopVirtualize.__init__-324"><a href="#OntopVirtualize.__init__-324"><span class="linenos">324</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span> <span class="o">=</span> <span class="n">Logger</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="n">directory</span><span class="p">,</span> <span class="n">verbose</span><span class="p">)</span>
</span><span id="OntopVirtualize.__init__-325"><a href="#OntopVirtualize.__init__-325"><span class="linenos">325</span></a>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="s1">&#39;Ontop-Virtualize&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_data_path</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="p">,</span>
</span><span id="OntopVirtualize.__init__-326"><a href="#OntopVirtualize.__init__-326"><span class="linenos">326</span></a>                         <span class="s1">&#39;endpoint&#39;</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Creates an instance of the OntopVirtualize class.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>data_path</strong> (str):
Path to the data directory of the case.</li>
<li><strong>config_path</strong> (str):
Path to the config directory of the case.</li>
<li><strong>directory</strong> (str):
Path to the directory to store logs.</li>
<li><strong>verbose</strong> (bool):
Enable verbose logs.</li>
</ul>
</div>


                            </div>
                            <div id="OntopVirtualize.execute_mapping" class="classattr">
                                        <input id="OntopVirtualize.execute_mapping-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">execute_mapping</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">mapping_file</span><span class="p">:</span> <span class="nb">str</span>,</span><span class="param">	<span class="n">serialization</span><span class="p">:</span> <span class="nb">str</span>,</span><span class="param">	<span class="n">rdb_username</span><span class="p">:</span> <span class="nb">str</span>,</span><span class="param">	<span class="n">rdb_password</span><span class="p">:</span> <span class="nb">str</span>,</span><span class="param">	<span class="n">rdb_host</span><span class="p">:</span> <span class="nb">str</span>,</span><span class="param">	<span class="n">rdb_port</span><span class="p">:</span> <span class="nb">int</span>,</span><span class="param">	<span class="n">rdb_name</span><span class="p">:</span> <span class="nb">str</span>,</span><span class="param">	<span class="n">rdb_type</span><span class="p">:</span> <span class="nb">str</span></span><span class="return-annotation">) -> <span class="nb">bool</span>:</span></span>

                <label class="view-source-button" for="OntopVirtualize.execute_mapping-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#OntopVirtualize.execute_mapping"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="OntopVirtualize.execute_mapping-328"><a href="#OntopVirtualize.execute_mapping-328"><span class="linenos">328</span></a>    <span class="k">def</span> <span class="nf">execute_mapping</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
</span><span id="OntopVirtualize.execute_mapping-329"><a href="#OntopVirtualize.execute_mapping-329"><span class="linenos">329</span></a>                        <span class="n">mapping_file</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="OntopVirtualize.execute_mapping-330"><a href="#OntopVirtualize.execute_mapping-330"><span class="linenos">330</span></a>                        <span class="n">serialization</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="OntopVirtualize.execute_mapping-331"><a href="#OntopVirtualize.execute_mapping-331"><span class="linenos">331</span></a>                        <span class="n">rdb_username</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="OntopVirtualize.execute_mapping-332"><a href="#OntopVirtualize.execute_mapping-332"><span class="linenos">332</span></a>                        <span class="n">rdb_password</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="OntopVirtualize.execute_mapping-333"><a href="#OntopVirtualize.execute_mapping-333"><span class="linenos">333</span></a>                        <span class="n">rdb_host</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="OntopVirtualize.execute_mapping-334"><a href="#OntopVirtualize.execute_mapping-334"><span class="linenos">334</span></a>                        <span class="n">rdb_port</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
</span><span id="OntopVirtualize.execute_mapping-335"><a href="#OntopVirtualize.execute_mapping-335"><span class="linenos">335</span></a>                        <span class="n">rdb_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="OntopVirtualize.execute_mapping-336"><a href="#OntopVirtualize.execute_mapping-336"><span class="linenos">336</span></a>                        <span class="n">rdb_type</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="OntopVirtualize.execute_mapping-337"><a href="#OntopVirtualize.execute_mapping-337"><span class="linenos">337</span></a>        <span class="sd">&quot;&quot;&quot;Start an Ontop SPARQL endpoint with a mapping.</span>
</span><span id="OntopVirtualize.execute_mapping-338"><a href="#OntopVirtualize.execute_mapping-338"><span class="linenos">338</span></a>
</span><span id="OntopVirtualize.execute_mapping-339"><a href="#OntopVirtualize.execute_mapping-339"><span class="linenos">339</span></a><span class="sd">        Only relational databases are supported by</span>
</span><span id="OntopVirtualize.execute_mapping-340"><a href="#OntopVirtualize.execute_mapping-340"><span class="linenos">340</span></a><span class="sd">        Ontop, thus the relational database parameters are mandantory.</span>
</span><span id="OntopVirtualize.execute_mapping-341"><a href="#OntopVirtualize.execute_mapping-341"><span class="linenos">341</span></a><span class="sd">        Ontop SPARQL endpoint supports the following serialization formats:</span>
</span><span id="OntopVirtualize.execute_mapping-342"><a href="#OntopVirtualize.execute_mapping-342"><span class="linenos">342</span></a><span class="sd">        - N-Triples (Ontop v5+)</span>
</span><span id="OntopVirtualize.execute_mapping-343"><a href="#OntopVirtualize.execute_mapping-343"><span class="linenos">343</span></a><span class="sd">        - N-Quads (Ontop v5+)</span>
</span><span id="OntopVirtualize.execute_mapping-344"><a href="#OntopVirtualize.execute_mapping-344"><span class="linenos">344</span></a><span class="sd">        - Turtle</span>
</span><span id="OntopVirtualize.execute_mapping-345"><a href="#OntopVirtualize.execute_mapping-345"><span class="linenos">345</span></a><span class="sd">        - RDF/JSON</span>
</span><span id="OntopVirtualize.execute_mapping-346"><a href="#OntopVirtualize.execute_mapping-346"><span class="linenos">346</span></a><span class="sd">        - JSON-LD</span>
</span><span id="OntopVirtualize.execute_mapping-347"><a href="#OntopVirtualize.execute_mapping-347"><span class="linenos">347</span></a><span class="sd">        - CSV</span>
</span><span id="OntopVirtualize.execute_mapping-348"><a href="#OntopVirtualize.execute_mapping-348"><span class="linenos">348</span></a>
</span><span id="OntopVirtualize.execute_mapping-349"><a href="#OntopVirtualize.execute_mapping-349"><span class="linenos">349</span></a><span class="sd">        Parameters</span>
</span><span id="OntopVirtualize.execute_mapping-350"><a href="#OntopVirtualize.execute_mapping-350"><span class="linenos">350</span></a><span class="sd">        ----------</span>
</span><span id="OntopVirtualize.execute_mapping-351"><a href="#OntopVirtualize.execute_mapping-351"><span class="linenos">351</span></a><span class="sd">        mapping_file : str</span>
</span><span id="OntopVirtualize.execute_mapping-352"><a href="#OntopVirtualize.execute_mapping-352"><span class="linenos">352</span></a><span class="sd">            Path to the mapping file to execute.</span>
</span><span id="OntopVirtualize.execute_mapping-353"><a href="#OntopVirtualize.execute_mapping-353"><span class="linenos">353</span></a><span class="sd">        serialization : str</span>
</span><span id="OntopVirtualize.execute_mapping-354"><a href="#OntopVirtualize.execute_mapping-354"><span class="linenos">354</span></a><span class="sd">            Serialization format to use.</span>
</span><span id="OntopVirtualize.execute_mapping-355"><a href="#OntopVirtualize.execute_mapping-355"><span class="linenos">355</span></a><span class="sd">        rdb_username : str</span>
</span><span id="OntopVirtualize.execute_mapping-356"><a href="#OntopVirtualize.execute_mapping-356"><span class="linenos">356</span></a><span class="sd">            Username for the database.</span>
</span><span id="OntopVirtualize.execute_mapping-357"><a href="#OntopVirtualize.execute_mapping-357"><span class="linenos">357</span></a><span class="sd">        rdb_password : str</span>
</span><span id="OntopVirtualize.execute_mapping-358"><a href="#OntopVirtualize.execute_mapping-358"><span class="linenos">358</span></a><span class="sd">            Password for the database.</span>
</span><span id="OntopVirtualize.execute_mapping-359"><a href="#OntopVirtualize.execute_mapping-359"><span class="linenos">359</span></a><span class="sd">        rdb_host : str</span>
</span><span id="OntopVirtualize.execute_mapping-360"><a href="#OntopVirtualize.execute_mapping-360"><span class="linenos">360</span></a><span class="sd">            Hostname for the database.</span>
</span><span id="OntopVirtualize.execute_mapping-361"><a href="#OntopVirtualize.execute_mapping-361"><span class="linenos">361</span></a><span class="sd">        rdb_port : int</span>
</span><span id="OntopVirtualize.execute_mapping-362"><a href="#OntopVirtualize.execute_mapping-362"><span class="linenos">362</span></a><span class="sd">            Port for the database.</span>
</span><span id="OntopVirtualize.execute_mapping-363"><a href="#OntopVirtualize.execute_mapping-363"><span class="linenos">363</span></a><span class="sd">        rdb_name : str</span>
</span><span id="OntopVirtualize.execute_mapping-364"><a href="#OntopVirtualize.execute_mapping-364"><span class="linenos">364</span></a><span class="sd">            Database name for the database.</span>
</span><span id="OntopVirtualize.execute_mapping-365"><a href="#OntopVirtualize.execute_mapping-365"><span class="linenos">365</span></a><span class="sd">        rdb_type : str</span>
</span><span id="OntopVirtualize.execute_mapping-366"><a href="#OntopVirtualize.execute_mapping-366"><span class="linenos">366</span></a><span class="sd">            Database type.</span>
</span><span id="OntopVirtualize.execute_mapping-367"><a href="#OntopVirtualize.execute_mapping-367"><span class="linenos">367</span></a>
</span><span id="OntopVirtualize.execute_mapping-368"><a href="#OntopVirtualize.execute_mapping-368"><span class="linenos">368</span></a><span class="sd">        Returns</span>
</span><span id="OntopVirtualize.execute_mapping-369"><a href="#OntopVirtualize.execute_mapping-369"><span class="linenos">369</span></a><span class="sd">        -------</span>
</span><span id="OntopVirtualize.execute_mapping-370"><a href="#OntopVirtualize.execute_mapping-370"><span class="linenos">370</span></a><span class="sd">        success : bool</span>
</span><span id="OntopVirtualize.execute_mapping-371"><a href="#OntopVirtualize.execute_mapping-371"><span class="linenos">371</span></a><span class="sd">            Whether the execution was successfull or not.</span>
</span><span id="OntopVirtualize.execute_mapping-372"><a href="#OntopVirtualize.execute_mapping-372"><span class="linenos">372</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="OntopVirtualize.execute_mapping-373"><a href="#OntopVirtualize.execute_mapping-373"><span class="linenos">373</span></a>        <span class="n">config_file</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_data_path</span><span class="si">}</span><span class="s1">/</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">root_mount_directory</span><span class="si">}</span><span class="s1">&#39;</span> <span class="o">+</span> \
</span><span id="OntopVirtualize.execute_mapping-374"><a href="#OntopVirtualize.execute_mapping-374"><span class="linenos">374</span></a>                      <span class="s1">&#39;/config.properties&#39;</span>
</span><span id="OntopVirtualize.execute_mapping-375"><a href="#OntopVirtualize.execute_mapping-375"><span class="linenos">375</span></a>        <span class="n">arguments</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;--cors-allowed-origins=*&#39;</span><span class="p">,</span> <span class="s1">&#39;--port=8888&#39;</span><span class="p">]</span>
</span><span id="OntopVirtualize.execute_mapping-376"><a href="#OntopVirtualize.execute_mapping-376"><span class="linenos">376</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_headers</span><span class="p">[</span><span class="s1">&#39;ntriples&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;Accept&#39;</span><span class="p">:</span> <span class="s1">&#39;application/n-triples&#39;</span><span class="p">}</span>
</span><span id="OntopVirtualize.execute_mapping-377"><a href="#OntopVirtualize.execute_mapping-377"><span class="linenos">377</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_headers</span><span class="p">[</span><span class="s1">&#39;nquads&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;Accept&#39;</span><span class="p">:</span> <span class="s1">&#39;application/n-quads&#39;</span><span class="p">}</span>
</span><span id="OntopVirtualize.execute_mapping-378"><a href="#OntopVirtualize.execute_mapping-378"><span class="linenos">378</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_headers</span><span class="p">[</span><span class="s1">&#39;turtle&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;Accept&#39;</span><span class="p">:</span> <span class="s1">&#39;text/turtle&#39;</span><span class="p">}</span>
</span><span id="OntopVirtualize.execute_mapping-379"><a href="#OntopVirtualize.execute_mapping-379"><span class="linenos">379</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_headers</span><span class="p">[</span><span class="s1">&#39;rdfjson&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;Accept&#39;</span><span class="p">:</span> <span class="s1">&#39;application/rdf+json&#39;</span><span class="p">}</span>
</span><span id="OntopVirtualize.execute_mapping-380"><a href="#OntopVirtualize.execute_mapping-380"><span class="linenos">380</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_headers</span><span class="p">[</span><span class="s1">&#39;rdfxml&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;Accept&#39;</span><span class="p">:</span> <span class="s1">&#39;application/rdf+xml&#39;</span><span class="p">}</span>
</span><span id="OntopVirtualize.execute_mapping-381"><a href="#OntopVirtualize.execute_mapping-381"><span class="linenos">381</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_headers</span><span class="p">[</span><span class="s1">&#39;jsonld&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;Accept&#39;</span><span class="p">:</span> <span class="s1">&#39;application/ld+json&#39;</span><span class="p">}</span>
</span><span id="OntopVirtualize.execute_mapping-382"><a href="#OntopVirtualize.execute_mapping-382"><span class="linenos">382</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_headers</span><span class="p">[</span><span class="s1">&#39;csv&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;Accept&#39;</span><span class="p">:</span> <span class="s1">&#39;text/csv&#39;</span><span class="p">}</span>
</span><span id="OntopVirtualize.execute_mapping-383"><a href="#OntopVirtualize.execute_mapping-383"><span class="linenos">383</span></a>        <span class="k">if</span> <span class="n">serialization</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_headers</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
</span><span id="OntopVirtualize.execute_mapping-384"><a href="#OntopVirtualize.execute_mapping-384"><span class="linenos">384</span></a>            <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;Unsupported serialization format &#39;</span> <span class="o">+</span> \
</span><span id="OntopVirtualize.execute_mapping-385"><a href="#OntopVirtualize.execute_mapping-385"><span class="linenos">385</span></a>                  <span class="sa">f</span><span class="s1">&#39;&quot;</span><span class="si">{</span><span class="n">serialization</span><span class="si">}</span><span class="s1">&quot; for Ontop&#39;</span>
</span><span id="OntopVirtualize.execute_mapping-386"><a href="#OntopVirtualize.execute_mapping-386"><span class="linenos">386</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
</span><span id="OntopVirtualize.execute_mapping-387"><a href="#OntopVirtualize.execute_mapping-387"><span class="linenos">387</span></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
</span><span id="OntopVirtualize.execute_mapping-388"><a href="#OntopVirtualize.execute_mapping-388"><span class="linenos">388</span></a>        <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">_execute_mapping</span><span class="p">(</span><span class="n">config_file</span><span class="p">,</span> <span class="n">arguments</span><span class="p">,</span>
</span><span id="OntopVirtualize.execute_mapping-389"><a href="#OntopVirtualize.execute_mapping-389"><span class="linenos">389</span></a>                                        <span class="n">mapping_file</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="n">rdb_username</span><span class="p">,</span>
</span><span id="OntopVirtualize.execute_mapping-390"><a href="#OntopVirtualize.execute_mapping-390"><span class="linenos">390</span></a>                                        <span class="n">rdb_password</span><span class="p">,</span> <span class="n">rdb_host</span><span class="p">,</span> <span class="n">rdb_port</span><span class="p">,</span>
</span><span id="OntopVirtualize.execute_mapping-391"><a href="#OntopVirtualize.execute_mapping-391"><span class="linenos">391</span></a>                                        <span class="n">rdb_name</span><span class="p">,</span> <span class="n">rdb_type</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Start an Ontop SPARQL endpoint with a mapping.</p>

<p>Only relational databases are supported by
Ontop, thus the relational database parameters are mandantory.
Ontop SPARQL endpoint supports the following serialization formats:</p>

<ul>
<li>N-Triples (Ontop v5+)</li>
<li>N-Quads (Ontop v5+)</li>
<li>Turtle</li>
<li>RDF/JSON</li>
<li>JSON-LD</li>
<li>CSV</li>
</ul>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>mapping_file</strong> (str):
Path to the mapping file to execute.</li>
<li><strong>serialization</strong> (str):
Serialization format to use.</li>
<li><strong>rdb_username</strong> (str):
Username for the database.</li>
<li><strong>rdb_password</strong> (str):
Password for the database.</li>
<li><strong>rdb_host</strong> (str):
Hostname for the database.</li>
<li><strong>rdb_port</strong> (int):
Port for the database.</li>
<li><strong>rdb_name</strong> (str):
Database name for the database.</li>
<li><strong>rdb_type</strong> (str):
Database type.</li>
</ul>

<h6 id="returns">Returns</h6>

<ul>
<li><strong>success</strong> (bool):
Whether the execution was successfull or not.</li>
</ul>
</div>


                            </div>
                            <div class="inherited">
                                <h5>Inherited Members</h5>
                                <dl>
                                    <div><dt><a href="#Ontop">Ontop</a></dt>
                                <dd id="OntopVirtualize.root_mount_directory" class="variable"><a href="#Ontop.root_mount_directory">root_mount_directory</a></dd>
                <dd id="OntopVirtualize.endpoint" class="variable"><a href="#Ontop.endpoint">endpoint</a></dd>
                <dd id="OntopVirtualize.headers" class="variable"><a href="#Ontop.headers">headers</a></dd>

            </div>
            <div><dt><a href="container.html#Container">bench_executor.container.Container</a></dt>
                                <dd id="OntopVirtualize.started" class="variable"><a href="container.html#Container.started">started</a></dd>
                <dd id="OntopVirtualize.name" class="variable"><a href="container.html#Container.name">name</a></dd>
                <dd id="OntopVirtualize.run" class="function"><a href="container.html#Container.run">run</a></dd>
                <dd id="OntopVirtualize.exec" class="function"><a href="container.html#Container.exec">exec</a></dd>
                <dd id="OntopVirtualize.run_and_wait_for_log" class="function"><a href="container.html#Container.run_and_wait_for_log">run_and_wait_for_log</a></dd>
                <dd id="OntopVirtualize.run_and_wait_for_exit" class="function"><a href="container.html#Container.run_and_wait_for_exit">run_and_wait_for_exit</a></dd>
                <dd id="OntopVirtualize.stop" class="function"><a href="container.html#Container.stop">stop</a></dd>

            </div>
                                </dl>
                            </div>
                </section>
                <section id="OntopMaterialize">
                            <input id="OntopMaterialize-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">OntopMaterialize</span><wbr>(<span class="base"><a href="#Ontop">Ontop</a></span>):

                <label class="view-source-button" for="OntopMaterialize-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#OntopMaterialize"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="OntopMaterialize-394"><a href="#OntopMaterialize-394"><span class="linenos">394</span></a><span class="k">class</span> <span class="nc">OntopMaterialize</span><span class="p">(</span><span class="n">Ontop</span><span class="p">):</span>
</span><span id="OntopMaterialize-395"><a href="#OntopMaterialize-395"><span class="linenos">395</span></a>    <span class="sd">&quot;&quot;&quot;OntopMaterialize container to execute a R2RML mapping.&quot;&quot;&quot;</span>
</span><span id="OntopMaterialize-396"><a href="#OntopMaterialize-396"><span class="linenos">396</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data_path</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">config_path</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">directory</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="OntopMaterialize-397"><a href="#OntopMaterialize-397"><span class="linenos">397</span></a>                 <span class="n">verbose</span><span class="p">:</span> <span class="nb">bool</span><span class="p">):</span>
</span><span id="OntopMaterialize-398"><a href="#OntopMaterialize-398"><span class="linenos">398</span></a>        <span class="sd">&quot;&quot;&quot;Creates an instance of the OntopMaterialize class.</span>
</span><span id="OntopMaterialize-399"><a href="#OntopMaterialize-399"><span class="linenos">399</span></a>
</span><span id="OntopMaterialize-400"><a href="#OntopMaterialize-400"><span class="linenos">400</span></a><span class="sd">        Parameters</span>
</span><span id="OntopMaterialize-401"><a href="#OntopMaterialize-401"><span class="linenos">401</span></a><span class="sd">        ----------</span>
</span><span id="OntopMaterialize-402"><a href="#OntopMaterialize-402"><span class="linenos">402</span></a><span class="sd">        data_path : str</span>
</span><span id="OntopMaterialize-403"><a href="#OntopMaterialize-403"><span class="linenos">403</span></a><span class="sd">            Path to the data directory of the case.</span>
</span><span id="OntopMaterialize-404"><a href="#OntopMaterialize-404"><span class="linenos">404</span></a><span class="sd">        config_path : str</span>
</span><span id="OntopMaterialize-405"><a href="#OntopMaterialize-405"><span class="linenos">405</span></a><span class="sd">            Path to the config directory of the case.</span>
</span><span id="OntopMaterialize-406"><a href="#OntopMaterialize-406"><span class="linenos">406</span></a><span class="sd">        directory : str</span>
</span><span id="OntopMaterialize-407"><a href="#OntopMaterialize-407"><span class="linenos">407</span></a><span class="sd">            Path to the directory to store logs.</span>
</span><span id="OntopMaterialize-408"><a href="#OntopMaterialize-408"><span class="linenos">408</span></a><span class="sd">        verbose : bool</span>
</span><span id="OntopMaterialize-409"><a href="#OntopMaterialize-409"><span class="linenos">409</span></a><span class="sd">            Enable verbose logs.</span>
</span><span id="OntopMaterialize-410"><a href="#OntopMaterialize-410"><span class="linenos">410</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="OntopMaterialize-411"><a href="#OntopMaterialize-411"><span class="linenos">411</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_data_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">data_path</span><span class="p">)</span>
</span><span id="OntopMaterialize-412"><a href="#OntopMaterialize-412"><span class="linenos">412</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_config_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">config_path</span><span class="p">)</span>
</span><span id="OntopMaterialize-413"><a href="#OntopMaterialize-413"><span class="linenos">413</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span> <span class="o">=</span> <span class="n">Logger</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="n">directory</span><span class="p">,</span> <span class="n">verbose</span><span class="p">)</span>
</span><span id="OntopMaterialize-414"><a href="#OntopMaterialize-414"><span class="linenos">414</span></a>        <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_data_path</span><span class="p">,</span> <span class="s1">&#39;ontopmaterialize&#39;</span><span class="p">),</span>
</span><span id="OntopMaterialize-415"><a href="#OntopMaterialize-415"><span class="linenos">415</span></a>                    <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="OntopMaterialize-416"><a href="#OntopMaterialize-416"><span class="linenos">416</span></a>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="s1">&#39;Ontop-Materialize&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_data_path</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="p">,</span>
</span><span id="OntopMaterialize-417"><a href="#OntopMaterialize-417"><span class="linenos">417</span></a>                         <span class="s1">&#39;materialize&#39;</span><span class="p">)</span>
</span><span id="OntopMaterialize-418"><a href="#OntopMaterialize-418"><span class="linenos">418</span></a>
</span><span id="OntopMaterialize-419"><a href="#OntopMaterialize-419"><span class="linenos">419</span></a>    <span class="nd">@timeout</span><span class="p">(</span><span class="n">TIMEOUT</span><span class="p">)</span>
</span><span id="OntopMaterialize-420"><a href="#OntopMaterialize-420"><span class="linenos">420</span></a>    <span class="k">def</span> <span class="nf">_execute_mapping_with_timeout</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mapping_file</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="OntopMaterialize-421"><a href="#OntopMaterialize-421"><span class="linenos">421</span></a>                                      <span class="n">output_file</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="OntopMaterialize-422"><a href="#OntopMaterialize-422"><span class="linenos">422</span></a>                                      <span class="n">serialization</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="OntopMaterialize-423"><a href="#OntopMaterialize-423"><span class="linenos">423</span></a>                                      <span class="n">rdb_username</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="OntopMaterialize-424"><a href="#OntopMaterialize-424"><span class="linenos">424</span></a>                                      <span class="n">rdb_password</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="OntopMaterialize-425"><a href="#OntopMaterialize-425"><span class="linenos">425</span></a>                                      <span class="n">rdb_host</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="OntopMaterialize-426"><a href="#OntopMaterialize-426"><span class="linenos">426</span></a>                                      <span class="n">rdb_port</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
</span><span id="OntopMaterialize-427"><a href="#OntopMaterialize-427"><span class="linenos">427</span></a>                                      <span class="n">rdb_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="OntopMaterialize-428"><a href="#OntopMaterialize-428"><span class="linenos">428</span></a>                                      <span class="n">rdb_type</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="OntopMaterialize-429"><a href="#OntopMaterialize-429"><span class="linenos">429</span></a>        <span class="sd">&quot;&quot;&quot;Execute a mapping with a provided timeout.</span>
</span><span id="OntopMaterialize-430"><a href="#OntopMaterialize-430"><span class="linenos">430</span></a>
</span><span id="OntopMaterialize-431"><a href="#OntopMaterialize-431"><span class="linenos">431</span></a><span class="sd">        Returns</span>
</span><span id="OntopMaterialize-432"><a href="#OntopMaterialize-432"><span class="linenos">432</span></a><span class="sd">        -------</span>
</span><span id="OntopMaterialize-433"><a href="#OntopMaterialize-433"><span class="linenos">433</span></a><span class="sd">        success : bool</span>
</span><span id="OntopMaterialize-434"><a href="#OntopMaterialize-434"><span class="linenos">434</span></a><span class="sd">            Whether the execution was successfull or not.</span>
</span><span id="OntopMaterialize-435"><a href="#OntopMaterialize-435"><span class="linenos">435</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="OntopMaterialize-436"><a href="#OntopMaterialize-436"><span class="linenos">436</span></a>        <span class="n">config_file</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_data_path</span><span class="si">}</span><span class="s1">/</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">root_mount_directory</span><span class="si">}</span><span class="s1">&#39;</span> <span class="o">+</span> \
</span><span id="OntopMaterialize-437"><a href="#OntopMaterialize-437"><span class="linenos">437</span></a>                      <span class="s1">&#39;/config.properties&#39;</span>
</span><span id="OntopMaterialize-438"><a href="#OntopMaterialize-438"><span class="linenos">438</span></a>        <span class="n">arguments</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;-f&#39;</span><span class="p">,</span> <span class="n">serialization</span><span class="p">]</span>
</span><span id="OntopMaterialize-439"><a href="#OntopMaterialize-439"><span class="linenos">439</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_headers</span> <span class="o">=</span> <span class="p">{}</span>
</span><span id="OntopMaterialize-440"><a href="#OntopMaterialize-440"><span class="linenos">440</span></a>        <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">_execute_mapping</span><span class="p">(</span><span class="n">config_file</span><span class="p">,</span> <span class="n">arguments</span><span class="p">,</span>
</span><span id="OntopMaterialize-441"><a href="#OntopMaterialize-441"><span class="linenos">441</span></a>                                        <span class="n">mapping_file</span><span class="p">,</span> <span class="n">output_file</span><span class="p">,</span>
</span><span id="OntopMaterialize-442"><a href="#OntopMaterialize-442"><span class="linenos">442</span></a>                                        <span class="n">rdb_username</span><span class="p">,</span> <span class="n">rdb_password</span><span class="p">,</span>
</span><span id="OntopMaterialize-443"><a href="#OntopMaterialize-443"><span class="linenos">443</span></a>                                        <span class="n">rdb_host</span><span class="p">,</span> <span class="n">rdb_port</span><span class="p">,</span> <span class="n">rdb_name</span><span class="p">,</span> <span class="n">rdb_type</span><span class="p">)</span>
</span><span id="OntopMaterialize-444"><a href="#OntopMaterialize-444"><span class="linenos">444</span></a>
</span><span id="OntopMaterialize-445"><a href="#OntopMaterialize-445"><span class="linenos">445</span></a>    <span class="k">def</span> <span class="nf">execute_mapping</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
</span><span id="OntopMaterialize-446"><a href="#OntopMaterialize-446"><span class="linenos">446</span></a>                        <span class="n">mapping_file</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="OntopMaterialize-447"><a href="#OntopMaterialize-447"><span class="linenos">447</span></a>                        <span class="n">output_file</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="OntopMaterialize-448"><a href="#OntopMaterialize-448"><span class="linenos">448</span></a>                        <span class="n">serialization</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="OntopMaterialize-449"><a href="#OntopMaterialize-449"><span class="linenos">449</span></a>                        <span class="n">rdb_username</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="OntopMaterialize-450"><a href="#OntopMaterialize-450"><span class="linenos">450</span></a>                        <span class="n">rdb_password</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="OntopMaterialize-451"><a href="#OntopMaterialize-451"><span class="linenos">451</span></a>                        <span class="n">rdb_host</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="OntopMaterialize-452"><a href="#OntopMaterialize-452"><span class="linenos">452</span></a>                        <span class="n">rdb_port</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
</span><span id="OntopMaterialize-453"><a href="#OntopMaterialize-453"><span class="linenos">453</span></a>                        <span class="n">rdb_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="OntopMaterialize-454"><a href="#OntopMaterialize-454"><span class="linenos">454</span></a>                        <span class="n">rdb_type</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="OntopMaterialize-455"><a href="#OntopMaterialize-455"><span class="linenos">455</span></a>        <span class="sd">&quot;&quot;&quot;Execute a R2RML mapping with Ontop</span>
</span><span id="OntopMaterialize-456"><a href="#OntopMaterialize-456"><span class="linenos">456</span></a>
</span><span id="OntopMaterialize-457"><a href="#OntopMaterialize-457"><span class="linenos">457</span></a><span class="sd">        N-Quads and N-Triples are currently supported as serialization</span>
</span><span id="OntopMaterialize-458"><a href="#OntopMaterialize-458"><span class="linenos">458</span></a><span class="sd">        for Ontop materialize. Only relational databases are supported by</span>
</span><span id="OntopMaterialize-459"><a href="#OntopMaterialize-459"><span class="linenos">459</span></a><span class="sd">        Ontop, thus the relational database parameters are mandantory.</span>
</span><span id="OntopMaterialize-460"><a href="#OntopMaterialize-460"><span class="linenos">460</span></a>
</span><span id="OntopMaterialize-461"><a href="#OntopMaterialize-461"><span class="linenos">461</span></a><span class="sd">        Parameters</span>
</span><span id="OntopMaterialize-462"><a href="#OntopMaterialize-462"><span class="linenos">462</span></a><span class="sd">        ----------</span>
</span><span id="OntopMaterialize-463"><a href="#OntopMaterialize-463"><span class="linenos">463</span></a><span class="sd">        mapping_file : str</span>
</span><span id="OntopMaterialize-464"><a href="#OntopMaterialize-464"><span class="linenos">464</span></a><span class="sd">            Path to the mapping file to execute.</span>
</span><span id="OntopMaterialize-465"><a href="#OntopMaterialize-465"><span class="linenos">465</span></a><span class="sd">        output_file : str</span>
</span><span id="OntopMaterialize-466"><a href="#OntopMaterialize-466"><span class="linenos">466</span></a><span class="sd">            Name of the output file to store the triples in. This is not used</span>
</span><span id="OntopMaterialize-467"><a href="#OntopMaterialize-467"><span class="linenos">467</span></a><span class="sd">            for OntopVirtualize.</span>
</span><span id="OntopMaterialize-468"><a href="#OntopMaterialize-468"><span class="linenos">468</span></a><span class="sd">        serialization : str</span>
</span><span id="OntopMaterialize-469"><a href="#OntopMaterialize-469"><span class="linenos">469</span></a><span class="sd">            Serialization format to use.</span>
</span><span id="OntopMaterialize-470"><a href="#OntopMaterialize-470"><span class="linenos">470</span></a><span class="sd">        rdb_username : str</span>
</span><span id="OntopMaterialize-471"><a href="#OntopMaterialize-471"><span class="linenos">471</span></a><span class="sd">            Username for the database.</span>
</span><span id="OntopMaterialize-472"><a href="#OntopMaterialize-472"><span class="linenos">472</span></a><span class="sd">        rdb_password : str</span>
</span><span id="OntopMaterialize-473"><a href="#OntopMaterialize-473"><span class="linenos">473</span></a><span class="sd">            Password for the database.</span>
</span><span id="OntopMaterialize-474"><a href="#OntopMaterialize-474"><span class="linenos">474</span></a><span class="sd">        rdb_host : str</span>
</span><span id="OntopMaterialize-475"><a href="#OntopMaterialize-475"><span class="linenos">475</span></a><span class="sd">            Hostname for the database.</span>
</span><span id="OntopMaterialize-476"><a href="#OntopMaterialize-476"><span class="linenos">476</span></a><span class="sd">        rdb_port : int</span>
</span><span id="OntopMaterialize-477"><a href="#OntopMaterialize-477"><span class="linenos">477</span></a><span class="sd">            Port for the database.</span>
</span><span id="OntopMaterialize-478"><a href="#OntopMaterialize-478"><span class="linenos">478</span></a><span class="sd">        rdb_name : str</span>
</span><span id="OntopMaterialize-479"><a href="#OntopMaterialize-479"><span class="linenos">479</span></a><span class="sd">            Database name for the database.</span>
</span><span id="OntopMaterialize-480"><a href="#OntopMaterialize-480"><span class="linenos">480</span></a><span class="sd">        rdb_type : str</span>
</span><span id="OntopMaterialize-481"><a href="#OntopMaterialize-481"><span class="linenos">481</span></a><span class="sd">            Database type.</span>
</span><span id="OntopMaterialize-482"><a href="#OntopMaterialize-482"><span class="linenos">482</span></a>
</span><span id="OntopMaterialize-483"><a href="#OntopMaterialize-483"><span class="linenos">483</span></a><span class="sd">        Returns</span>
</span><span id="OntopMaterialize-484"><a href="#OntopMaterialize-484"><span class="linenos">484</span></a><span class="sd">        -------</span>
</span><span id="OntopMaterialize-485"><a href="#OntopMaterialize-485"><span class="linenos">485</span></a><span class="sd">        success : bool</span>
</span><span id="OntopMaterialize-486"><a href="#OntopMaterialize-486"><span class="linenos">486</span></a><span class="sd">            Whether the execution was successfull or not.</span>
</span><span id="OntopMaterialize-487"><a href="#OntopMaterialize-487"><span class="linenos">487</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="OntopMaterialize-488"><a href="#OntopMaterialize-488"><span class="linenos">488</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="OntopMaterialize-489"><a href="#OntopMaterialize-489"><span class="linenos">489</span></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_execute_mapping_with_timeout</span><span class="p">(</span><span class="n">mapping_file</span><span class="p">,</span>
</span><span id="OntopMaterialize-490"><a href="#OntopMaterialize-490"><span class="linenos">490</span></a>                                                      <span class="n">output_file</span><span class="p">,</span>
</span><span id="OntopMaterialize-491"><a href="#OntopMaterialize-491"><span class="linenos">491</span></a>                                                      <span class="n">serialization</span><span class="p">,</span>
</span><span id="OntopMaterialize-492"><a href="#OntopMaterialize-492"><span class="linenos">492</span></a>                                                      <span class="n">rdb_username</span><span class="p">,</span>
</span><span id="OntopMaterialize-493"><a href="#OntopMaterialize-493"><span class="linenos">493</span></a>                                                      <span class="n">rdb_password</span><span class="p">,</span>
</span><span id="OntopMaterialize-494"><a href="#OntopMaterialize-494"><span class="linenos">494</span></a>                                                      <span class="n">rdb_host</span><span class="p">,</span>
</span><span id="OntopMaterialize-495"><a href="#OntopMaterialize-495"><span class="linenos">495</span></a>                                                      <span class="n">rdb_port</span><span class="p">,</span>
</span><span id="OntopMaterialize-496"><a href="#OntopMaterialize-496"><span class="linenos">496</span></a>                                                      <span class="n">rdb_name</span><span class="p">,</span>
</span><span id="OntopMaterialize-497"><a href="#OntopMaterialize-497"><span class="linenos">497</span></a>                                                      <span class="n">rdb_type</span><span class="p">)</span>
</span><span id="OntopMaterialize-498"><a href="#OntopMaterialize-498"><span class="linenos">498</span></a>        <span class="k">except</span> <span class="ne">TimeoutError</span><span class="p">:</span>
</span><span id="OntopMaterialize-499"><a href="#OntopMaterialize-499"><span class="linenos">499</span></a>            <span class="n">msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;Timeout (</span><span class="si">{</span><span class="n">TIMEOUT</span><span class="si">}</span><span class="s1">s) reached for Ontop Materialize&#39;</span>
</span><span id="OntopMaterialize-500"><a href="#OntopMaterialize-500"><span class="linenos">500</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
</span><span id="OntopMaterialize-501"><a href="#OntopMaterialize-501"><span class="linenos">501</span></a>
</span><span id="OntopMaterialize-502"><a href="#OntopMaterialize-502"><span class="linenos">502</span></a>        <span class="k">return</span> <span class="kc">False</span>
</span></pre></div>


            <div class="docstring"><p>OntopMaterialize container to execute a R2RML mapping.</p>
</div>


                            <div id="OntopMaterialize.__init__" class="classattr">
                                        <input id="OntopMaterialize.__init__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="name">OntopMaterialize</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">data_path</span><span class="p">:</span> <span class="nb">str</span>, </span><span class="param"><span class="n">config_path</span><span class="p">:</span> <span class="nb">str</span>, </span><span class="param"><span class="n">directory</span><span class="p">:</span> <span class="nb">str</span>, </span><span class="param"><span class="n">verbose</span><span class="p">:</span> <span class="nb">bool</span></span>)</span>

                <label class="view-source-button" for="OntopMaterialize.__init__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#OntopMaterialize.__init__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="OntopMaterialize.__init__-396"><a href="#OntopMaterialize.__init__-396"><span class="linenos">396</span></a>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data_path</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">config_path</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">directory</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="OntopMaterialize.__init__-397"><a href="#OntopMaterialize.__init__-397"><span class="linenos">397</span></a>                 <span class="n">verbose</span><span class="p">:</span> <span class="nb">bool</span><span class="p">):</span>
</span><span id="OntopMaterialize.__init__-398"><a href="#OntopMaterialize.__init__-398"><span class="linenos">398</span></a>        <span class="sd">&quot;&quot;&quot;Creates an instance of the OntopMaterialize class.</span>
</span><span id="OntopMaterialize.__init__-399"><a href="#OntopMaterialize.__init__-399"><span class="linenos">399</span></a>
</span><span id="OntopMaterialize.__init__-400"><a href="#OntopMaterialize.__init__-400"><span class="linenos">400</span></a><span class="sd">        Parameters</span>
</span><span id="OntopMaterialize.__init__-401"><a href="#OntopMaterialize.__init__-401"><span class="linenos">401</span></a><span class="sd">        ----------</span>
</span><span id="OntopMaterialize.__init__-402"><a href="#OntopMaterialize.__init__-402"><span class="linenos">402</span></a><span class="sd">        data_path : str</span>
</span><span id="OntopMaterialize.__init__-403"><a href="#OntopMaterialize.__init__-403"><span class="linenos">403</span></a><span class="sd">            Path to the data directory of the case.</span>
</span><span id="OntopMaterialize.__init__-404"><a href="#OntopMaterialize.__init__-404"><span class="linenos">404</span></a><span class="sd">        config_path : str</span>
</span><span id="OntopMaterialize.__init__-405"><a href="#OntopMaterialize.__init__-405"><span class="linenos">405</span></a><span class="sd">            Path to the config directory of the case.</span>
</span><span id="OntopMaterialize.__init__-406"><a href="#OntopMaterialize.__init__-406"><span class="linenos">406</span></a><span class="sd">        directory : str</span>
</span><span id="OntopMaterialize.__init__-407"><a href="#OntopMaterialize.__init__-407"><span class="linenos">407</span></a><span class="sd">            Path to the directory to store logs.</span>
</span><span id="OntopMaterialize.__init__-408"><a href="#OntopMaterialize.__init__-408"><span class="linenos">408</span></a><span class="sd">        verbose : bool</span>
</span><span id="OntopMaterialize.__init__-409"><a href="#OntopMaterialize.__init__-409"><span class="linenos">409</span></a><span class="sd">            Enable verbose logs.</span>
</span><span id="OntopMaterialize.__init__-410"><a href="#OntopMaterialize.__init__-410"><span class="linenos">410</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="OntopMaterialize.__init__-411"><a href="#OntopMaterialize.__init__-411"><span class="linenos">411</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_data_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">data_path</span><span class="p">)</span>
</span><span id="OntopMaterialize.__init__-412"><a href="#OntopMaterialize.__init__-412"><span class="linenos">412</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_config_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">config_path</span><span class="p">)</span>
</span><span id="OntopMaterialize.__init__-413"><a href="#OntopMaterialize.__init__-413"><span class="linenos">413</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span> <span class="o">=</span> <span class="n">Logger</span><span class="p">(</span><span class="vm">__name__</span><span class="p">,</span> <span class="n">directory</span><span class="p">,</span> <span class="n">verbose</span><span class="p">)</span>
</span><span id="OntopMaterialize.__init__-414"><a href="#OntopMaterialize.__init__-414"><span class="linenos">414</span></a>        <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_data_path</span><span class="p">,</span> <span class="s1">&#39;ontopmaterialize&#39;</span><span class="p">),</span>
</span><span id="OntopMaterialize.__init__-415"><a href="#OntopMaterialize.__init__-415"><span class="linenos">415</span></a>                    <span class="n">exist_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span><span id="OntopMaterialize.__init__-416"><a href="#OntopMaterialize.__init__-416"><span class="linenos">416</span></a>        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="s1">&#39;Ontop-Materialize&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_data_path</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="p">,</span>
</span><span id="OntopMaterialize.__init__-417"><a href="#OntopMaterialize.__init__-417"><span class="linenos">417</span></a>                         <span class="s1">&#39;materialize&#39;</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Creates an instance of the OntopMaterialize class.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>data_path</strong> (str):
Path to the data directory of the case.</li>
<li><strong>config_path</strong> (str):
Path to the config directory of the case.</li>
<li><strong>directory</strong> (str):
Path to the directory to store logs.</li>
<li><strong>verbose</strong> (bool):
Enable verbose logs.</li>
</ul>
</div>


                            </div>
                            <div id="OntopMaterialize.execute_mapping" class="classattr">
                                        <input id="OntopMaterialize.execute_mapping-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">execute_mapping</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">mapping_file</span><span class="p">:</span> <span class="nb">str</span>,</span><span class="param">	<span class="n">output_file</span><span class="p">:</span> <span class="nb">str</span>,</span><span class="param">	<span class="n">serialization</span><span class="p">:</span> <span class="nb">str</span>,</span><span class="param">	<span class="n">rdb_username</span><span class="p">:</span> <span class="nb">str</span>,</span><span class="param">	<span class="n">rdb_password</span><span class="p">:</span> <span class="nb">str</span>,</span><span class="param">	<span class="n">rdb_host</span><span class="p">:</span> <span class="nb">str</span>,</span><span class="param">	<span class="n">rdb_port</span><span class="p">:</span> <span class="nb">int</span>,</span><span class="param">	<span class="n">rdb_name</span><span class="p">:</span> <span class="nb">str</span>,</span><span class="param">	<span class="n">rdb_type</span><span class="p">:</span> <span class="nb">str</span></span><span class="return-annotation">) -> <span class="nb">bool</span>:</span></span>

                <label class="view-source-button" for="OntopMaterialize.execute_mapping-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#OntopMaterialize.execute_mapping"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="OntopMaterialize.execute_mapping-445"><a href="#OntopMaterialize.execute_mapping-445"><span class="linenos">445</span></a>    <span class="k">def</span> <span class="nf">execute_mapping</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
</span><span id="OntopMaterialize.execute_mapping-446"><a href="#OntopMaterialize.execute_mapping-446"><span class="linenos">446</span></a>                        <span class="n">mapping_file</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="OntopMaterialize.execute_mapping-447"><a href="#OntopMaterialize.execute_mapping-447"><span class="linenos">447</span></a>                        <span class="n">output_file</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="OntopMaterialize.execute_mapping-448"><a href="#OntopMaterialize.execute_mapping-448"><span class="linenos">448</span></a>                        <span class="n">serialization</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="OntopMaterialize.execute_mapping-449"><a href="#OntopMaterialize.execute_mapping-449"><span class="linenos">449</span></a>                        <span class="n">rdb_username</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="OntopMaterialize.execute_mapping-450"><a href="#OntopMaterialize.execute_mapping-450"><span class="linenos">450</span></a>                        <span class="n">rdb_password</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="OntopMaterialize.execute_mapping-451"><a href="#OntopMaterialize.execute_mapping-451"><span class="linenos">451</span></a>                        <span class="n">rdb_host</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="OntopMaterialize.execute_mapping-452"><a href="#OntopMaterialize.execute_mapping-452"><span class="linenos">452</span></a>                        <span class="n">rdb_port</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span>
</span><span id="OntopMaterialize.execute_mapping-453"><a href="#OntopMaterialize.execute_mapping-453"><span class="linenos">453</span></a>                        <span class="n">rdb_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
</span><span id="OntopMaterialize.execute_mapping-454"><a href="#OntopMaterialize.execute_mapping-454"><span class="linenos">454</span></a>                        <span class="n">rdb_type</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
</span><span id="OntopMaterialize.execute_mapping-455"><a href="#OntopMaterialize.execute_mapping-455"><span class="linenos">455</span></a>        <span class="sd">&quot;&quot;&quot;Execute a R2RML mapping with Ontop</span>
</span><span id="OntopMaterialize.execute_mapping-456"><a href="#OntopMaterialize.execute_mapping-456"><span class="linenos">456</span></a>
</span><span id="OntopMaterialize.execute_mapping-457"><a href="#OntopMaterialize.execute_mapping-457"><span class="linenos">457</span></a><span class="sd">        N-Quads and N-Triples are currently supported as serialization</span>
</span><span id="OntopMaterialize.execute_mapping-458"><a href="#OntopMaterialize.execute_mapping-458"><span class="linenos">458</span></a><span class="sd">        for Ontop materialize. Only relational databases are supported by</span>
</span><span id="OntopMaterialize.execute_mapping-459"><a href="#OntopMaterialize.execute_mapping-459"><span class="linenos">459</span></a><span class="sd">        Ontop, thus the relational database parameters are mandantory.</span>
</span><span id="OntopMaterialize.execute_mapping-460"><a href="#OntopMaterialize.execute_mapping-460"><span class="linenos">460</span></a>
</span><span id="OntopMaterialize.execute_mapping-461"><a href="#OntopMaterialize.execute_mapping-461"><span class="linenos">461</span></a><span class="sd">        Parameters</span>
</span><span id="OntopMaterialize.execute_mapping-462"><a href="#OntopMaterialize.execute_mapping-462"><span class="linenos">462</span></a><span class="sd">        ----------</span>
</span><span id="OntopMaterialize.execute_mapping-463"><a href="#OntopMaterialize.execute_mapping-463"><span class="linenos">463</span></a><span class="sd">        mapping_file : str</span>
</span><span id="OntopMaterialize.execute_mapping-464"><a href="#OntopMaterialize.execute_mapping-464"><span class="linenos">464</span></a><span class="sd">            Path to the mapping file to execute.</span>
</span><span id="OntopMaterialize.execute_mapping-465"><a href="#OntopMaterialize.execute_mapping-465"><span class="linenos">465</span></a><span class="sd">        output_file : str</span>
</span><span id="OntopMaterialize.execute_mapping-466"><a href="#OntopMaterialize.execute_mapping-466"><span class="linenos">466</span></a><span class="sd">            Name of the output file to store the triples in. This is not used</span>
</span><span id="OntopMaterialize.execute_mapping-467"><a href="#OntopMaterialize.execute_mapping-467"><span class="linenos">467</span></a><span class="sd">            for OntopVirtualize.</span>
</span><span id="OntopMaterialize.execute_mapping-468"><a href="#OntopMaterialize.execute_mapping-468"><span class="linenos">468</span></a><span class="sd">        serialization : str</span>
</span><span id="OntopMaterialize.execute_mapping-469"><a href="#OntopMaterialize.execute_mapping-469"><span class="linenos">469</span></a><span class="sd">            Serialization format to use.</span>
</span><span id="OntopMaterialize.execute_mapping-470"><a href="#OntopMaterialize.execute_mapping-470"><span class="linenos">470</span></a><span class="sd">        rdb_username : str</span>
</span><span id="OntopMaterialize.execute_mapping-471"><a href="#OntopMaterialize.execute_mapping-471"><span class="linenos">471</span></a><span class="sd">            Username for the database.</span>
</span><span id="OntopMaterialize.execute_mapping-472"><a href="#OntopMaterialize.execute_mapping-472"><span class="linenos">472</span></a><span class="sd">        rdb_password : str</span>
</span><span id="OntopMaterialize.execute_mapping-473"><a href="#OntopMaterialize.execute_mapping-473"><span class="linenos">473</span></a><span class="sd">            Password for the database.</span>
</span><span id="OntopMaterialize.execute_mapping-474"><a href="#OntopMaterialize.execute_mapping-474"><span class="linenos">474</span></a><span class="sd">        rdb_host : str</span>
</span><span id="OntopMaterialize.execute_mapping-475"><a href="#OntopMaterialize.execute_mapping-475"><span class="linenos">475</span></a><span class="sd">            Hostname for the database.</span>
</span><span id="OntopMaterialize.execute_mapping-476"><a href="#OntopMaterialize.execute_mapping-476"><span class="linenos">476</span></a><span class="sd">        rdb_port : int</span>
</span><span id="OntopMaterialize.execute_mapping-477"><a href="#OntopMaterialize.execute_mapping-477"><span class="linenos">477</span></a><span class="sd">            Port for the database.</span>
</span><span id="OntopMaterialize.execute_mapping-478"><a href="#OntopMaterialize.execute_mapping-478"><span class="linenos">478</span></a><span class="sd">        rdb_name : str</span>
</span><span id="OntopMaterialize.execute_mapping-479"><a href="#OntopMaterialize.execute_mapping-479"><span class="linenos">479</span></a><span class="sd">            Database name for the database.</span>
</span><span id="OntopMaterialize.execute_mapping-480"><a href="#OntopMaterialize.execute_mapping-480"><span class="linenos">480</span></a><span class="sd">        rdb_type : str</span>
</span><span id="OntopMaterialize.execute_mapping-481"><a href="#OntopMaterialize.execute_mapping-481"><span class="linenos">481</span></a><span class="sd">            Database type.</span>
</span><span id="OntopMaterialize.execute_mapping-482"><a href="#OntopMaterialize.execute_mapping-482"><span class="linenos">482</span></a>
</span><span id="OntopMaterialize.execute_mapping-483"><a href="#OntopMaterialize.execute_mapping-483"><span class="linenos">483</span></a><span class="sd">        Returns</span>
</span><span id="OntopMaterialize.execute_mapping-484"><a href="#OntopMaterialize.execute_mapping-484"><span class="linenos">484</span></a><span class="sd">        -------</span>
</span><span id="OntopMaterialize.execute_mapping-485"><a href="#OntopMaterialize.execute_mapping-485"><span class="linenos">485</span></a><span class="sd">        success : bool</span>
</span><span id="OntopMaterialize.execute_mapping-486"><a href="#OntopMaterialize.execute_mapping-486"><span class="linenos">486</span></a><span class="sd">            Whether the execution was successfull or not.</span>
</span><span id="OntopMaterialize.execute_mapping-487"><a href="#OntopMaterialize.execute_mapping-487"><span class="linenos">487</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="OntopMaterialize.execute_mapping-488"><a href="#OntopMaterialize.execute_mapping-488"><span class="linenos">488</span></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="OntopMaterialize.execute_mapping-489"><a href="#OntopMaterialize.execute_mapping-489"><span class="linenos">489</span></a>            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_execute_mapping_with_timeout</span><span class="p">(</span><span class="n">mapping_file</span><span class="p">,</span>
</span><span id="OntopMaterialize.execute_mapping-490"><a href="#OntopMaterialize.execute_mapping-490"><span class="linenos">490</span></a>                                                      <span class="n">output_file</span><span class="p">,</span>
</span><span id="OntopMaterialize.execute_mapping-491"><a href="#OntopMaterialize.execute_mapping-491"><span class="linenos">491</span></a>                                                      <span class="n">serialization</span><span class="p">,</span>
</span><span id="OntopMaterialize.execute_mapping-492"><a href="#OntopMaterialize.execute_mapping-492"><span class="linenos">492</span></a>                                                      <span class="n">rdb_username</span><span class="p">,</span>
</span><span id="OntopMaterialize.execute_mapping-493"><a href="#OntopMaterialize.execute_mapping-493"><span class="linenos">493</span></a>                                                      <span class="n">rdb_password</span><span class="p">,</span>
</span><span id="OntopMaterialize.execute_mapping-494"><a href="#OntopMaterialize.execute_mapping-494"><span class="linenos">494</span></a>                                                      <span class="n">rdb_host</span><span class="p">,</span>
</span><span id="OntopMaterialize.execute_mapping-495"><a href="#OntopMaterialize.execute_mapping-495"><span class="linenos">495</span></a>                                                      <span class="n">rdb_port</span><span class="p">,</span>
</span><span id="OntopMaterialize.execute_mapping-496"><a href="#OntopMaterialize.execute_mapping-496"><span class="linenos">496</span></a>                                                      <span class="n">rdb_name</span><span class="p">,</span>
</span><span id="OntopMaterialize.execute_mapping-497"><a href="#OntopMaterialize.execute_mapping-497"><span class="linenos">497</span></a>                                                      <span class="n">rdb_type</span><span class="p">)</span>
</span><span id="OntopMaterialize.execute_mapping-498"><a href="#OntopMaterialize.execute_mapping-498"><span class="linenos">498</span></a>        <span class="k">except</span> <span class="ne">TimeoutError</span><span class="p">:</span>
</span><span id="OntopMaterialize.execute_mapping-499"><a href="#OntopMaterialize.execute_mapping-499"><span class="linenos">499</span></a>            <span class="n">msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;Timeout (</span><span class="si">{</span><span class="n">TIMEOUT</span><span class="si">}</span><span class="s1">s) reached for Ontop Materialize&#39;</span>
</span><span id="OntopMaterialize.execute_mapping-500"><a href="#OntopMaterialize.execute_mapping-500"><span class="linenos">500</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">_logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
</span><span id="OntopMaterialize.execute_mapping-501"><a href="#OntopMaterialize.execute_mapping-501"><span class="linenos">501</span></a>
</span><span id="OntopMaterialize.execute_mapping-502"><a href="#OntopMaterialize.execute_mapping-502"><span class="linenos">502</span></a>        <span class="k">return</span> <span class="kc">False</span>
</span></pre></div>


            <div class="docstring"><p>Execute a R2RML mapping with Ontop</p>

<p>N-Quads and N-Triples are currently supported as serialization
for Ontop materialize. Only relational databases are supported by
Ontop, thus the relational database parameters are mandantory.</p>

<h6 id="parameters">Parameters</h6>

<ul>
<li><strong>mapping_file</strong> (str):
Path to the mapping file to execute.</li>
<li><strong>output_file</strong> (str):
Name of the output file to store the triples in. This is not used
for OntopVirtualize.</li>
<li><strong>serialization</strong> (str):
Serialization format to use.</li>
<li><strong>rdb_username</strong> (str):
Username for the database.</li>
<li><strong>rdb_password</strong> (str):
Password for the database.</li>
<li><strong>rdb_host</strong> (str):
Hostname for the database.</li>
<li><strong>rdb_port</strong> (int):
Port for the database.</li>
<li><strong>rdb_name</strong> (str):
Database name for the database.</li>
<li><strong>rdb_type</strong> (str):
Database type.</li>
</ul>

<h6 id="returns">Returns</h6>

<ul>
<li><strong>success</strong> (bool):
Whether the execution was successfull or not.</li>
</ul>
</div>


                            </div>
                            <div class="inherited">
                                <h5>Inherited Members</h5>
                                <dl>
                                    <div><dt><a href="#Ontop">Ontop</a></dt>
                                <dd id="OntopMaterialize.root_mount_directory" class="variable"><a href="#Ontop.root_mount_directory">root_mount_directory</a></dd>
                <dd id="OntopMaterialize.endpoint" class="variable"><a href="#Ontop.endpoint">endpoint</a></dd>
                <dd id="OntopMaterialize.headers" class="variable"><a href="#Ontop.headers">headers</a></dd>

            </div>
            <div><dt><a href="container.html#Container">bench_executor.container.Container</a></dt>
                                <dd id="OntopMaterialize.started" class="variable"><a href="container.html#Container.started">started</a></dd>
                <dd id="OntopMaterialize.name" class="variable"><a href="container.html#Container.name">name</a></dd>
                <dd id="OntopMaterialize.run" class="function"><a href="container.html#Container.run">run</a></dd>
                <dd id="OntopMaterialize.exec" class="function"><a href="container.html#Container.exec">exec</a></dd>
                <dd id="OntopMaterialize.run_and_wait_for_log" class="function"><a href="container.html#Container.run_and_wait_for_log">run_and_wait_for_log</a></dd>
                <dd id="OntopMaterialize.run_and_wait_for_exit" class="function"><a href="container.html#Container.run_and_wait_for_exit">run_and_wait_for_exit</a></dd>
                <dd id="OntopMaterialize.stop" class="function"><a href="container.html#Container.stop">stop</a></dd>

            </div>
                                </dl>
                            </div>
                </section>
    </main>
<script>
    function escapeHTML(html) {
        return document.createElement('div').appendChild(document.createTextNode(html)).parentNode.innerHTML;
    }

    const originalContent = document.querySelector("main.pdoc");
    let currentContent = originalContent;

    function setContent(innerHTML) {
        let elem;
        if (innerHTML) {
            elem = document.createElement("main");
            elem.classList.add("pdoc");
            elem.innerHTML = innerHTML;
        } else {
            elem = originalContent;
        }
        if (currentContent !== elem) {
            currentContent.replaceWith(elem);
            currentContent = elem;
        }
    }

    function getSearchTerm() {
        return (new URL(window.location)).searchParams.get("search");
    }

    const searchBox = document.querySelector(".pdoc input[type=search]");
    searchBox.addEventListener("input", function () {
        let url = new URL(window.location);
        if (searchBox.value.trim()) {
            url.hash = "";
            url.searchParams.set("search", searchBox.value);
        } else {
            url.searchParams.delete("search");
        }
        history.replaceState("", "", url.toString());
        onInput();
    });
    window.addEventListener("popstate", onInput);


    let search, searchErr;

    async function initialize() {
        try {
            search = await new Promise((resolve, reject) => {
                const script = document.createElement("script");
                script.type = "text/javascript";
                script.async = true;
                script.onload = () => resolve(window.pdocSearch);
                script.onerror = (e) => reject(e);
                script.src = "../search.js";
                document.getElementsByTagName("head")[0].appendChild(script);
            });
        } catch (e) {
            console.error("Cannot fetch pdoc search index");
            searchErr = "Cannot fetch search index.";
        }
        onInput();

        document.querySelector("nav.pdoc").addEventListener("click", e => {
            if (e.target.hash) {
                searchBox.value = "";
                searchBox.dispatchEvent(new Event("input"));
            }
        });
    }

    function onInput() {
        setContent((() => {
            const term = getSearchTerm();
            if (!term) {
                return null
            }
            if (searchErr) {
                return `<h3>Error: ${searchErr}</h3>`
            }
            if (!search) {
                return "<h3>Searching...</h3>"
            }

            window.scrollTo({top: 0, left: 0, behavior: 'auto'});

            const results = search(term);

            let html;
            if (results.length === 0) {
                html = `No search results for '${escapeHTML(term)}'.`
            } else {
                html = `<h4>${results.length} search result${results.length > 1 ? "s" : ""} for '${escapeHTML(term)}'.</h4>`;
            }
            for (let result of results.slice(0, 10)) {
                let doc = result.doc;
                let url = `../${doc.modulename.replaceAll(".", "/")}.html`;
                if (doc.qualname) {
                    url += `#${doc.qualname}`;
                }

                let heading;
                switch (result.doc.kind) {
                    case "function":
                        if (doc.fullname.endsWith(".__init__")) {
                            heading = `<span class="name">${doc.fullname.replace(/\.__init__$/, "")}</span>${doc.signature}`;
                        } else {
                            heading = `<span class="def">${doc.funcdef}</span> <span class="name">${doc.fullname}</span>${doc.signature}`;
                        }
                        break;
                    case "class":
                        heading = `<span class="def">class</span> <span class="name">${doc.fullname}</span>`;
                        if (doc.bases)
                            heading += `<wbr>(<span class="base">${doc.bases}</span>)`;
                        heading += `:`;
                        break;
                    case "variable":
                        heading = `<span class="name">${doc.fullname}</span>`;
                        if (doc.annotation)
                            heading += `<span class="annotation">${doc.annotation}</span>`;
                        if (doc.default_value)
                            heading += `<span class="default_value">${doc.default_value}</span>`;
                        break;
                    default:
                        heading = `<span class="name">${doc.fullname}</span>`;
                        break;
                }
                html += `
                        <section class="search-result">
                        <a href="${url}" class="attr ${doc.kind}">${heading}</a>
                        <div class="docstring">${doc.doc}</div>
                        </section>
                    `;

            }
            return html;
        })());
    }

    if (getSearchTerm()) {
        initialize();
        searchBox.value = getSearchTerm();
        onInput();
    } else {
        searchBox.addEventListener("focus", initialize, {once: true});
    }

    searchBox.addEventListener("keydown", e => {
        if (["ArrowDown", "ArrowUp", "Enter"].includes(e.key)) {
            let focused = currentContent.querySelector(".search-result.focused");
            if (!focused) {
                currentContent.querySelector(".search-result").classList.add("focused");
            } else if (
                e.key === "ArrowDown"
                && focused.nextElementSibling
                && focused.nextElementSibling.classList.contains("search-result")
            ) {
                focused.classList.remove("focused");
                focused.nextElementSibling.classList.add("focused");
                focused.nextElementSibling.scrollIntoView({
                    behavior: "smooth",
                    block: "nearest",
                    inline: "nearest"
                });
            } else if (
                e.key === "ArrowUp"
                && focused.previousElementSibling
                && focused.previousElementSibling.classList.contains("search-result")
            ) {
                focused.classList.remove("focused");
                focused.previousElementSibling.classList.add("focused");
                focused.previousElementSibling.scrollIntoView({
                    behavior: "smooth",
                    block: "nearest",
                    inline: "nearest"
                });
            } else if (
                e.key === "Enter"
            ) {
                focused.querySelector("a").click();
            }
        }
    });
</script></body>
</html>